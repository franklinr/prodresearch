function FastClick(j,i){function p(d,c){return function(){return d.apply(c,arguments);};}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=j,this.tapDelay=i.tapDelay||200,!FastClick.notNeeded(j)){for(var n=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],m=this,l=0,k=n.length;k>l;l++){m[n[l]]=p(m[n[l]],m);}deviceIsAndroid&&(j.addEventListener("mouseover",this.onMouse,!0),j.addEventListener("mousedown",this.onMouse,!0),j.addEventListener("mouseup",this.onMouse,!0)),j.addEventListener("click",this.onClick,!0),j.addEventListener("touchstart",this.onTouchStart,!1),j.addEventListener("touchmove",this.onTouchMove,!1),j.addEventListener("touchend",this.onTouchEnd,!1),j.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(j.removeEventListener=function(a,h,g){var f=Node.prototype.removeEventListener;"click"===a?f.call(j,a,h.hijacked||h,g):f.call(j,a,h,g);},j.addEventListener=function(a,h,g){var f=Node.prototype.addEventListener;"click"===a?f.call(j,a,h.hijacked||(h.hijacked=function(b){b.propagationStopped||h(b);}),g):f.call(j,a,h,g);}),"function"==typeof j.onclick&&(o=j.onclick,j.addEventListener("click",function(b){o(b);},!1),j.onclick=null);}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(b){switch(b.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(b.disabled){return !0;}break;case"input":if(deviceIsIOS&&"file"===b.type||b.disabled){return !0;}break;case"label":case"video":return !0;}return/\bneedsclick\b/.test(b.className);},FastClick.prototype.needsFocus=function(b){switch(b.nodeName.toLowerCase()){case"textarea":return !0;case"select":return !deviceIsAndroid;case"input":switch(b.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return !1;}return !b.disabled&&!b.readOnly;default:return/\bneedsfocus\b/.test(b.className);}},FastClick.prototype.sendClick=function(f,e){var h,g;document.activeElement&&document.activeElement!==f&&document.activeElement.blur(),g=e.changedTouches[0],h=document.createEvent("MouseEvents"),h.initMouseEvent(this.determineEventType(f),!0,!0,window,1,g.screenX,g.screenY,g.clientX,g.clientY,!1,!1,!1,!1,0,null),h.forwardedTouchEvent=!0,f.dispatchEvent(h);},FastClick.prototype.determineEventType=function(b){return deviceIsAndroid&&"select"===b.tagName.toLowerCase()?"mousedown":"click";},FastClick.prototype.focus=function(d){var c;deviceIsIOS&&d.setSelectionRange&&0!==d.type.indexOf("date")&&"time"!==d.type?(c=d.value.length,d.setSelectionRange(c,c)):d.focus();},FastClick.prototype.updateScrollParent=function(e){var d,f;if(d=e.fastClickScrollParent,!d||!d.contains(e)){f=e;do{if(f.scrollHeight>f.offsetHeight){d=f,e.fastClickScrollParent=f;break;}f=f.parentElement;}while(f);}d&&(d.fastClickLastScrollTop=d.scrollTop);},FastClick.prototype.getTargetElementFromEventTarget=function(b){return b.nodeType===Node.TEXT_NODE?b.parentNode:b;},FastClick.prototype.onTouchStart=function(f){var e,h,g;if(f.targetTouches.length>1){return !0;}if(e=this.getTargetElementFromEventTarget(f.target),h=f.targetTouches[0],deviceIsIOS){if(g=window.getSelection(),g.rangeCount&&!g.isCollapsed){return !0;}if(!deviceIsIOS4){if(h.identifier===this.lastTouchIdentifier){return f.preventDefault(),!1;}this.lastTouchIdentifier=h.identifier,this.updateScrollParent(e);}}return this.trackingClick=!0,this.trackingClickStart=f.timeStamp,this.targetElement=e,this.touchStartX=h.pageX,this.touchStartY=h.pageY,f.timeStamp-this.lastClickTime<this.tapDelay&&f.preventDefault(),!0;},FastClick.prototype.touchHasMoved=function(e){var d=e.changedTouches[0],f=this.touchBoundary;return Math.abs(d.pageX-this.touchStartX)>f||Math.abs(d.pageY-this.touchStartY)>f?!0:!1;},FastClick.prototype.onTouchMove=function(b){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(b.target)||this.touchHasMoved(b))&&(this.trackingClick=!1,this.targetElement=null),!0):!0;},FastClick.prototype.findControl=function(b){return void 0!==b.control?b.control:b.htmlFor?document.getElementById(b.htmlFor):b.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea");},FastClick.prototype.onTouchEnd=function(i){var h,n,m,l,k,j=this.targetElement;if(!this.trackingClick){return !0;}if(i.timeStamp-this.lastClickTime<this.tapDelay){return this.cancelNextClick=!0,!0;}if(this.cancelNextClick=!1,this.lastClickTime=i.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(k=i.changedTouches[0],j=document.elementFromPoint(k.pageX-window.pageXOffset,k.pageY-window.pageYOffset)||j,j.fastClickScrollParent=this.targetElement.fastClickScrollParent),m=j.tagName.toLowerCase(),"label"===m){if(h=this.findControl(j)){if(this.focus(j),deviceIsAndroid){return !1;}j=h;}}else{if(this.needsFocus(j)){return i.timeStamp-n>100||deviceIsIOS&&window.top!==window&&"input"===m?(this.targetElement=null,!1):(this.focus(j),this.sendClick(j,i),deviceIsIOS&&"select"===m||(this.targetElement=null,i.preventDefault()),!1);}}return deviceIsIOS&&!deviceIsIOS4&&(l=j.fastClickScrollParent,l&&l.fastClickLastScrollTop!==l.scrollTop)?!0:(this.needsClick(j)||(i.preventDefault(),this.sendClick(j,i)),!1);},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null;},FastClick.prototype.onMouse=function(b){return this.targetElement?b.forwardedTouchEvent?!0:b.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(b.stopImmediatePropagation?b.stopImmediatePropagation():b.propagationStopped=!0,b.stopPropagation(),b.preventDefault(),!1):!0:!0;},FastClick.prototype.onClick=function(d){var c;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===d.target.type&&0===d.detail?!0:(c=this.onMouse(d),c||(this.targetElement=null),c);},FastClick.prototype.destroy=function(){var b=this.layer;deviceIsAndroid&&(b.removeEventListener("mouseover",this.onMouse,!0),b.removeEventListener("mousedown",this.onMouse,!0),b.removeEventListener("mouseup",this.onMouse,!0)),b.removeEventListener("click",this.onClick,!0),b.removeEventListener("touchstart",this.onTouchStart,!1),b.removeEventListener("touchmove",this.onTouchMove,!1),b.removeEventListener("touchend",this.onTouchEnd,!1),b.removeEventListener("touchcancel",this.onTouchCancel,!1);},FastClick.notNeeded=function(e){var d,f;if("undefined"==typeof window.ontouchstart){return !0;}if(f=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid){return !0;}if(d=document.querySelector("meta[name=viewport]")){if(-1!==d.content.indexOf("user-scalable=no")){return !0;}if(f>31&&document.documentElement.scrollWidth<=window.outerWidth){return !0;}}}return"none"===e.style.msTouchAction?!0:!1;},FastClick.attach=function(d,c){return new FastClick(d,c);},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return FastClick;}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick;(function(f,h,j,b){var d=function(n){var m=n.length;var l=f("head");while(m--){if(l.has("."+n[m]).length===0){l.append('<meta class="'+n[m]+'" />');}}};d(["foundation-mq-small","foundation-mq-medium","foundation-mq-large","foundation-mq-xlarge","foundation-mq-xxlarge","foundation-data-attribute-namespace"]);f(function(){if(typeof FastClick!=="undefined"){if(typeof j.body!=="undefined"){FastClick.attach(j.body);}}});var e=function(m,n){if(typeof m==="string"){if(n){var l;if(n.jquery){l=n[0];if(!l){return n;}}else{l=n;}return f(l.querySelectorAll(m));}return f(j.querySelectorAll(m));}return f(m,n);};var k=function(m){var l=[];if(!m){l.push("data");}if(this.namespace.length>0){l.push(this.namespace);}l.push(this.name);return l.join("-");};var g=function(o){var n=o.split("-"),m=n.length,l=[];while(m--){if(m!==0){l.push(n[m]);}else{if(this.namespace.length>0){l.push(this.namespace,n[m]);}else{l.push(n[m]);}}}return l.reverse().join("-");};var a=function(o,m){var l=this,n=!e(this).data(this.attr_name(true));if(e(this.scope).is("["+this.attr_name()+"]")){e(this.scope).data(this.attr_name(true)+"-init",f.extend({},this.settings,(m||o),this.data_options(e(this.scope))));if(n){this.events(this.scope);}}else{e("["+this.attr_name()+"]",this.scope).each(function(){var p=!e(this).data(l.attr_name(true)+"-init");e(this).data(l.attr_name(true)+"-init",f.extend({},l.settings,(m||o),l.data_options(e(this))));if(p){l.events(this);}});}if(typeof o==="string"){return this[o].call(this,m);}};var c=function(n,o){function l(){o(n[0]);}function m(){this.one("load",l);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var q=this.attr("src"),p=q.match(/\?/)?"&":"?";p+="random="+(new Date()).getTime();this.attr("src",q+p);}}if(!n.attr("src")){l();return;}if(n[0].complete||n[0].readyState===4){l();}else{m.call(n);}};h.matchMedia=h.matchMedia||(function(p){var n,l=p.documentElement,m=l.firstElementChild||l.firstChild,o=p.createElement("body"),q=p.createElement("div");q.id="mq-test-1";q.style.cssText="position:absolute;top:-100em";o.style.background="none";o.appendChild(q);return function(r){q.innerHTML='&shy;<style media="'+r+'"> #mq-test-1 { width: 42px; }</style>';l.insertBefore(o,m);n=q.offsetWidth===42;l.removeChild(o);return{matches:n,media:r};};}(j));(function(n){var l,o=0,t=["webkit","moz"],r=h.requestAnimationFrame,q=h.cancelAnimationFrame,m="undefined"!==typeof jQuery.fx;for(;o<t.length&&!r;o++){r=h[t[o]+"RequestAnimationFrame"];q=q||h[t[o]+"CancelAnimationFrame"]||h[t[o]+"CancelRequestAnimationFrame"];}function p(){if(l){r(p);if(m){jQuery.fx.tick();}}}if(r){h.requestAnimationFrame=r;h.cancelAnimationFrame=q;if(m){jQuery.fx.timer=function(u){if(u()&&jQuery.timers.push(u)&&!l){l=true;p();}};jQuery.fx.stop=function(){l=false;};}}else{h.requestAnimationFrame=function(x){var u=new Date().getTime(),v=Math.max(0,16-(u-o)),w=h.setTimeout(function(){x(u+v);},v);o=u+v;return w;};h.cancelAnimationFrame=function(u){clearTimeout(u);};}}(jQuery));function i(l){if(typeof l==="string"||l instanceof String){l=l.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"");}return l;}h.Foundation={name:"Foundation",version:"5.3.1",media_queries:{small:e(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:e(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:e(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:e(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:e(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:f("<style></style>").appendTo("head")[0].sheet,global:{namespace:b},init:function(p,m,t,o,l){var n=[p,t,o,l],q=[];this.rtl=/rtl/i.test(e("html").attr("dir"));this.scope=p||this.scope;this.set_namespace();if(m&&typeof m==="string"&&!/reflow/i.test(m)){if(this.libs.hasOwnProperty(m)){q.push(this.init_lib(m,n));}}else{for(var r in this.libs){q.push(this.init_lib(r,m));}}return p;},init_lib:function(m,l){if(this.libs.hasOwnProperty(m)){this.patch(this.libs[m]);if(l&&l.hasOwnProperty(m)){if(typeof this.libs[m].settings!=="undefined"){f.extend(true,this.libs[m].settings,l[m]);}else{if(typeof this.libs[m].defaults!=="undefined"){f.extend(true,this.libs[m].defaults,l[m]);}}return this.libs[m].init.apply(this.libs[m],[this.scope,l[m]]);}l=l instanceof Array?l:new Array(l);return this.libs[m].init.apply(this.libs[m],l);}return function(){};},patch:function(l){l.scope=this.scope;l.namespace=this.global.namespace;l.rtl=this.rtl;l.data_options=this.utils.data_options;l.attr_name=k;l.add_namespace=g;l.bindings=a;l.S=this.utils.S;},inherit:function(o,m){var l=m.split(" "),n=l.length;while(n--){if(this.utils.hasOwnProperty(l[n])){o[l[n]]=this.utils[l[n]];}}},set_namespace:function(){var l=(this.global.namespace===b)?f(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=(l===b||/false/i.test(l))?"":l;},libs:{},utils:{S:e,throttle:function(m,l){var n=null;return function(){var p=this,o=arguments;if(n==null){n=setTimeout(function(){m.apply(p,o);n=null;},l);}};},debounce:function(o,n,m){var p,l;return function(){var u=this,t=arguments;var r=function(){p=null;if(!m){l=o.apply(u,t);}};var q=m&&!p;clearTimeout(p);p=setTimeout(r,n);if(q){l=o.apply(u,t);}return l;};},data_options:function(n,q){q=q||"options";var l={},u,m,w,t=function(x){var p=Foundation.global.namespace;if(p.length>0){return x.data(p+"-"+q);}return x.data(q);};var r=t(n);if(typeof r==="object"){return r;}w=(r||":").split(";");u=w.length;function v(p){return !isNaN(p-0)&&p!==null&&p!==""&&p!==false&&p!==true;}function o(p){if(typeof p==="string"){return f.trim(p);}return p;}while(u--){m=w[u].split(":");m=[m[0],m.slice(1).join(":")];if(/true/i.test(m[1])){m[1]=true;}if(/false/i.test(m[1])){m[1]=false;}if(v(m[1])){if(m[1].indexOf(".")===-1){m[1]=parseInt(m[1],10);}else{m[1]=parseFloat(m[1]);}}if(m.length===2&&m[0].length>0){l[o(m[0])]=o(m[1]);}}return l;},register_media:function(m,l){if(Foundation.media_queries[m]===b){f("head").append('<meta class="'+l+'"/>');Foundation.media_queries[m]=i(f("."+l).css("font-family"));}},add_custom_rule:function(n,m){if(m===b&&Foundation.stylesheet){Foundation.stylesheet.insertRule(n,Foundation.stylesheet.cssRules.length);}else{var l=Foundation.media_queries[m];if(l!==b){Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[m]+"{ "+n+" }");}}},image_loaded:function(l,o){var m=this,n=l.length;if(n===0){o(l);}l.each(function(){c(m.S(this),function(){n-=1;if(n===0){o(l);}});});},random_str:function(){if(!this.fidx){this.fidx=0;}this.prefix=this.prefix||[(this.name||"F"),(+new Date).toString(36)].join("-");return this.prefix+(this.fidx++).toString(36);}}};f.fn.foundation=function(){var l=Array.prototype.slice.call(arguments,0);return this.each(function(){Foundation.init.apply(Foundation,[this].concat(l));return this;});};}(jQuery,window,window.document));(function(){function ar(b){function a(g,h,j,d,f,k){for(;f>=0&&k>f;f+=b){var c=d?d[f]:f;j=h(j,g[c],c,g);}return j;}return function(h,j,f,g){j=aE(j,g,4);var k=!av(h)&&at.keys(h),d=(k||h).length,l=b>0?0:d-1;return arguments.length<3&&(f=h[k?k[l]:l],l+=b),a(h,j,f,k,l,d);};}function al(a){return function(d,f,g){f=ah(f,g);for(var b=U(d),c=a>0?0:b-1;c>=0&&b>c;c+=a){if(f(d[c],c,d)){return c;}}return -1;};}function an(c,a,b){return function(h,f,g){var j=0,d=U(h);if("number"==typeof g){c>0?j=g>=0?g:Math.max(g+d,j):d=g>=0?Math.min(g+1,d):g+d+1;}else{if(b&&g&&d){return g=b(h,f),h[g]===f?g:-1;}}if(f!==f){return g=a(au.call(h,j,d),at.isNaN),g>=0?g+j:-1;}for(g=c>0?j:d-1;g>=0&&d>g;g+=c){if(h[g]===f){return g;}}return -1;};}function aB(g,c){var d=Z.length,f=g.constructor,a=at.isFunction(f)&&f.prototype||aF,b="constructor";for(at.has(g,b)&&!at.contains(c,b)&&c.push(b);d--;){b=Z[d],b in g&&g[b]!==a[b]&&!at.contains(c,b)&&c.push(b);}}var ak=this,ax=ak._,aq=Array.prototype,aF=Object.prototype,aD=Function.prototype,aA=aq.push,au=aq.slice,am=aF.toString,ap=aF.hasOwnProperty,ay=Array.isArray,aj=Object.keys,az=aD.bind,ag=Object.create,aC=function(){},at=function(a){return a instanceof at?a:this instanceof at?void (this._wrapped=a):new at(a);};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=at),exports._=at):ak._=at,at.VERSION="1.8.3";var aE=function(c,a,b){if(a===void 0){return c;}switch(null==b?3:b){case 1:return function(d){return c.call(a,d);};case 2:return function(d,f){return c.call(a,d,f);};case 3:return function(f,g,d){return c.call(a,f,g,d);};case 4:return function(g,h,d,f){return c.call(a,g,h,d,f);};}return function(){return c.apply(a,arguments);};},ah=function(c,a,b){return null==c?at.identity:at.isFunction(c)?aE(c,a,b):at.isObject(c)?at.matcher(c):at.property(c);};at.iteratee=function(b,a){return ah(b,a,1/0);};var aG=function(b,a){return function(j){var l=arguments.length;if(2>l||null==j){return j;}for(var g=1;l>g;g++){for(var h=arguments[g],m=b(h),d=m.length,n=0;d>n;n++){var k=m[n];a&&j[k]!==void 0||(j[k]=h[k]);}}return j;};},aw=function(b){if(!at.isObject(b)){return{};}if(ag){return ag(b);}aC.prototype=b;var a=new aC;return aC.prototype=null,a;},ai=function(a){return function(b){return null==b?void 0:b[a];};},ae=Math.pow(2,53)-1,U=ai("length"),av=function(b){var a=U(b);return"number"==typeof a&&a>=0&&ae>=a;};at.each=at.forEach=function(g,c,d){c=aE(c,d);var f,a;if(av(g)){for(f=0,a=g.length;a>f;f++){c(g[f],f,g);}}else{var b=at.keys(g);for(f=0,a=b.length;a>f;f++){c(g[b[f]],b[f],g);}}return g;},at.map=at.collect=function(k,f,g){f=ah(f,g);for(var h=!av(k)&&at.keys(k),c=(h||k).length,d=Array(c),j=0;c>j;j++){var b=h?h[j]:j;d[j]=f(k[b],b,k);}return d;},at.reduce=at.foldl=at.inject=ar(1),at.reduceRight=at.foldr=ar(-1),at.find=at.detect=function(d,a,b){var c;return c=av(d)?at.findIndex(d,a,b):at.findKey(d,a,b),c!==void 0&&c!==-1?d[c]:void 0;},at.filter=at.select=function(d,a,b){var c=[];return a=ah(a,b),at.each(d,function(g,f,e){a(g,f,e)&&c.push(g);}),c;},at.reject=function(c,a,b){return at.filter(c,at.negate(ah(a)),b);},at.every=at.all=function(h,c,d){c=ah(c,d);for(var f=!av(h)&&at.keys(h),a=(f||h).length,b=0;a>b;b++){var g=f?f[b]:b;if(!c(h[g],g,h)){return !1;}}return !0;},at.some=at.any=function(h,c,d){c=ah(c,d);for(var f=!av(h)&&at.keys(h),a=(f||h).length,b=0;a>b;b++){var g=f?f[b]:b;if(c(h[g],g,h)){return !0;}}return !1;},at.contains=at.includes=at.include=function(d,a,b,c){return av(d)||(d=at.values(d)),("number"!=typeof b||c)&&(b=0),at.indexOf(d,a,b)>=0;},at.invoke=function(d,a){var b=au.call(arguments,2),c=at.isFunction(a);return at.map(d,function(f){var e=c?a:f[a];return null==e?e:e.apply(f,b);});},at.pluck=function(b,a){return at.map(b,at.property(a));},at.where=function(b,a){return at.filter(b,at.matcher(a));},at.findWhere=function(b,a){return at.find(b,at.matcher(a));},at.max=function(f,m,b){var h,l,g=-1/0,d=-1/0;if(null==m&&null!=f){f=av(f)?f:at.values(f);for(var k=0,j=f.length;j>k;k++){h=f[k],h>g&&(g=h);}}else{m=ah(m,b),at.each(f,function(i,a,c){l=m(i,a,c),(l>d||l===-1/0&&g===-1/0)&&(g=i,d=l);});}return g;},at.min=function(f,m,b){var h,l,g=1/0,d=1/0;if(null==m&&null!=f){f=av(f)?f:at.values(f);for(var k=0,j=f.length;j>k;k++){h=f[k],g>h&&(g=h);}}else{m=ah(m,b),at.each(f,function(i,a,c){l=m(i,a,c),(d>l||1/0===l&&1/0===g)&&(g=i,d=l);});}return g;},at.shuffle=function(g){for(var c,d=av(g)?g:at.values(g),f=d.length,a=Array(f),b=0;f>b;b++){c=at.random(0,b),c!==b&&(a[b]=a[c]),a[c]=d[b];}return a;},at.sample=function(c,a,b){return null==a||b?(av(c)||(c=at.values(c)),c[at.random(c.length-1)]):at.shuffle(c).slice(0,Math.max(0,a));},at.sortBy=function(c,a,b){return a=ah(a,b),at.pluck(at.map(c,function(g,d,f){return{value:g,index:d,criteria:a(g,d,f)};}).sort(function(h,d){var f=h.criteria,g=d.criteria;if(f!==g){if(f>g||f===void 0){return 1;}if(g>f||g===void 0){return -1;}}return h.index-d.index;}),"value");};var aa=function(a){return function(c,d,f){var b={};return d=ah(d,f),at.each(c,function(h,g){var j=d(h,g,c);a(b,h,j);}),b;};};at.groupBy=aa(function(c,a,b){at.has(c,b)?c[b].push(a):c[b]=[a];}),at.indexBy=aa(function(c,a,b){c[b]=a;}),at.countBy=aa(function(c,a,b){at.has(c,b)?c[b]++:c[b]=1;}),at.toArray=function(a){return a?at.isArray(a)?au.call(a):av(a)?at.map(a,at.identity):at.values(a):[];},at.size=function(a){return null==a?0:av(a)?a.length:at.keys(a).length;},at.partition=function(f,b,c){b=ah(b,c);var d=[],a=[];return at.each(f,function(h,g,e){(b(h,g,e)?d:a).push(h);}),[d,a];},at.first=at.head=at.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:at.initial(c,c.length-a);},at.initial=function(c,a,b){return au.call(c,0,Math.max(0,c.length-(null==a||b?1:a)));},at.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:at.rest(c,Math.max(0,c.length-a));},at.rest=at.tail=at.drop=function(c,a,b){return au.call(c,null==a||b?1:a);},at.compact=function(a){return at.filter(a,at.identity);};var G=function(g,w,b,m){for(var v=[],j=0,d=m||0,q=U(g);q>d;d++){var p=g[d];if(av(p)&&(at.isArray(p)||at.isArguments(p))){w||(p=G(p,w,b));var k=0,h=p.length;for(v.length+=h;h>k;){v[j++]=p[k++];}}else{b||(v[j++]=p);}}return v;};at.flatten=function(b,a){return G(b,a,!1);},at.without=function(a){return at.difference(a,au.call(arguments,1));},at.uniq=at.unique=function(g,q,b,k){at.isBoolean(q)||(k=b,b=q,q=!1),null!=b&&(b=ah(b,k));for(var p=[],h=[],d=0,m=U(g);m>d;d++){var l=g[d],j=b?b(l,d,g):l;q?(d&&h===j||p.push(l),h=j):b?at.contains(h,j)||(h.push(j),p.push(l)):at.contains(p,l)||p.push(l);}return p;},at.union=function(){return at.uniq(G(arguments,!0,!0));},at.intersection=function(h){for(var c=[],d=arguments.length,f=0,a=U(h);a>f;f++){var b=h[f];if(!at.contains(c,b)){for(var g=1;d>g&&at.contains(arguments[g],b);g++){}g===d&&c.push(b);}}return c;},at.difference=function(b){var a=G(arguments,!0,!0,1);return at.filter(b,function(c){return !at.contains(a,c);});},at.zip=function(){return at.unzip(arguments);},at.unzip=function(d){for(var a=d&&at.max(d,U).length||0,b=Array(a),c=0;a>c;c++){b[c]=at.pluck(d,c);}return b;},at.object=function(f,b){for(var c={},d=0,a=U(f);a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1];}return c;},at.findIndex=al(1),at.findLastIndex=al(-1),at.sortedIndex=function(k,f,g,h){g=ah(g,h,1);for(var c=g(f),d=0,j=U(k);j>d;){var b=Math.floor((d+j)/2);g(k[b])<c?d=b+1:j=b;}return d;},at.indexOf=an(1,at.findIndex,at.sortedIndex),at.lastIndexOf=an(-1,at.findLastIndex),at.range=function(g,c,d){null==c&&(c=g||0,g=0),d=d||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=Array(f),b=0;f>b;b++,g+=d){a[b]=g;}return a;};var ab=function(h,c,d,f,a){if(!(f instanceof c)){return h.apply(d,a);}var b=aw(h.prototype),g=h.apply(b,a);return at.isObject(g)?g:b;};at.bind=function(d,a){if(az&&d.bind===az){return az.apply(d,au.call(arguments,1));}if(!at.isFunction(d)){throw new TypeError("Bind must be called on a function");}var b=au.call(arguments,2),c=function(){return ab(d,c,a,this,b.concat(au.call(arguments)));};return c;},at.partial=function(c){var a=au.call(arguments,1),b=function(){for(var g=0,d=a.length,f=Array(d),h=0;d>h;h++){f[h]=a[h]===at?arguments[g++]:a[h];}for(;g<arguments.length;){f.push(arguments[g++]);}return ab(c,b,this,this,f);};return b;},at.bindAll=function(d){var a,b,c=arguments.length;if(1>=c){throw new Error("bindAll must be passed function names");}for(a=1;c>a;a++){b=arguments[a],d[b]=at.bind(d[b],d);}return d;},at.memoize=function(c,a){var b=function(g){var d=b.cache,f=""+(a?a.apply(this,arguments):g);return at.has(d,f)||(d[f]=c.apply(this,arguments)),d[f];};return b.cache={},b;},at.delay=function(c,a){var b=au.call(arguments,2);return setTimeout(function(){return c.apply(null,b);},a);},at.defer=at.partial(at.delay,at,1),at.throttle=function(f,m,b){var h,l,g,d=null,k=0;b||(b={});var j=function(){k=b.leading===!1?0:at.now(),d=null,g=f.apply(h,l),d||(h=l=null);};return function(){var c=at.now();k||b.leading!==!1||(k=c);var a=m-(c-k);return h=this,l=arguments,0>=a||a>m?(d&&(clearTimeout(d),d=null),k=c,g=f.apply(h,l),d||(h=l=null)):d||b.trailing===!1||(d=setTimeout(j,a)),g;};},at.debounce=function(f,m,b){var h,l,g,d,k,j=function(){var a=at.now()-d;m>a&&a>=0?h=setTimeout(j,m-a):(h=null,b||(k=f.apply(g,l),h||(g=l=null)));};return function(){g=this,l=arguments,d=at.now();var a=b&&!h;return h||(h=setTimeout(j,m)),a&&(k=f.apply(g,l),g=l=null),k;};},at.wrap=function(b,a){return at.partial(a,b);},at.negate=function(a){return function(){return !a.apply(this,arguments);};},at.compose=function(){var b=arguments,a=b.length-1;return function(){for(var c=a,d=b[a].apply(this,arguments);c--;){d=b[c].call(this,d);}return d;};},at.after=function(b,a){return function(){return --b<1?a.apply(this,arguments):void 0;};},at.before=function(c,a){var b;return function(){return --c>0&&(b=a.apply(this,arguments)),1>=c&&(a=null),b;};},at.once=at.partial(at.before,2);var W=!{toString:null}.propertyIsEnumerable("toString"),Z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];at.keys=function(c){if(!at.isObject(c)){return[];}if(aj){return aj(c);}var a=[];for(var b in c){at.has(c,b)&&a.push(b);}return W&&aB(c,a),a;},at.allKeys=function(c){if(!at.isObject(c)){return[];}var a=[];for(var b in c){a.push(b);}return W&&aB(c,a),a;},at.values=function(f){for(var b=at.keys(f),c=b.length,d=Array(c),a=0;c>a;a++){d[a]=f[b[a]];}return d;},at.mapObject=function(k,f,g){f=ah(f,g);for(var h,c=at.keys(k),d=c.length,j={},b=0;d>b;b++){h=c[b],j[h]=f(k[h],h,k);}return j;},at.pairs=function(f){for(var b=at.keys(f),c=b.length,d=Array(c),a=0;c>a;a++){d[a]=[b[a],f[b[a]]];}return d;},at.invert=function(f){for(var b={},c=at.keys(f),d=0,a=c.length;a>d;d++){b[f[c[d]]]=c[d];}return b;},at.functions=at.methods=function(c){var a=[];for(var b in c){at.isFunction(c[b])&&a.push(b);}return a.sort();},at.extend=aG(at.allKeys),at.extendOwn=at.assign=aG(at.keys),at.findKey=function(h,c,d){c=ah(c,d);for(var f,a=at.keys(h),b=0,g=a.length;g>b;b++){if(f=a[b],c(h[f],f,h)){return f;}}},at.pick=function(g,w,b){var m,v,j={},d=g;if(null==d){return j;}at.isFunction(w)?(v=at.allKeys(d),m=aE(w,b)):(v=G(arguments,!1,!1,1),m=function(e,a,c){return a in c;},d=Object(d));for(var q=0,p=v.length;p>q;q++){var k=v[q],h=d[k];m(h,k,d)&&(j[k]=h);}return j;},at.omit=function(d,a,b){if(at.isFunction(a)){a=at.negate(a);}else{var c=at.map(G(arguments,!1,!1,1),String);a=function(f,e){return !at.contains(c,e);};}return at.pick(d,a,b);},at.defaults=aG(at.allKeys,!0),at.create=function(c,a){var b=aw(c);return a&&at.extendOwn(b,a),b;},at.clone=function(a){return at.isObject(a)?at.isArray(a)?a.slice():at.extend({},a):a;},at.tap=function(b,a){return a(b),b;},at.isMatch=function(h,c){var d=at.keys(c),f=d.length;if(null==h){return !f;}for(var a=Object(h),b=0;f>b;b++){var g=d[b];if(c[g]!==a[g]||!(g in a)){return !1;}}return !0;};var V=function(g,w,b,m){if(g===w){return 0!==g||1/g===1/w;}if(null==g||null==w){return g===w;}g instanceof at&&(g=g._wrapped),w instanceof at&&(w=w._wrapped);var v=am.call(g);if(v!==am.call(w)){return !1;}switch(v){case"[object RegExp]":case"[object String]":return""+g==""+w;case"[object Number]":return +g!==+g?+w!==+w:0===+g?1/+g===1/w:+g===+w;case"[object Date]":case"[object Boolean]":return +g===+w;}var j="[object Array]"===v;if(!j){if("object"!=typeof g||"object"!=typeof w){return !1;}var d=g.constructor,q=w.constructor;if(d!==q&&!(at.isFunction(d)&&d instanceof d&&at.isFunction(q)&&q instanceof q)&&"constructor" in g&&"constructor" in w){return !1;}}b=b||[],m=m||[];for(var p=b.length;p--;){if(b[p]===g){return m[p]===w;}}if(b.push(g),m.push(w),j){if(p=g.length,p!==w.length){return !1;}for(;p--;){if(!V(g[p],w[p],b,m)){return !1;}}}else{var k,h=at.keys(g);if(p=h.length,at.keys(w).length!==p){return !1;}for(;p--;){if(k=h[p],!at.has(w,k)||!V(g[k],w[k],b,m)){return !1;}}}return b.pop(),m.pop(),!0;};at.isEqual=function(b,a){return V(b,a);},at.isEmpty=function(a){return null==a?!0:av(a)&&(at.isArray(a)||at.isString(a)||at.isArguments(a))?0===a.length:0===at.keys(a).length;},at.isElement=function(a){return !(!a||1!==a.nodeType);},at.isArray=ay||function(a){return"[object Array]"===am.call(a);},at.isObject=function(b){var a=typeof b;return"function"===a||"object"===a&&!!b;},at.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){at["is"+a]=function(b){return am.call(b)==="[object "+a+"]";};}),at.isArguments(arguments)||(at.isArguments=function(a){return at.has(a,"callee");}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(at.isFunction=function(a){return"function"==typeof a||!1;}),at.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a));},at.isNaN=function(a){return at.isNumber(a)&&a!==+a;},at.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===am.call(a);},at.isNull=function(a){return null===a;},at.isUndefined=function(a){return a===void 0;},at.has=function(b,a){return null!=b&&ap.call(b,a);},at.noConflict=function(){return ak._=ax,this;},at.identity=function(a){return a;},at.constant=function(a){return function(){return a;};},at.noop=function(){},at.property=ai,at.propertyOf=function(a){return null==a?function(){}:function(b){return a[b];};},at.matcher=at.matches=function(a){return a=at.extendOwn({},a),function(b){return at.isMatch(b,a);};},at.times=function(f,b,c){var d=Array(Math.max(0,f));b=aE(b,c,1);for(var a=0;f>a;a++){d[a]=b(a);}return d;},at.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1));},at.now=Date.now||function(){return(new Date).getTime();};var ad={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=at.invert(ad),H=function(f){var b=function(e){return f[e];},c="(?:"+at.keys(f).join("|")+")",d=RegExp(c),a=RegExp(c,"g");return function(e){return e=null==e?"":""+e,d.test(e)?e.replace(a,b):e;};};at.escape=H(ad),at.unescape=H(C),at.result=function(d,a,b){var c=null==d?void 0:d[a];return c===void 0&&(c=b),at.isFunction(c)?c.call(d):c;};var ao=0;at.uniqueId=function(b){var a=++ao+"";return b?b+a:a;},at.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,af={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ac=/\\|'|\r|\n|\u2028|\u2029/g,X=function(a){return"\\"+af[a];};at.template=function(g,q,b){!q&&b&&(q=b),q=at.defaults({},q,at.templateSettings);var k=RegExp([(q.escape||Y).source,(q.interpolate||Y).source,(q.evaluate||Y).source].join("|")+"|$","g"),p=0,h="__p+='";g.replace(k,function(f,i,n,u,c){return h+=g.slice(p,c).replace(ac,X),p=c+f.length,i?h+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?h+="'+\n((__t=("+n+"))==null?'':__t)+\n'":u&&(h+="';\n"+u+"\n__p+='"),f;}),h+="';\n",q.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{var d=new Function(q.variable||"obj","_",h);}catch(m){throw m.source=h,m;}var l=function(a){return d.call(this,a,at);},j=q.variable||"obj";return l.source="function("+j+"){\n"+h+"}",l;},at.chain=function(b){var a=at(b);return a._chain=!0,a;};var J=function(b,a){return b._chain?at(a).chain():a;};at.mixin=function(a){at.each(at.functions(a),function(b){var c=at[b]=a[b];at.prototype[b]=function(){var d=[this._wrapped];return aA.apply(d,arguments),J(this,c.apply(at,d));};});},at.mixin(at),at.each(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=aq[b];at.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!==b&&"splice"!==b||0!==c.length||delete c[0],J(this,c);};}),at.each(["concat","join","slice"],function(b){var a=aq[b];at.prototype[b]=function(){return J(this,a.apply(this._wrapped,arguments));};}),at.prototype.value=function(){return this._wrapped;},at.prototype.valueOf=at.prototype.toJSON=at.prototype.value,at.prototype.toString=function(){return""+this._wrapped;},"function"==typeof define&&define.amd&&define("underscore",[],function(){return at;});}).call(this);(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b();}else{if(typeof define==="function"&&define.amd){define([],b);}else{var a;if(typeof window!=="undefined"){a=window;}else{if(typeof global!=="undefined"){a=global;}else{if(typeof self!=="undefined"){a=self;}else{a=this;}}}a.s=b();}}})(function(){var d,b,a;return function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0);}if(e){return e(q,!0);}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p;}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l);},i,i.exports,c,f,k,h);}return k[q].exports;}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j]);}return g;}({1:[function(h,j,g){var e=h("./trim");var i=h("./decapitalize");j.exports=function f(l,k){l=e(l).replace(/[-_\s]+(.)?/g,function(m,n){return n?n.toUpperCase():"";});if(k===true){return i(l);}else{return l;}};},{"./decapitalize":10,"./trim":65}],2:[function(f,h,e){var i=f("./helper/makeString");h.exports=function g(l,k){l=i(l);var j=!k?l.slice(1):l.slice(1).toLowerCase();return l.charAt(0).toUpperCase()+j;};},{"./helper/makeString":20}],3:[function(f,g,e){var i=f("./helper/makeString");g.exports=function h(j){return i(j).split("");};},{"./helper/makeString":20}],4:[function(g,h,f){h.exports=function e(j,i){if(j==null){return[];}j=String(j);i=~~i;return i>0?j.match(new RegExp(".{1,"+i+"}","g")):[j];};},{}],5:[function(g,j,f){var i=g("./capitalize");var e=g("./camelize");var k=g("./helper/makeString");j.exports=function h(l){l=k(l);return i(e(l.replace(/[\W_]/g," ")).replace(/\s/g,""));};},{"./camelize":1,"./capitalize":2,"./helper/makeString":20}],6:[function(g,i,f){var e=g("./trim");i.exports=function h(j){return e(j).replace(/\s\s+/g," ");};},{"./trim":65}],7:[function(f,g,e){var h=f("./helper/makeString");var k="ąàáäâãåæăćčĉęèéëêĝĥìíïîĵłľńňòóöőôõðøśșşšŝťțţŭùúüűûñÿýçżźž",j="aaaaaaaaaccceeeeeghiiiijllnnoooooooossssstttuuuuuunyyczzz";k+=k.toUpperCase();j+=j.toUpperCase();j=j.split("");k+="ß";j.push("ss");g.exports=function i(l){return h(l).replace(/.{1}/g,function(n){var m=k.indexOf(n);return m===-1?n:j[m];});};},{"./helper/makeString":20}],8:[function(f,g,e){var h=f("./helper/makeString");g.exports=function(j,i){j=h(j);i=h(i);if(j.length===0||i.length===0){return 0;}return j.split(i).length-1;};},{"./helper/makeString":20}],9:[function(g,h,f){var e=g("./trim");h.exports=function i(j){return e(j).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase();};},{"./trim":65}],10:[function(g,h,e){var i=g("./helper/makeString");h.exports=function f(j){j=i(j);return j.charAt(0).toLowerCase()+j.slice(1);};},{"./helper/makeString":20}],11:[function(f,g,e){var i=f("./helper/makeString");function j(n){var m=n.match(/^[\s\\t]*/gm);var k=m[0].length;for(var l=1;l<m.length;l++){k=Math.min(m[l].length,k);}return k;}g.exports=function h(n,m){n=i(n);var k=j(n);var l;if(k===0){return n;}if(typeof m==="string"){l=new RegExp("^"+m,"gm");}else{l=new RegExp("^[ \\t]{"+k+"}","gm");}return n.replace(l,"");};},{"./helper/makeString":20}],12:[function(g,h,f){var i=g("./helper/makeString");var j=g("./helper/toPositive");h.exports=function e(m,l,k){m=i(m);l=""+l;if(typeof k=="undefined"){k=m.length-l.length;}else{k=Math.min(j(k),m.length)-l.length;}return k>=0&&m.indexOf(l,k)===k;};},{"./helper/makeString":20,"./helper/toPositive":22}],13:[function(g,f,h){var e=g("./helper/makeString");var i=g("./helper/escapeChars");var l="[";for(var k in i){l+=k;}l+="]";var j=new RegExp(l,"g");f.exports=function m(n){return e(n).replace(j,function(o){return"&"+i[o]+";";});};},{"./helper/escapeChars":17,"./helper/makeString":20}],14:[function(f,g,e){g.exports=function(){var h={};for(var i in this){if(!this.hasOwnProperty(i)||i.match(/^(?:include|contains|reverse|join|map|wrap)$/)){continue;}h[i]=this[i];}return h;};},{}],15:[function(f,g,e){var i=f("./makeString");g.exports=function h(k,j){k=i(k);if(k.length===0){return"";}return k.slice(0,-1)+String.fromCharCode(k.charCodeAt(k.length-1)+j);};},{"./makeString":20}],16:[function(h,i,g){var e=h("./escapeRegExp");i.exports=function f(j){if(j==null){return"\\s";}else{if(j.source){return j.source;}else{return"["+e(j)+"]";}}};},{"./escapeRegExp":18}],17:[function(f,g,e){var h={"¢":"cent","£":"pound","¥":"yen","€":"euro","©":"copy","®":"reg","<":"lt",">":"gt",'"':"quot","&":"amp","'":"#39"};g.exports=h;},{}],18:[function(g,h,f){var i=g("./makeString");h.exports=function e(j){return i(j).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1");};},{"./makeString":20}],19:[function(g,h,e){var f={nbsp:" ",cent:"¢",pound:"£",yen:"¥",euro:"€",copy:"©",reg:"®",lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};h.exports=f;},{}],20:[function(f,g,e){g.exports=function h(i){if(i==null){return"";}return""+i;};},{}],21:[function(f,g,e){g.exports=function h(j,k){if(k<1){return"";}var i="";while(k>0){if(k&1){i+=j;}k>>=1,j+=j;}return i;};},{}],22:[function(f,g,e){g.exports=function h(i){return i<0?0:+i||0;};},{}],23:[function(g,j,f){var i=g("./capitalize");var h=g("./underscored");var e=g("./trim");j.exports=function k(l){return i(e(h(l).replace(/_id$/,"").replace(/_/g," ")));};},{"./capitalize":2,"./trim":65,"./underscored":67}],24:[function(g,h,f){var i=g("./helper/makeString");h.exports=function e(k,j){if(j===""){return true;}return i(k).indexOf(j)!==-1;};},{"./helper/makeString":20}],25:[function(g,f,h){function o(p){if(!(this instanceof o)){return new o(p);}this._wrapped=p;}o.VERSION="3.3.4";o.isBlank=g("./isBlank");o.stripTags=g("./stripTags");o.capitalize=g("./capitalize");o.decapitalize=g("./decapitalize");o.chop=g("./chop");o.trim=g("./trim");o.clean=g("./clean");o.cleanDiacritics=g("./cleanDiacritics");o.count=g("./count");o.chars=g("./chars");o.swapCase=g("./swapCase");o.escapeHTML=g("./escapeHTML");o.unescapeHTML=g("./unescapeHTML");o.splice=g("./splice");o.insert=g("./insert");o.replaceAll=g("./replaceAll");o.include=g("./include");o.join=g("./join");o.lines=g("./lines");o.dedent=g("./dedent");o.reverse=g("./reverse");o.startsWith=g("./startsWith");o.endsWith=g("./endsWith");o.pred=g("./pred");o.succ=g("./succ");o.titleize=g("./titleize");o.camelize=g("./camelize");o.underscored=g("./underscored");o.dasherize=g("./dasherize");o.classify=g("./classify");o.humanize=g("./humanize");o.ltrim=g("./ltrim");o.rtrim=g("./rtrim");o.truncate=g("./truncate");o.prune=g("./prune");o.words=g("./words");o.pad=g("./pad");o.lpad=g("./lpad");o.rpad=g("./rpad");o.lrpad=g("./lrpad");o.sprintf=g("./sprintf");o.vsprintf=g("./vsprintf");o.toNumber=g("./toNumber");o.numberFormat=g("./numberFormat");o.strRight=g("./strRight");o.strRightBack=g("./strRightBack");o.strLeft=g("./strLeft");o.strLeftBack=g("./strLeftBack");o.toSentence=g("./toSentence");o.toSentenceSerial=g("./toSentenceSerial");o.slugify=g("./slugify");o.surround=g("./surround");o.quote=g("./quote");o.unquote=g("./unquote");o.repeat=g("./repeat");o.naturalCmp=g("./naturalCmp");o.levenshtein=g("./levenshtein");o.toBoolean=g("./toBoolean");o.exports=g("./exports");o.escapeRegExp=g("./helper/escapeRegExp");o.wrap=g("./wrap");o.map=g("./map");o.strip=o.trim;o.lstrip=o.ltrim;o.rstrip=o.rtrim;o.center=o.lrpad;o.rjust=o.lpad;o.ljust=o.rpad;o.contains=o.include;o.q=o.quote;o.toBool=o.toBoolean;o.camelcase=o.camelize;o.mapChars=o.map;o.prototype={value:function m(){return this._wrapped;}};function j(p,q){if(typeof q!=="function"){return;}o.prototype[p]=function(){var r=[this._wrapped].concat(Array.prototype.slice.call(arguments));var t=q.apply(null,r);return typeof t==="string"?new o(t):t;};}for(var n in o){j(n,o[n]);}j("tap",function k(p,q){return q(p);});function l(p){j(p,function(r){var q=Array.prototype.slice.call(arguments,1);return String.prototype[p].apply(r,q);});}var i=["toUpperCase","toLowerCase","split","replace","slice","substring","substr","concat"];for(var e in i){l(i[e]);}f.exports=o;},{"./camelize":1,"./capitalize":2,"./chars":3,"./chop":4,"./classify":5,"./clean":6,"./cleanDiacritics":7,"./count":8,"./dasherize":9,"./decapitalize":10,"./dedent":11,"./endsWith":12,"./escapeHTML":13,"./exports":14,"./helper/escapeRegExp":18,"./humanize":23,"./include":24,"./insert":26,"./isBlank":27,"./join":28,"./levenshtein":29,"./lines":30,"./lpad":31,"./lrpad":32,"./ltrim":33,"./map":34,"./naturalCmp":35,"./numberFormat":38,"./pad":39,"./pred":40,"./prune":41,"./quote":42,"./repeat":43,"./replaceAll":44,"./reverse":45,"./rpad":46,"./rtrim":47,"./slugify":48,"./splice":49,"./sprintf":50,"./startsWith":51,"./strLeft":52,"./strLeftBack":53,"./strRight":54,"./strRightBack":55,"./stripTags":56,"./succ":57,"./surround":58,"./swapCase":59,"./titleize":60,"./toBoolean":61,"./toNumber":62,"./toSentence":63,"./toSentenceSerial":64,"./trim":65,"./truncate":66,"./underscored":67,"./unescapeHTML":68,"./unquote":69,"./vsprintf":70,"./words":71,"./wrap":72}],26:[function(f,g,e){var i=f("./splice");g.exports=function h(l,j,k){return i(l,j,0,k);};},{"./splice":49}],27:[function(g,h,f){var i=g("./helper/makeString");h.exports=function e(j){return/^\s*$/.test(i(j));};},{"./helper/makeString":20}],28:[function(f,g,e){var h=f("./helper/makeString");var j=[].slice;g.exports=function i(){var k=j.call(arguments),l=k.shift();return k.join(h(l));};},{"./helper/makeString":20}],29:[function(f,g,e){var h=f("./helper/makeString");g.exports=function i(o,n){o=h(o);n=h(n);if(o===n){return 0;}if(!o||!n){return Math.max(o.length,n.length);}var r=new Array(n.length+1);for(var m=0;m<r.length;++m){r[m]=m;}for(m=0;m<o.length;++m){var q=m+1;for(var k=0;k<n.length;++k){var p=q;q=r[k]+(o.charAt(m)===n.charAt(k)?0:1);var l=p+1;if(q>l){q=l;}l=r[k+1]+1;if(q>l){q=l;}r[k]=p;}r[k]=q;}return q;};},{"./helper/makeString":20}],30:[function(g,h,f){h.exports=function e(i){if(i==null){return[];}return String(i).split(/\r\n?|\n/);};},{}],31:[function(g,h,e){var i=g("./pad");h.exports=function f(l,k,j){return i(l,k,j);};},{"./pad":39}],32:[function(f,g,e){var i=f("./pad");g.exports=function h(l,k,j){return i(l,k,j,"both");};},{"./pad":39}],33:[function(h,i,g){var j=h("./helper/makeString");var f=h("./helper/defaultToWhiteSpace");var e=String.prototype.trimLeft;i.exports=function k(m,l){m=j(m);if(!l&&e){return e.call(m);}l=f(l);return m.replace(new RegExp("^"+l+"+"),"");};},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],34:[function(f,g,e){var h=f("./helper/makeString");g.exports=function(i,j){i=h(i);if(i.length===0||typeof j!=="function"){return i;}return i.replace(/./g,j);};},{"./helper/makeString":20}],35:[function(f,g,e){g.exports=function h(n,m){if(n==m){return 0;}if(!n){return -1;}if(!m){return 1;}var l=/(\.\d+|\d+|\D+)/g,k=String(n).match(l),j=String(m).match(l),p=Math.min(k.length,j.length);for(var o=0;o<p;o++){var u=k[o],t=j[o];if(u!==t){var r=+u;var q=+t;if(r===r&&q===q){return r>q?1:-1;}return u<t?-1:1;}}if(k.length!=j.length){return k.length-j.length;}return n<m?-1:1;};},{}],36:[function(f,g,e){(function(k){var i={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function m(){var o=arguments[0],n=m.cache;if(!(n[o]&&n.hasOwnProperty(o))){n[o]=m.parse(o);}return m.format.call(null,n[o],arguments);}m.format=function(x,w){var B=1,z=x.length,t="",C,o=[],u,q,v,p,y,A,r=true,n="";for(u=0;u<z;u++){t=h(x[u]);if(t==="string"){o[o.length]=x[u];}else{if(t==="array"){v=x[u];if(v[2]){C=w[B];for(q=0;q<v[2].length;q++){if(!C.hasOwnProperty(v[2][q])){throw new Error(m("[sprintf] property '%s' does not exist",v[2][q]));}C=C[v[2][q]];}}else{if(v[1]){C=w[v[1]];}else{C=w[B++];}}if(h(C)=="function"){C=C();}if(i.not_string.test(v[8])&&i.not_json.test(v[8])&&(h(C)!="number"&&isNaN(C))){throw new TypeError(m("[sprintf] expecting number but found %s",h(C)));}if(i.number.test(v[8])){r=C>=0;}switch(v[8]){case"b":C=C.toString(2);break;case"c":C=String.fromCharCode(C);break;case"d":case"i":C=parseInt(C,10);break;case"j":C=JSON.stringify(C,null,v[6]?parseInt(v[6]):0);break;case"e":C=v[7]?C.toExponential(v[7]):C.toExponential();break;case"f":C=v[7]?parseFloat(C).toFixed(v[7]):parseFloat(C);break;case"g":C=v[7]?parseFloat(C).toPrecision(v[7]):parseFloat(C);break;case"o":C=C.toString(8);break;case"s":C=(C=String(C))&&v[7]?C.substring(0,v[7]):C;break;case"u":C=C>>>0;break;case"x":C=C.toString(16);break;case"X":C=C.toString(16).toUpperCase();break;}if(i.json.test(v[8])){o[o.length]=C;}else{if(i.number.test(v[8])&&(!r||v[3])){n=r?"+":"-";C=C.toString().replace(i.sign,"");}else{n="";}y=v[4]?v[4]==="0"?"0":v[4].charAt(1):" ";A=v[6]-(n+C).length;p=v[6]?A>0?j(y,A):"":"";o[o.length]=v[5]?n+C+p:y==="0"?n+p+C:p+n+C;}}}}return o.join("");};m.cache={};m.parse=function(n){var q=n,r=[],u=[],t=0;while(q){if((r=i.text.exec(q))!==null){u[u.length]=r[0];}else{if((r=i.modulo.exec(q))!==null){u[u.length]="%";}else{if((r=i.placeholder.exec(q))!==null){if(r[2]){t|=1;var v=[],p=r[2],o=[];if((o=i.key.exec(p))!==null){v[v.length]=o[1];while((p=p.substring(o[0].length))!==""){if((o=i.key_access.exec(p))!==null){v[v.length]=o[1];}else{if((o=i.index_access.exec(p))!==null){v[v.length]=o[1];}else{throw new SyntaxError("[sprintf] failed to parse named argument key");}}}}else{throw new SyntaxError("[sprintf] failed to parse named argument key");}r[2]=v;}else{t|=2;}if(t===3){throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");}u[u.length]=r;}else{throw new SyntaxError("[sprintf] unexpected placeholder");}}}q=q.substring(r[0].length);}return u;};var l=function(o,n,p){p=(n||[]).slice(0);p.splice(0,0,o);return m.apply(null,p);};function h(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase();}function j(n,o){return Array(o+1).join(n);}if(typeof e!=="undefined"){e.sprintf=m;e.vsprintf=l;}else{k.sprintf=m;k.vsprintf=l;if(typeof d==="function"&&d.amd){d(function(){return{sprintf:m,vsprintf:l};});}}})(typeof window==="undefined"?this:window);},{}],37:[function(f,g,e){(function(j){g.exports=i;function i(m,n){if(h("noDeprecation")){return m;}var l=false;function k(){if(!l){if(h("throwDeprecation")){throw new Error(n);}else{if(h("traceDeprecation")){console.trace(n);}else{console.warn(n);}}l=true;}return m.apply(this,arguments);}return k;}function h(l){try{if(!j.localStorage){return false;}}catch(k){return false;}var m=j.localStorage[l];if(null==m){return false;}return String(m).toLowerCase()==="true";}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{});},{}],38:[function(g,h,f){h.exports=function e(l,o,i,m){if(isNaN(l)||l==null){return"";}l=l.toFixed(~~o);m=typeof m=="string"?m:",";var n=l.split("."),k=n[0],j=n[1]?(i||".")+n[1]:"";return k.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+m)+j;};},{}],39:[function(f,g,e){var h=f("./helper/makeString");var i=f("./helper/strRepeat");g.exports=function j(o,m,k,l){o=h(o);m=~~m;var n=0;if(!k){k=" ";}else{if(k.length>1){k=k.charAt(0);}}switch(l){case"right":n=m-o.length;return o+i(k,n);case"both":n=m-o.length;return i(k,Math.ceil(n/2))+o+i(k,Math.floor(n/2));default:n=m-o.length;return i(k,n)+o;}};},{"./helper/makeString":20,"./helper/strRepeat":21}],40:[function(g,h,f){var i=g("./helper/adjacent");h.exports=function e(j){return i(j,-1);};},{"./helper/adjacent":15}],41:[function(h,i,g){var j=h("./helper/makeString");var f=h("./rtrim");i.exports=function e(n,m,o){n=j(n);m=~~m;o=o!=null?String(o):"...";if(n.length<=m){return n;}var k=function(p){return p.toUpperCase()!==p.toLowerCase()?"A":" ";},l=n.slice(0,m+1).replace(/.(?=\W*\w*$)/g,k);if(l.slice(l.length-2).match(/\w\w/)){l=l.replace(/\s*\S+$/,"");}else{l=f(l.slice(0,l.length-1));}return(l+o).length>n.length?n:n.slice(0,l.length)+o;};},{"./helper/makeString":20,"./rtrim":47}],42:[function(h,i,g){var f=h("./surround");i.exports=function e(k,j){return f(k,j||'"');};},{"./surround":58}],43:[function(f,g,e){var h=f("./helper/makeString");var j=f("./helper/strRepeat");g.exports=function i(m,n,l){m=h(m);n=~~n;if(l==null){return j(m,n);}for(var k=[];n>0;k[--n]=m){}return k.join(l);};},{"./helper/makeString":20,"./helper/strRepeat":21}],44:[function(g,h,f){var i=g("./helper/makeString");h.exports=function e(o,n,k,m){var j=m===true?"gi":"g";var l=new RegExp(n,j);return i(o).replace(l,k);};},{"./helper/makeString":20}],45:[function(g,h,e){var i=g("./chars");h.exports=function f(j){return i(j).reverse().join("");};},{"./chars":3}],46:[function(f,g,e){var i=f("./pad");g.exports=function h(l,k,j){return i(l,k,j,"right");};},{"./pad":39}],47:[function(h,j,g){var k=h("./helper/makeString");var f=h("./helper/defaultToWhiteSpace");var i=String.prototype.trimRight;j.exports=function e(m,l){m=k(m);if(!l&&i){return i.call(m);}l=f(l);return m.replace(new RegExp(l+"+$"),"");};},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],48:[function(h,i,g){var f=h("./trim");var j=h("./dasherize");var k=h("./cleanDiacritics");i.exports=function e(l){return f(j(k(l).replace(/[^\w\s-]/g,"-").toLowerCase()),"-");};},{"./cleanDiacritics":7,"./dasherize":9,"./trim":65}],49:[function(f,g,e){var h=f("./chars");g.exports=function i(n,k,m,l){var j=h(n);j.splice(~~k,~~m,l);return j.join("");};},{"./chars":3}],50:[function(f,g,e){var h=f("util-deprecate");g.exports=h(f("sprintf-js").sprintf,"sprintf() will be removed in the next major release, use the sprintf-js package instead.");},{"sprintf-js":36,"util-deprecate":37}],51:[function(f,h,e){var i=f("./helper/makeString");var j=f("./helper/toPositive");h.exports=function g(m,l,k){m=i(m);l=""+l;k=k==null?0:Math.min(j(k),m.length);return m.lastIndexOf(l,k)===k;};},{"./helper/makeString":20,"./helper/toPositive":22}],52:[function(f,g,e){var h=f("./helper/makeString");g.exports=function i(k,j){k=h(k);j=h(j);var l=!j?-1:k.indexOf(j);return ~l?k.slice(0,l):k;};},{"./helper/makeString":20}],53:[function(f,g,e){var h=f("./helper/makeString");g.exports=function i(k,j){k=h(k);j=h(j);var l=k.lastIndexOf(j);return ~l?k.slice(0,l):k;};},{"./helper/makeString":20}],54:[function(f,g,e){var i=f("./helper/makeString");g.exports=function h(k,j){k=i(k);j=i(j);var l=!j?-1:k.indexOf(j);return ~l?k.slice(l+j.length,k.length):k;};},{"./helper/makeString":20}],55:[function(g,h,e){var i=g("./helper/makeString");h.exports=function f(k,j){k=i(k);j=i(j);var l=!j?-1:k.lastIndexOf(j);return ~l?k.slice(l+j.length,k.length):k;};},{"./helper/makeString":20}],56:[function(f,g,e){var h=f("./helper/makeString");g.exports=function i(j){return h(j).replace(/<\/?[^>]+>/g,"");};},{"./helper/makeString":20}],57:[function(g,h,f){var i=g("./helper/adjacent");h.exports=function e(j){return i(j,1);};},{"./helper/adjacent":15}],58:[function(g,h,f){h.exports=function e(i,j){return[j,i,j].join("");};},{}],59:[function(g,h,f){var i=g("./helper/makeString");h.exports=function e(j){return i(j).replace(/\S/g,function(k){return k===k.toUpperCase()?k.toLowerCase():k.toUpperCase();});};},{"./helper/makeString":20}],60:[function(f,g,e){var h=f("./helper/makeString");g.exports=function i(j){return h(j).toLowerCase().replace(/(?:^|\s|-)\S/g,function(k){return k.toUpperCase();});};},{"./helper/makeString":20}],61:[function(h,i,g){var f=h("./trim");function j(m,k){var l,n,o=m.toLowerCase();k=[].concat(k);for(l=0;l<k.length;l+=1){n=k[l];if(!n){continue;}if(n.test&&n.test(m)){return true;}if(n.toLowerCase()===o){return true;}}}i.exports=function e(m,l,k){if(typeof m==="number"){m=""+m;}if(typeof m!=="string"){return !!m;}m=f(m);if(j(m,l||["true","1"])){return true;}if(j(m,k||["false","0"])){return false;}};},{"./trim":65}],62:[function(g,h,f){h.exports=function e(j,i){if(j==null){return 0;}var k=Math.pow(10,isFinite(i)?i:0);return Math.round(j*k)/k;};},{}],63:[function(g,h,f){var e=g("./rtrim");h.exports=function i(o,n,l,k){n=n||", ";l=l||" and ";var j=o.slice(),m=j.pop();if(o.length>2&&k){l=e(n)+l;}return j.length?j.join(n)+l+m:m;};},{"./rtrim":47}],64:[function(f,g,e){var h=f("./toSentence");g.exports=function i(l,k,j){return h(l,k,j,true);};},{"./toSentence":63}],65:[function(h,i,g){var k=h("./helper/makeString");var f=h("./helper/defaultToWhiteSpace");var j=String.prototype.trim;i.exports=function e(m,l){m=k(m);if(!l&&j){return j.call(m);}l=f(l);return m.replace(new RegExp("^"+l+"+|"+l+"+$","g"),"");};},{"./helper/defaultToWhiteSpace":16,"./helper/makeString":20}],66:[function(f,h,e){var i=f("./helper/makeString");h.exports=function g(l,k,j){l=i(l);j=j||"...";k=~~k;return l.length>k?l.slice(0,k)+j:l;};},{"./helper/makeString":20}],67:[function(g,i,f){var e=g("./trim");i.exports=function h(j){return e(j).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();};},{"./trim":65}],68:[function(g,h,e){var i=g("./helper/makeString");var f=g("./helper/htmlEntities");h.exports=function j(k){return i(k).replace(/\&([^;]+);/g,function(l,n){var m;if(n in f){return f[n];}else{if(m=n.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(m[1],16));}else{if(m=n.match(/^#(\d+)$/)){return String.fromCharCode(~~m[1]);}else{return l;}}}});};},{"./helper/htmlEntities":19,"./helper/makeString":20}],69:[function(f,h,e){h.exports=function g(j,i){i=i||'"';if(j[0]===i&&j[j.length-1]===i){return j.slice(1,j.length-1);}else{return j;}};},{}],70:[function(f,g,e){var h=f("util-deprecate");g.exports=h(f("sprintf-js").vsprintf,"vsprintf() will be removed in the next major release, use the sprintf-js package instead.");},{"sprintf-js":36,"util-deprecate":37}],71:[function(h,i,g){var f=h("./isBlank");var e=h("./trim");i.exports=function j(l,k){if(f(l)){return[];}return e(l,k).split(k||/\s+/);};},{"./isBlank":27,"./trim":65}],72:[function(f,g,e){var i=f("./helper/makeString");g.exports=function h(o,t){o=i(o);t=t||{};var j=t.width||75;var p=t.seperator||"\n";var r=t.cut||false;var q=t.preserveSpaces||false;var k=t.trailingSpaces||false;var u;if(j<=0){return o;}else{if(!r){var n=o.split(" ");var l=0;u="";while(n.length>0){if(1+n[0].length+l>j){if(l>0){if(q){u+=" ";l++;}else{if(k){while(l<j){u+=" ";l++;}}}u+=p;l=0;}}if(l>0){u+=" ";l++;}u+=n[0];l+=n[0].length;n.shift();}if(k){while(l<j){u+=" ";l++;}}return u;}else{var m=0;u="";while(m<o.length){if(m%j==0&&m>0){u+=p;}u+=o.charAt(m);m++;}if(k){while(m%j>0){u+=" ";m++;}}return u;}}};},{"./helper/makeString":20}]},{},[25])(25);});(function(H){var W,aL="2.8.3",bb=typeof global!=="undefined"?global:this,aw,ae=Math.round,aQ=Object.prototype.hasOwnProperty,al,A=0,j=1,a3=2,z=3,aI=4,x=5,aa=6,au={},aW=[],av=(typeof module!=="undefined"&&module.exports),e=/^\/?Date\((\-?\d+)/i,be=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,aN=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,az=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,ak=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,k=/\d\d?/,am=/\d{1,3}/,I=/\d{1,4}/,bk=/[+\-]?\d{1,6}/,a9=/\d+/,N=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,r=/Z|[\+\-]\d\d:?\d\d/gi,n=/T/i,aY=/[\+\-]?\d+(\.\d{1,3})?/,bq=/\d{1,2}/,aj=/\d/,v=/\d\d/,bd=/\d{3}/,aX=/\d{4}/,aq=/[+-]?\d{6}/,ah=/[+-]?\d+/,aU=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ab="YYYY-MM-DDTHH:mm:ssZ",bc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],L=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ai=/([\+\-]|\d\d)/gi,aP="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),G={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},f={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},a8={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},at={},B={s:45,m:45,h:22,d:26,M:11},a2="DDD w W M D d".split(" "),ax="M D H h m s w W".split(" "),a4={M:function(){return this.month()+1;},MMM:function(i){return this.localeData().monthsShort(this,i);},MMMM:function(i){return this.localeData().months(this,i);},D:function(){return this.date();},DDD:function(){return this.dayOfYear();},d:function(){return this.day();},dd:function(i){return this.localeData().weekdaysMin(this,i);},ddd:function(i){return this.localeData().weekdaysShort(this,i);},dddd:function(i){return this.localeData().weekdays(this,i);},w:function(){return this.week();},W:function(){return this.isoWeek();},YY:function(){return O(this.year()%100,2);},YYYY:function(){return O(this.year(),4);},YYYYY:function(){return O(this.year(),5);},YYYYYY:function(){var br=this.year(),i=br>=0?"+":"-";return i+O(Math.abs(br),6);},gg:function(){return O(this.weekYear()%100,2);},gggg:function(){return O(this.weekYear(),4);},ggggg:function(){return O(this.weekYear(),5);},GG:function(){return O(this.isoWeekYear()%100,2);},GGGG:function(){return O(this.isoWeekYear(),4);},GGGGG:function(){return O(this.isoWeekYear(),5);},e:function(){return this.weekday();},E:function(){return this.isoWeekday();},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true);},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false);},H:function(){return this.hours();},h:function(){return this.hours()%12||12;},m:function(){return this.minutes();},s:function(){return this.seconds();},S:function(){return R(this.milliseconds()/100);},SS:function(){return O(R(this.milliseconds()/10),2);},SSS:function(){return O(this.milliseconds(),3);},SSSS:function(){return O(this.milliseconds(),3);},Z:function(){var br=-this.zone(),i="+";if(br<0){br=-br;i="-";}return i+O(R(br/60),2)+":"+O(R(br)%60,2);},ZZ:function(){var br=-this.zone(),i="+";if(br<0){br=-br;i="-";}return i+O(R(br/60),2)+O(R(br)%60,2);},z:function(){return this.zoneAbbr();},zz:function(){return this.zoneName();},X:function(){return this.unix();},Q:function(){return this.quarter();}},a={},ac=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function aZ(br,i,bs){switch(arguments.length){case 2:return br!=null?br:i;case 3:return br!=null?br:i!=null?i:bs;default:throw new Error("Implement me");}}function a5(br,i){return aQ.call(br,i);}function ao(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false};}function bp(i){if(W.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+i);}}function bn(br,i){var bs=true;return aJ(function(){if(bs){bp(br);bs=false;}return i.apply(this,arguments);},i);}function g(i,br){if(!a[i]){bp(br);a[i]=true;}}function T(br,i){return function(bs){return O(br.call(this,bs),i);};}function l(i,br){return function(bs){return this.localeData().ordinal(i.call(this,bs),br);};}while(a2.length){al=a2.pop();a4[al+"o"]=l(a4[al],al);}while(ax.length){al=ax.pop();a4[al+al]=T(a4[al],2);}a4.DDDD=T(a4.DDD,3);function ag(){}function P(br,i){if(i!==false){bh(br);}aS(this,br);this._d=new Date(+br._d);}function an(bv){var bx=o(bv),bw=bx.year||0,br=bx.quarter||0,bs=bx.month||0,i=bx.week||0,bA=bx.day||0,by=bx.hour||0,bu=bx.minute||0,bz=bx.second||0,bt=bx.millisecond||0;this._milliseconds=+bt+bz*1000+bu*60000+by*3600000;this._days=+bA+i*7;this._months=+bs+br*3+bw*12;this._data={};this._locale=W.localeData();this._bubble();}function aJ(bs,br){for(var bt in br){if(a5(br,bt)){bs[bt]=br[bt];}}if(a5(br,"toString")){bs.toString=br.toString;}if(a5(br,"valueOf")){bs.valueOf=br.valueOf;}return bs;}function aS(bv,bu){var br,bt,bs;if(typeof bu._isAMomentObject!=="undefined"){bv._isAMomentObject=bu._isAMomentObject;}if(typeof bu._i!=="undefined"){bv._i=bu._i;}if(typeof bu._f!=="undefined"){bv._f=bu._f;}if(typeof bu._l!=="undefined"){bv._l=bu._l;}if(typeof bu._strict!=="undefined"){bv._strict=bu._strict;}if(typeof bu._tzm!=="undefined"){bv._tzm=bu._tzm;}if(typeof bu._isUTC!=="undefined"){bv._isUTC=bu._isUTC;}if(typeof bu._offset!=="undefined"){bv._offset=bu._offset;}if(typeof bu._pf!=="undefined"){bv._pf=bu._pf;}if(typeof bu._locale!=="undefined"){bv._locale=bu._locale;}if(aW.length>0){for(br in aW){bt=aW[br];bs=bu[bt];if(typeof bs!=="undefined"){bv[bt]=bs;}}}return bv;}function p(i){if(i<0){return Math.ceil(i);}else{return Math.floor(i);}}function O(bu,bt,bs){var br=""+Math.abs(bu),i=bu>=0;while(br.length<bt){br="0"+br;}return(i?(bs?"+":""):"-")+br;}function d(bs,i){var br={milliseconds:0,months:0};br.months=i.month()-bs.month()+(i.year()-bs.year())*12;if(bs.clone().add(br.months,"M").isAfter(i)){--br.months;}br.milliseconds=+i-+(bs.clone().add(br.months,"M"));return br;}function ad(bs,i){var br;i=C(i,bs);if(bs.isBefore(i)){br=d(bs,i);}else{br=d(i,bs);br.milliseconds=-br.milliseconds;br.months=-br.months;}return br;}function X(br,i){return function(bv,bu){var bt,bs;if(bu!==null&&!isNaN(+bu)){g(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period).");bs=bv;bv=bu;bu=bs;}bv=typeof bv==="string"?+bv:bv;bt=W.duration(bv,bu);K(this,bt,br);return this;};}function K(bs,bv,bu,bt){var br=bv._milliseconds,bw=bv._days,i=bv._months;bt=bt==null?true:bt;if(br){bs._d.setTime(+bs._d+br*bu);}if(bw){a0(bs,"Date",bo(bs,"Date")+bw*bu);}if(i){bj(bs,bo(bs,"Month")+i*bu);}if(bt){W.updateOffset(bs,bw||i);}}function b(i){return Object.prototype.toString.call(i)==="[object Array]";}function h(i){return Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date;}function a1(bw,bv,bs){var br=Math.min(bw.length,bv.length),bt=Math.abs(bw.length-bv.length),bx=0,bu;for(bu=0;bu<br;bu++){if((bs&&bw[bu]!==bv[bu])||(!bs&&R(bw[bu])!==R(bv[bu]))){bx++;}}return bx+bt;}function a7(br){if(br){var i=br.toLowerCase().replace(/(.)s$/,"$1");br=f[br]||a8[i]||i;}return br;}function o(bs){var br={},i,bt;for(bt in bs){if(a5(bs,bt)){i=a7(bt);if(i){br[i]=bs[bt];}}}return br;}function aF(br){var i,bs;if(br.indexOf("week")===0){i=7;bs="day";}else{if(br.indexOf("month")===0){i=12;bs="month";}else{return;}}W[br]=function(bx,bu){var bw,bt,by=W._locale[br],bv=[];if(typeof bx==="number"){bu=bx;bx=H;}bt=function(bA){var bz=W().utc().set(bs,bA);return by.call(W._locale,bz,bx||"");};if(bu!=null){return bt(bu);}else{for(bw=0;bw<i;bw++){bv.push(bt(bw));}return bv;}};}function R(i){var bs=+i,br=0;if(bs!==0&&isFinite(bs)){if(bs>=0){br=Math.floor(bs);}else{br=Math.ceil(bs);}}return br;}function bf(i,br){return new Date(Date.UTC(i,br+1,0)).getUTCDate();}function aO(i,bs,br){return F(W([i,11,31+bs-br]),bs,br).week;}function ba(i){return aT(i)?366:365;}function aT(i){return(i%4===0&&i%100!==0)||i%400===0;}function bh(i){var br;if(i._a&&i._pf.overflow===-2){br=i._a[j]<0||i._a[j]>11?j:i._a[a3]<1||i._a[a3]>bf(i._a[A],i._a[j])?a3:i._a[z]<0||i._a[z]>23?z:i._a[aI]<0||i._a[aI]>59?aI:i._a[x]<0||i._a[x]>59?x:i._a[aa]<0||i._a[aa]>999?aa:-1;if(i._pf._overflowDayOfYear&&(br<A||br>a3)){br=a3;}i._pf.overflow=br;}}function aK(i){if(i._isValid==null){i._isValid=!isNaN(i._d.getTime())&&i._pf.overflow<0&&!i._pf.empty&&!i._pf.invalidMonth&&!i._pf.nullInput&&!i._pf.invalidFormat&&!i._pf.userInvalidated;if(i._strict){i._isValid=i._isValid&&i._pf.charsLeftOver===0&&i._pf.unusedTokens.length===0;}}return i._isValid;}function aV(i){return i?i.toLowerCase().replace("_","-"):i;}function aC(bw){var bu=0,bs,bv,br,bt;while(bu<bw.length){bt=aV(bw[bu]).split("-");bs=bt.length;bv=aV(bw[bu+1]);bv=bv?bv.split("-"):null;while(bs>0){br=c(bt.slice(0,bs).join("-"));if(br){return br;}if(bv&&bv.length>=bs&&a1(bt,bv,true)>=bs-1){break;}bs--;}bu++;}return null;}function c(i){var bs=null;if(!au[i]&&av){try{bs=W.locale();require("./locale/"+i);W.locale(bs);}catch(br){}}return au[i];}function C(i,br){return br._isUTC?W(i).zone(br._offset||0):W(i).local();}aJ(ag.prototype,{set:function(br){var bt,bs;for(bs in br){bt=br[bs];if(typeof bt==="function"){this[bs]=bt;}else{this["_"+bs]=bt;}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()];},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()];},monthsParse:function(br){var bs,bu,bt;if(!this._monthsParse){this._monthsParse=[];}for(bs=0;bs<12;bs++){if(!this._monthsParse[bs]){bu=W.utc([2000,bs]);bt="^"+this.months(bu,"")+"|^"+this.monthsShort(bu,"");this._monthsParse[bs]=new RegExp(bt.replace(".",""),"i");}if(this._monthsParse[bs].test(br)){return bs;}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()];},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()];},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()];},weekdaysParse:function(bu){var br,bt,bs;if(!this._weekdaysParse){this._weekdaysParse=[];}for(br=0;br<7;br++){if(!this._weekdaysParse[br]){bt=W([2000,1]).day(br);bs="^"+this.weekdays(bt,"")+"|^"+this.weekdaysShort(bt,"")+"|^"+this.weekdaysMin(bt,"");this._weekdaysParse[br]=new RegExp(bs.replace(".",""),"i");}if(this._weekdaysParse[br].test(bu)){return br;}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(br){var i=this._longDateFormat[br];if(!i&&this._longDateFormat[br.toUpperCase()]){i=this._longDateFormat[br.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(bs){return bs.slice(1);});this._longDateFormat[br]=i;}return i;},isPM:function(i){return((i+"").toLowerCase().charAt(0)==="p");},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,br,bs){if(i>11){return bs?"pm":"PM";}else{return bs?"am":"AM";}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(br,bs){var i=this._calendar[br];return typeof i==="function"?i.apply(bs):i;},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(bt,bs,br,bu){var i=this._relativeTime[br];return(typeof i==="function")?i(bt,bs,br,bu):i.replace(/%d/i,bt);},pastFuture:function(bs,i){var br=this._relativeTime[bs>0?"future":"past"];return typeof br==="function"?br(i):br.replace(/%s/i,i);},ordinal:function(i){return this._ordinal.replace("%d",i);},_ordinal:"%d",preparse:function(i){return i;},postformat:function(i){return i;},week:function(i){return F(i,this._week.dow,this._week.doy).week;},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate;}});function ar(i){if(i.match(/\[[\s\S]/)){return i.replace(/^\[|\]$/g,"");}return i.replace(/\\/g,"");}function w(bt){var bu=bt.match(az),br,bs;for(br=0,bs=bu.length;br<bs;br++){if(a4[bu[br]]){bu[br]=a4[bu[br]];}else{bu[br]=ar(bu[br]);}}return function(bv){var i="";for(br=0;br<bs;br++){i+=bu[br] instanceof Function?bu[br].call(bv,bt):bu[br];}return i;};}function ay(i,br){if(!i.isValid()){return i.localeData().invalidDate();}br=bl(br,i.localeData());if(!at[br]){at[br]=w(br);}return at[br](i);}function bl(bu,br){var bs=5;function bt(i){return br.longDateFormat(i)||i;}ak.lastIndex=0;while(bs>=0&&ak.test(bu)){bu=bu.replace(ak,bt);ak.lastIndex=0;bs-=1;}return bu;}function aD(bt,bs){var br,i=bs._strict;switch(bt){case"Q":return aj;case"DDDD":return bd;case"YYYY":case"GGGG":case"gggg":return i?aX:I;case"Y":case"G":case"g":return ah;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?aq:bk;case"S":if(i){return aj;}case"SS":if(i){return v;}case"SSS":if(i){return bd;}case"DDD":return am;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return N;case"a":case"A":return bs._locale._meridiemParse;case"X":return aY;case"Z":case"ZZ":return r;case"T":return n;case"SSSS":return a9;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?v:k;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return k;case"Do":return bq;default:br=new RegExp(bi(aH(bt.replace("\\","")),"i"));return br;}}function D(br){br=br||"";var i=(br.match(r)||[]),bu=i[i.length-1]||[],bt=(bu+"").match(ai)||["-",0,0],bs=+(bt[1]*60)+R(bt[2]);return bt[0]==="+"?-bs:bs;}function aG(bu,bs,bt){var br,i=bt._a;switch(bu){case"Q":if(bs!=null){i[j]=(R(bs)-1)*3;}break;case"M":case"MM":if(bs!=null){i[j]=R(bs)-1;}break;case"MMM":case"MMMM":br=bt._locale.monthsParse(bs);if(br!=null){i[j]=br;}else{bt._pf.invalidMonth=bs;}break;case"D":case"DD":if(bs!=null){i[a3]=R(bs);}break;case"Do":if(bs!=null){i[a3]=R(parseInt(bs,10));}break;case"DDD":case"DDDD":if(bs!=null){bt._dayOfYear=R(bs);}break;case"YY":i[A]=W.parseTwoDigitYear(bs);break;case"YYYY":case"YYYYY":case"YYYYYY":i[A]=R(bs);break;case"a":case"A":bt._isPm=bt._locale.isPM(bs);break;case"H":case"HH":case"h":case"hh":i[z]=R(bs);break;case"m":case"mm":i[aI]=R(bs);break;case"s":case"ss":i[x]=R(bs);break;case"S":case"SS":case"SSS":case"SSSS":i[aa]=R(("0."+bs)*1000);break;case"X":bt._d=new Date(parseFloat(bs)*1000);break;case"Z":case"ZZ":bt._useUTC=true;bt._tzm=D(bs);break;case"dd":case"ddd":case"dddd":br=bt._locale.weekdaysParse(bs);if(br!=null){bt._w=bt._w||{};bt._w.d=br;}else{bt._pf.invalidWeekday=bs;}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":bu=bu.substr(0,1);case"gggg":case"GGGG":case"GGGGG":bu=bu.substr(0,2);if(bs){bt._w=bt._w||{};bt._w[bu]=R(bs);}break;case"gg":case"GG":bt._w=bt._w||{};bt._w[bu]=W.parseTwoDigitYear(bs);}}function Y(bs){var i,bu,bt,bv,bx,bw,br;i=bs._w;if(i.GG!=null||i.W!=null||i.E!=null){bx=1;bw=4;bu=aZ(i.GG,bs._a[A],F(W(),1,4).year);bt=aZ(i.W,1);bv=aZ(i.E,1);}else{bx=bs._locale._week.dow;bw=bs._locale._week.doy;bu=aZ(i.gg,bs._a[A],F(W(),bx,bw).year);bt=aZ(i.w,1);if(i.d!=null){bv=i.d;if(bv<bx){++bt;}}else{if(i.e!=null){bv=i.e+bx;}else{bv=bx;}}}br=y(bu,bt,bv,bw,bx);bs._a[A]=br.year;bs._dayOfYear=br.dayOfYear;}function ap(bv){var bw,bu,bt=[],bs,br;if(bv._d){return;}bs=q(bv);if(bv._w&&bv._a[a3]==null&&bv._a[j]==null){Y(bv);}if(bv._dayOfYear){br=aZ(bv._a[A],bs[A]);if(bv._dayOfYear>ba(br)){bv._pf._overflowDayOfYear=true;}bu=M(br,0,bv._dayOfYear);bv._a[j]=bu.getUTCMonth();bv._a[a3]=bu.getUTCDate();}for(bw=0;bw<3&&bv._a[bw]==null;++bw){bv._a[bw]=bt[bw]=bs[bw];}for(;bw<7;bw++){bv._a[bw]=bt[bw]=(bv._a[bw]==null)?(bw===2?1:0):bv._a[bw];}bv._d=(bv._useUTC?M:aA).apply(null,bt);if(bv._tzm!=null){bv._d.setUTCMinutes(bv._d.getUTCMinutes()+bv._tzm);}}function aM(br){var i;if(br._d){return;}i=o(br._i);br._a=[i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond];ap(br);}function q(br){var i=new Date();if(br._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()];}else{return[i.getFullYear(),i.getMonth(),i.getDate()];}}function V(bt){if(bt._f===W.ISO_8601){aB(bt);return;}bt._a=[];bt._pf.empty=true;var bw=""+bt._i,bv,bs,bz,bu,by,br=bw.length,bx=0;bz=bl(bt._f,bt._locale).match(az)||[];for(bv=0;bv<bz.length;bv++){bu=bz[bv];bs=(bw.match(aD(bu,bt))||[])[0];if(bs){by=bw.substr(0,bw.indexOf(bs));if(by.length>0){bt._pf.unusedInput.push(by);}bw=bw.slice(bw.indexOf(bs)+bs.length);bx+=bs.length;}if(a4[bu]){if(bs){bt._pf.empty=false;}else{bt._pf.unusedTokens.push(bu);}aG(bu,bs,bt);}else{if(bt._strict&&!bs){bt._pf.unusedTokens.push(bu);}}}bt._pf.charsLeftOver=br-bx;if(bw.length>0){bt._pf.unusedInput.push(bw);}if(bt._isPm&&bt._a[z]<12){bt._a[z]+=12;}if(bt._isPm===false&&bt._a[z]===12){bt._a[z]=0;}ap(bt);bh(bt);}function aH(i){return i.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(br,bv,bu,bt,bs){return bv||bu||bt||bs;});}function bi(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");}function a6(br){var bv,bt,bu,bs,bw;if(br._f.length===0){br._pf.invalidFormat=true;br._d=new Date(NaN);return;}for(bs=0;bs<br._f.length;bs++){bw=0;bv=aS({},br);if(br._useUTC!=null){bv._useUTC=br._useUTC;}bv._pf=ao();bv._f=br._f[bs];V(bv);if(!aK(bv)){continue;}bw+=bv._pf.charsLeftOver;bw+=bv._pf.unusedTokens.length*10;bv._pf.score=bw;if(bu==null||bw<bu){bu=bw;bt=bv;}}aJ(br,bt||bv);}function aB(bu){var bv,br,bt=bu._i,bs=aU.exec(bt);if(bs){bu._pf.iso=true;for(bv=0,br=bc.length;bv<br;bv++){if(bc[bv][1].exec(bt)){bu._f=bc[bv][0]+(bs[6]||" ");break;}}for(bv=0,br=L.length;bv<br;bv++){if(L[bv][1].exec(bt)){bu._f+=L[bv][0];break;}}if(bt.match(r)){bu._f+="Z";}V(bu);}else{bu._isValid=false;}}function m(i){aB(i);if(i._isValid===false){delete i._isValid;W.createFromInputFallback(i);}}function J(br,bu){var bt=[],bs;for(bs=0;bs<br.length;++bs){bt.push(bu(br[bs],bs));}return bt;}function U(bs){var br=bs._i,i;if(br===H){bs._d=new Date();}else{if(h(br)){bs._d=new Date(+br);}else{if((i=e.exec(br))!==null){bs._d=new Date(+i[1]);}else{if(typeof br==="string"){m(bs);}else{if(b(br)){bs._a=J(br.slice(0),function(bt){return parseInt(bt,10);});ap(bs);}else{if(typeof(br)==="object"){aM(bs);}else{if(typeof(br)==="number"){bs._d=new Date(br);}else{W.createFromInputFallback(bs);}}}}}}}}function aA(bx,i,bv,bu,bw,bt,bs){var br=new Date(bx,i,bv,bu,bw,bt,bs);if(bx<1970){br.setFullYear(bx);}return br;}function M(br){var i=new Date(Date.UTC.apply(null,arguments));if(br<1970){i.setUTCFullYear(br);}return i;}function bg(br,i){if(typeof br==="string"){if(!isNaN(br)){br=parseInt(br,10);}else{br=i.weekdaysParse(br);if(typeof br!=="number"){return null;}}}return br;}function aR(br,bt,bs,bu,i){return i.relativeTime(bt||1,!!bs,br,bu);}function E(bu,br,by){var bs=W.duration(bu).abs(),bz=ae(bs.as("s")),bt=ae(bs.as("m")),bx=ae(bs.as("h")),bA=ae(bs.as("d")),i=ae(bs.as("M")),bv=ae(bs.as("y")),bw=bz<B.s&&["s",bz]||bt===1&&["m"]||bt<B.m&&["mm",bt]||bx===1&&["h"]||bx<B.h&&["hh",bx]||bA===1&&["d"]||bA<B.d&&["dd",bA]||i===1&&["M"]||i<B.M&&["MM",i]||bv===1&&["y"]||["yy",bv];bw[2]=br;bw[3]=+bu>0;bw[4]=by;return aR.apply({},bw);}function F(bu,bs,bv){var br=bv-bs,i=bv-bu.day(),bt;if(i>br){i-=7;}if(i<br-7){i+=7;}bt=W(bu).add(i,"d");return{week:Math.ceil(bt.dayOfYear()/7),year:bt.year()};}function y(bu,bt,bv,bx,i){var bw=M(bu,0,1).getUTCDay(),bs,br;bw=bw===0?7:bw;bv=bv!=null?bv:i;bs=i-bw+(bw>bx?7:0)-(bw<i?7:0);br=7*(bt-1)+(bv-i)+bs+1;return{year:br>0?bu:bu-1,dayOfYear:br>0?br:ba(bu-1)+br};}function S(br){var i=br._i,bs=br._f;br._locale=br._locale||W.localeData(br._l);if(i===null||(bs===H&&i==="")){return W.invalid({nullInput:true});}if(typeof i==="string"){br._i=i=br._locale.preparse(i);}if(W.isMoment(i)){return new P(i,true);}else{if(bs){if(b(bs)){a6(br);}else{V(br);}}else{U(br);}}return new P(br);}W=function(bs,bt,i,br){var bu;if(typeof(i)==="boolean"){br=i;i=H;}bu={};bu._isAMomentObject=true;bu._i=bs;bu._f=bt;bu._l=i;bu._strict=br;bu._isUTC=false;bu._pf=ao();return S(bu);};W.suppressDeprecationWarnings=false;W.createFromInputFallback=bn("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(i){i._d=new Date(i._i);});function aE(bt,bu){var bs,br;if(bu.length===1&&b(bu[0])){bu=bu[0];}if(!bu.length){return W();}bs=bu[0];for(br=1;br<bu.length;++br){if(bu[br][bt](bs)){bs=bu[br];}}return bs;}W.min=function(){var i=[].slice.call(arguments,0);return aE("isBefore",i);};W.max=function(){var i=[].slice.call(arguments,0);return aE("isAfter",i);};W.utc=function(bs,bt,i,br){var bu;if(typeof(i)==="boolean"){br=i;i=H;}bu={};bu._isAMomentObject=true;bu._useUTC=true;bu._isUTC=true;bu._l=i;bu._i=bs;bu._f=bt;bu._strict=br;bu._pf=ao();return S(bu).utc();};W.unix=function(i){return W(i*1000);};W.duration=function(bs,bw){var bx=bs,bv=null,br,bu,bt,i;if(W.isDuration(bs)){bx={ms:bs._milliseconds,d:bs._days,M:bs._months};}else{if(typeof bs==="number"){bx={};if(bw){bx[bw]=bs;}else{bx.milliseconds=bs;}}else{if(!!(bv=be.exec(bs))){br=(bv[1]==="-")?-1:1;bx={y:0,d:R(bv[a3])*br,h:R(bv[z])*br,m:R(bv[aI])*br,s:R(bv[x])*br,ms:R(bv[aa])*br};}else{if(!!(bv=aN.exec(bs))){br=(bv[1]==="-")?-1:1;bt=function(bz){var by=bz&&parseFloat(bz.replace(",","."));return(isNaN(by)?0:by)*br;};bx={y:bt(bv[2]),M:bt(bv[3]),d:bt(bv[4]),h:bt(bv[5]),m:bt(bv[6]),s:bt(bv[7]),w:bt(bv[8])};}else{if(typeof bx==="object"&&("from" in bx||"to" in bx)){i=ad(W(bx.from),W(bx.to));bx={};bx.ms=i.milliseconds;bx.M=i.months;}}}}}bu=new an(bx);if(W.isDuration(bs)&&a5(bs,"_locale")){bu._locale=bs._locale;}return bu;};W.version=aL;W.defaultFormat=ab;W.ISO_8601=function(){};W.momentProperties=aW;W.updateOffset=function(){};W.relativeTimeThreshold=function(i,br){if(B[i]===H){return false;}if(br===H){return B[i];}B[i]=br;return true;};W.lang=bn("moment.lang is deprecated. Use moment.locale instead.",function(i,br){return W.locale(i,br);});W.locale=function(br,i){var bs;if(br){if(typeof(i)!=="undefined"){bs=W.defineLocale(br,i);}else{bs=W.localeData(br);}if(bs){W.duration._locale=W._locale=bs;}}return W._locale._abbr;};W.defineLocale=function(br,i){if(i!==null){i.abbr=br;if(!au[br]){au[br]=new ag();}au[br].set(i);W.locale(br);return au[br];}else{delete au[br];return null;}};W.langData=bn("moment.langData is deprecated. Use moment.localeData instead.",function(i){return W.localeData(i);});W.localeData=function(br){var i;if(br&&br._locale&&br._locale._abbr){br=br._locale._abbr;}if(!br){return W._locale;}if(!b(br)){i=c(br);if(i){return i;}br=[br];}return aC(br);};W.isMoment=function(i){return i instanceof P||(i!=null&&a5(i,"_isAMomentObject"));};W.isDuration=function(i){return i instanceof an;};for(al=ac.length-1;al>=0;--al){aF(ac[al]);}W.normalizeUnits=function(i){return a7(i);};W.invalid=function(br){var i=W.utc(NaN);if(br!=null){aJ(i._pf,br);}else{i._pf.userInvalidated=true;}return i;};W.parseZone=function(){return W.apply(null,arguments).parseZone();};W.parseTwoDigitYear=function(i){return R(i)+(R(i)>68?1900:2000);};aJ(W.fn=P.prototype,{clone:function(){return W(this);},valueOf:function(){return +this._d+((this._offset||0)*60000);},unix:function(){return Math.floor(+this/1000);},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ");},toDate:function(){return this._offset?new Date(+this):this._d;},toISOString:function(){var i=W(this).utc();if(0<i.year()&&i.year()<=9999){return ay(i,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}else{return ay(i,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");}},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()];},isValid:function(){return aK(this);},isDSTShifted:function(){if(this._a){return this.isValid()&&a1(this._a,(this._isUTC?W.utc(this._a):W(this._a)).toArray())>0;}return false;},parsingFlags:function(){return aJ({},this._pf);},invalidAt:function(){return this._pf.overflow;},utc:function(i){return this.zone(0,i);},local:function(i){if(this._isUTC){this.zone(0,i);this._isUTC=false;if(i){this.add(this._dateTzOffset(),"m");}}return this;},format:function(br){var i=ay(this,br||W.defaultFormat);return this.localeData().postformat(i);},add:X(1,"add"),subtract:X(-1,"subtract"),diff:function(bu,bt,i){var bw=C(bu,this),br=(this.zone()-bw.zone())*60000,bx,bs,bv;bt=a7(bt);if(bt==="year"||bt==="month"){bx=(this.daysInMonth()+bw.daysInMonth())*43200000;bs=((this.year()-bw.year())*12)+(this.month()-bw.month());bv=(this-W(this).startOf("month"))-(bw-W(bw).startOf("month"));bv-=((this.zone()-W(this).startOf("month").zone())-(bw.zone()-W(bw).startOf("month").zone()))*60000;bs+=bv/bx;if(bt==="year"){bs=bs/12;}}else{bx=(this-bw);bs=bt==="second"?bx/1000:bt==="minute"?bx/60000:bt==="hour"?bx/3600000:bt==="day"?(bx-br)/86400000:bt==="week"?(bx-br)/604800000:bx;}return i?bs:p(bs);},from:function(br,i){return W.duration({to:this,from:br}).locale(this.locale()).humanize(!i);},fromNow:function(i){return this.from(W(),i);},calendar:function(bu){var br=bu||W(),i=C(br,this).startOf("day"),bt=this.diff(i,"days",true),bs=bt<-6?"sameElse":bt<-1?"lastWeek":bt<0?"lastDay":bt<1?"sameDay":bt<2?"nextDay":bt<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(bs,this));},isLeapYear:function(){return aT(this.year());},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone());},day:function(br){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(br!=null){br=bg(br,this.localeData());return this.add(br-i,"d");}else{return i;}},month:u("Month",true),startOf:function(i){i=a7(i);switch(i){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0);}if(i==="week"){this.weekday(0);}else{if(i==="isoWeek"){this.isoWeekday(1);}}if(i==="quarter"){this.month(Math.floor(this.month()/3)*3);}return this;},endOf:function(i){i=a7(i);return this.startOf(i).add(1,(i==="isoWeek"?"week":i)).subtract(1,"ms");},isAfter:function(br,i){i=a7(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){br=W.isMoment(br)?br:W(br);return +this>+br;}else{return +this.clone().startOf(i)>+W(br).startOf(i);}},isBefore:function(br,i){i=a7(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){br=W.isMoment(br)?br:W(br);return +this<+br;}else{return +this.clone().startOf(i)<+W(br).startOf(i);}},isSame:function(br,i){i=a7(i||"millisecond");if(i==="millisecond"){br=W.isMoment(br)?br:W(br);return +this===+br;}else{return +this.clone().startOf(i)===+C(br,this).startOf(i);}},min:bn("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(i){i=W.apply(null,arguments);return i<this?this:i;}),max:bn("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(i){i=W.apply(null,arguments);return i>this?this:i;}),zone:function(i,bt){var bs=this._offset||0,br;if(i!=null){if(typeof i==="string"){i=D(i);}if(Math.abs(i)<16){i=i*60;}if(!this._isUTC&&bt){br=this._dateTzOffset();}this._offset=i;this._isUTC=true;if(br!=null){this.subtract(br,"m");}if(bs!==i){if(!bt||this._changeInProgress){K(this,W.duration(bs-i,"m"),1,false);}else{if(!this._changeInProgress){this._changeInProgress=true;W.updateOffset(this,true);this._changeInProgress=null;}}}}else{return this._isUTC?bs:this._dateTzOffset();}return this;},zoneAbbr:function(){return this._isUTC?"UTC":"";},zoneName:function(){return this._isUTC?"Coordinated Universal Time":"";},parseZone:function(){if(this._tzm){this.zone(this._tzm);}else{if(typeof this._i==="string"){this.zone(this._i);}}return this;},hasAlignedHourOffset:function(i){if(!i){i=0;}else{i=W(i).zone();}return(this.zone()-i)%60===0;},daysInMonth:function(){return bf(this.year(),this.month());},dayOfYear:function(i){var br=ae((W(this).startOf("day")-W(this).startOf("year"))/86400000)+1;return i==null?br:this.add((i-br),"d");},quarter:function(i){return i==null?Math.ceil((this.month()+1)/3):this.month((i-1)*3+this.month()%3);},weekYear:function(i){var br=F(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return i==null?br:this.add((i-br),"y");},isoWeekYear:function(i){var br=F(this,1,4).year;return i==null?br:this.add((i-br),"y");},week:function(i){var br=this.localeData().week(this);return i==null?br:this.add((i-br)*7,"d");},isoWeek:function(i){var br=F(this,1,4).week;return i==null?br:this.add((i-br)*7,"d");},weekday:function(i){var br=(this.day()+7-this.localeData()._week.dow)%7;return i==null?br:this.add(i-br,"d");},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7);},isoWeeksInYear:function(){return aO(this.year(),1,4);},weeksInYear:function(){var i=this.localeData()._week;return aO(this.year(),i.dow,i.doy);},get:function(i){i=a7(i);return this[i]();},set:function(i,br){i=a7(i);if(typeof this[i]==="function"){this[i](br);}return this;},locale:function(br){var i;if(br===H){return this._locale._abbr;}else{i=W.localeData(br);if(i!=null){this._locale=i;}return this;}},lang:bn("moment().lang() is deprecated. Use moment().localeData() instead.",function(i){if(i===H){return this.localeData();}else{return this.locale(i);}}),localeData:function(){return this._locale;},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15;}});function bj(i,br){var bs;if(typeof br==="string"){br=i.localeData().monthsParse(br);if(typeof br!=="number"){return i;}}bs=Math.min(i.date(),bf(i.year(),br));i._d["set"+(i._isUTC?"UTC":"")+"Month"](br,bs);return i;}function bo(br,i){return br._d["get"+(br._isUTC?"UTC":"")+i]();}function a0(br,i,bs){if(i==="Month"){return bj(br,bs);}else{return br._d["set"+(br._isUTC?"UTC":"")+i](bs);}}function u(i,br){return function(bs){if(bs!=null){a0(this,i,bs);W.updateOffset(this,br);return this;}else{return bo(this,i);}};}W.fn.millisecond=W.fn.milliseconds=u("Milliseconds",false);W.fn.second=W.fn.seconds=u("Seconds",false);W.fn.minute=W.fn.minutes=u("Minutes",false);W.fn.hour=W.fn.hours=u("Hours",true);W.fn.date=u("Date",true);W.fn.dates=bn("dates accessor is deprecated. Use date instead.",u("Date",true));W.fn.year=u("FullYear",true);W.fn.years=bn("years accessor is deprecated. Use year instead.",u("FullYear",true));W.fn.days=W.fn.day;W.fn.months=W.fn.month;W.fn.weeks=W.fn.week;W.fn.isoWeeks=W.fn.isoWeek;W.fn.quarters=W.fn.quarter;W.fn.toJSON=W.fn.toISOString;function t(i){return i*400/146097;}function bm(i){return i*146097/400;}aJ(W.duration.fn=an.prototype,{_bubble:function(){var bs=this._milliseconds,bx=this._days,i=this._months,bv=this._data,bw,bu,br,bt=0;bv.milliseconds=bs%1000;bw=p(bs/1000);bv.seconds=bw%60;bu=p(bw/60);bv.minutes=bu%60;br=p(bu/60);bv.hours=br%24;bx+=p(br/24);bt=p(t(bx));bx-=p(bm(bt));i+=p(bx/30);bx%=30;bt+=p(i/12);i%=12;bv.days=bx;bv.months=i;bv.years=bt;},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this;},weeks:function(){return p(this.days()/7);},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+R(this._months/12)*31536000000;},humanize:function(br){var i=E(this,!br,this.localeData());if(br){i=this.localeData().pastFuture(+this,i);}return this.localeData().postformat(i);},add:function(i,bs){var br=W.duration(i,bs);this._milliseconds+=br._milliseconds;this._days+=br._days;this._months+=br._months;this._bubble();return this;},subtract:function(i,bs){var br=W.duration(i,bs);this._milliseconds-=br._milliseconds;this._days-=br._days;this._months-=br._months;this._bubble();return this;},get:function(i){i=a7(i);return this[i.toLowerCase()+"s"]();},as:function(br){var bs,i;br=a7(br);if(br==="month"||br==="year"){bs=this._days+this._milliseconds/86400000;i=this._months+t(bs)*12;return br==="month"?i:i/12;}else{bs=this._days+bm(this._months/12);switch(br){case"week":return bs/7+this._milliseconds/604800000;case"day":return bs+this._milliseconds/86400000;case"hour":return bs*24+this._milliseconds/3600000;case"minute":return bs*24*60+this._milliseconds/60000;case"second":return bs*24*60*60+this._milliseconds/1000;case"millisecond":return Math.floor(bs*24*60*60*1000)+this._milliseconds;default:throw new Error("Unknown unit "+br);}}},lang:W.fn.lang,locale:W.fn.locale,toIsoString:bn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString();}),toISOString:function(){var bt=Math.abs(this.years()),i=Math.abs(this.months()),bv=Math.abs(this.days()),br=Math.abs(this.hours()),bs=Math.abs(this.minutes()),bu=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D";}return(this.asSeconds()<0?"-":"")+"P"+(bt?bt+"Y":"")+(i?i+"M":"")+(bv?bv+"D":"")+((br||bs||bu)?"T":"")+(br?br+"H":"")+(bs?bs+"M":"")+(bu?bu+"S":"");},localeData:function(){return this._locale;}});W.duration.fn.toString=W.duration.fn.toISOString;function af(i){W.duration.fn[i]=function(){return this._data[i];};}for(al in G){if(a5(G,al)){af(al.toLowerCase());}}W.duration.fn.asMilliseconds=function(){return this.as("ms");};W.duration.fn.asSeconds=function(){return this.as("s");};W.duration.fn.asMinutes=function(){return this.as("m");};W.duration.fn.asHours=function(){return this.as("h");};W.duration.fn.asDays=function(){return this.as("d");};W.duration.fn.asWeeks=function(){return this.as("weeks");};W.duration.fn.asMonths=function(){return this.as("M");};W.duration.fn.asYears=function(){return this.as("y");};W.locale("en",{ordinal:function(bs){var i=bs%10,br=(R(bs%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return bs+br;}});function Z(i){if(typeof ender!=="undefined"){return;}aw=bb.moment;if(i){bb.moment=bn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",W);}else{bb.moment=W;}}if(av){module.exports=W;}else{if(typeof define==="function"&&define.amd){define("moment",function(br,i,bs){if(bs.config&&bs.config()&&bs.config().noGlobal===true){bb.moment=aw;}return W;});Z(true);}else{Z();}}}).call(this);
/*! jQuery UI - v1.12.1 - 2016-12-05
* http://jqueryui.com
* Includes: effect.js, effects/effect-blind.js, effects/effect-bounce.js, effects/effect-clip.js, effects/effect-drop.js, effects/effect-explode.js, effects/effect-fade.js, effects/effect-fold.js, effects/effect-highlight.js, effects/effect-puff.js, effects/effect-pulsate.js, effects/effect-scale.js, effects/effect-shake.js, effects/effect-size.js, effects/effect-slide.js, effects/effect-transfer.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery);})(function(b){b.ui=b.ui||{},b.ui.version="1.12.1";var d="ui-effects-",a="ui-effects-style",c="ui-effects-animated",g=b;b.effects={effect:{}},function(E,z){function w(l,o,h){var n=D[o.type]||{};return null==l?h||!o.def?null:o.def:(l=n.floor?~~l:parseFloat(l),isNaN(l)?o.def:n.mod?(l+n.mod)%n.mod:0>l?0:l>n.max?n.max:l);}function F(e){var h=x(),l=h._rgba=[];return e=e.toLowerCase(),y(v,function(p,H){var n,G=H.re.exec(e),i=G&&H.parse(G),u=H.space||"rgba";return i?(n=h[u](i),h[B[u].cache]=n[B[u].cache],l=h._rgba=n._rgba,!1):z;}),l.length?("0,0,0,0"===l.join()&&E.extend(l,m.transparent),h):m[e];}function q(l,n,h){return h=(h+1)%1,1>6*h?l+6*(n-l)*h:1>2*h?n:2>3*h?l+6*(n-l)*(2/3-h):l;}var m,C="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",j=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]];}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]];}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)];}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]];}}],x=E.Color=function(o,h,l,p){return new E.Color.fn.parse(o,h,l,p);},B={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},D={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},A=x.support={},k=E("<p>")[0],y=E.each;k.style.cssText="background-color:rgba(1,1,1,.5)",A.rgba=k.style.backgroundColor.indexOf("rgba")>-1,y(B,function(h,i){i.cache="_"+h,i.props.alpha={idx:3,type:"percent",def:1};}),x.fn=E.extend(x.prototype,{parse:function(H,h,o,e){if(H===z){return this._rgba=[null,null,null,null],this;}(H.jquery||H.nodeType)&&(H=E(H).css(h),h=z);var i=this,G=E.type(H),t=this._rgba=[];return h!==z&&(H=[H,h,o,e],G="array"),"string"===G?this.parse(F(H)||m._default):"array"===G?(y(B.rgba.props,function(l,n){t[n.idx]=w(H[n.idx],n);}),this):"object"===G?(H instanceof x?y(B,function(l,n){H[n.cache]&&(i[n.cache]=H[n.cache].slice());}):y(B,function(n,l){var p=l.cache;y(l.props,function(r,u){if(!i[p]&&l.to){if("alpha"===r||null==H[r]){return;}i[p]=l.to(i._rgba);}i[p][u.idx]=w(H[r],u,!0);}),i[p]&&0>E.inArray(null,i[p].slice(0,3))&&(i[p][3]=1,l.from&&(i._rgba=l.from(i[p])));}),this):z;},is:function(h){var e=x(h),l=!0,o=this;return y(B,function(n,u){var i,p=e[u.cache];return p&&(i=o[u.cache]||u.to&&u.to(o._rgba)||[],y(u.props,function(G,r){return null!=p[r.idx]?l=p[r.idx]===i[r.idx]:z;})),l;}),l;},_space:function(){var h=[],i=this;return y(B,function(e,l){i[l.cache]&&h.push(e);}),h.pop();},transition:function(p,H){var u=x(p),J=u._space(),I=B[J],i=0===this.alpha()?x("transparent"):this,G=i[I.cache]||I.to(i._rgba),h=G.slice();return u=u[I.cache],y(I.props,function(l,M){var K=M.idx,e=G[K],r=u[K],L=D[M.type]||{};null!==r&&(null===e?h[K]=r:(L.mod&&(r-e>L.mod/2?e+=L.mod:e-r>L.mod/2&&(e-=L.mod)),h[K]=w((r-e)*H+e,M)));}),this[J](h);},blend:function(o){if(1===this._rgba[3]){return this;}var h=this._rgba.slice(),l=h.pop(),p=x(o)._rgba;return x(E.map(h,function(i,n){return(1-l)*p[n]+l*i;}));},toRgbaString:function(){var l="rgba(",h=E.map(this._rgba,function(i,n){return null==i?n>2?1:0:i;});return 1===h[3]&&(h.pop(),l="rgb("),l+h.join()+")";},toHslaString:function(){var l="hsla(",h=E.map(this.hsla(),function(i,n){return null==i&&(i=n>2?1:0),n&&3>n&&(i=Math.round(100*i)+"%"),i;});return 1===h[3]&&(h.pop(),l="hsl("),l+h.join()+")";},toHexString:function(n){var h=this._rgba.slice(),l=h.pop();return n&&h.push(~~(255*l)),"#"+E.map(h,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e;}).join("");},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString();}}),x.fn.parse.prototype=x.fn,B.hsla.to=function(P){if(null==P[0]||null==P[1]||null==P[2]){return[null,null,null,P[3]];}var L,J,R=P[0]/255,H=P[1]/255,G=P[2]/255,N=P[3],p=Math.max(R,H,G),I=Math.min(R,H,G),K=p-I,M=p+I,O=0.5*M;return L=I===p?0:R===p?60*(H-G)/K+360:H===p?60*(G-R)/K+120:60*(R-H)/K+240,J=0===K?0:0.5>=O?K/M:K/(2-M),[Math.round(L)%360,J,O,null==N?1:N];},B.hsla.from=function(n){if(null==n[0]||null==n[1]||null==n[2]){return[null,null,null,n[3]];}var G=n[0]/360,l=n[1],p=n[2],H=n[3],h=0.5>=p?p*(1+l):p+l-p*l,u=2*p-h;return[Math.round(255*q(u,h,G+1/3)),Math.round(255*q(u,h,G)),Math.round(255*q(u,h,G-1/3)),H];},y(B,function(i,t){var p=t.props,h=t.cache,e=t.to,r=t.from;x.fn[i]=function(o){if(e&&!this[h]&&(this[h]=e(this._rgba)),o===z){return this[h].slice();}var I,G=E.type(o),l="array"===G||"object"===G?o:arguments,H=this[h].slice();return y(p,function(n,J){var u=l["object"===G?n:J.idx];null==u&&(u=H[J.idx]),H[J.idx]=w(u,J);}),r?(I=x(r(H)),I[h]=H,I):x(H);},y(p,function(n,l){x.fn[n]||(x.fn[n]=function(K){var I,G=E.type(K),u="alpha"===n?this._hsla?"hsla":"rgba":i,H=this[u](),J=H[l.idx];return"undefined"===G?J:("function"===G&&(K=K.call(this,J),G=E.type(K)),null==K&&l.empty?this:("string"===G&&(I=j.exec(K),I&&(K=J+parseFloat(I[2])*("+"===I[1]?1:-1))),H[l.idx]=K,this[u](H)));});});}),x.hook=function(l){var h=l.split(" ");y(h,function(o,n){E.cssHooks[n]={set:function(u,H){var G,p,t="";if("transparent"!==H&&("string"!==E.type(H)||(G=F(H)))){if(H=x(G||H),!A.rgba&&1!==H._rgba[3]){for(p="backgroundColor"===n?u.parentNode:u;(""===t||"transparent"===t)&&p&&p.style;){try{t=E.css(p,"backgroundColor"),p=p.parentNode;}catch(i){}}H=H.blend(t&&"transparent"!==t?t:"_default");}H=H.toRgbaString();}try{u.style[n]=H;}catch(i){}}},E.fx.step[n]=function(i){i.colorInit||(i.start=x(i.elem,n),i.end=x(i.end),i.colorInit=!0),E.cssHooks[n].set(i.elem,i.start.transition(i.end,i.pos));};});},x.hook(C),E.cssHooks.borderColor={expand:function(h){var i={};return y(["Top","Right","Bottom","Left"],function(e,l){i["border"+l+"Color"]=h;}),i;}},m=E.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"};}(g),function(){function k(q){var m,p,t=q.ownerDocument.defaultView?q.ownerDocument.defaultView.getComputedStyle(q,null):q.currentStyle,r={};if(t&&t.length&&t[0]&&t[t[0]]){for(p=t.length;p--;){m=t[p],"string"==typeof t[m]&&(r[b.camelCase(m)]=t[m]);}}else{for(m in t){"string"==typeof t[m]&&(r[m]=t[m]);}}return r;}function h(q,o){var p,r,m={};for(p in o){r=o[p],q[p]!==r&&(l[p]||(b.fx.step[p]||!isNaN(parseFloat(r)))&&(m[p]=r));}return m;}var j=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};b.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(n,m){b.fx.step[m]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(g.style(e.elem,m,e.end),e.setAttr=!0);};}),b.fn.addBack||(b.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e));}),b.effects.animateClass=function(q,p,i,m){var e=b.speed(p,i,m);return this.queue(function(){var v,n=b(this),u=n.attr("class")||"",t=e.children?n.find("*").addBack():n;t=t.map(function(){var o=b(this);return{el:o,start:k(this)};}),v=function(){b.each(j,function(o,r){q[r]&&n[r+"Class"](q[r]);});},v(),t=t.map(function(){return this.end=k(this.el[0]),this.diff=h(this.start,this.end),this;}),n.attr("class",u),t=t.map(function(){var w=this,o=b.Deferred(),r=b.extend({},e,{queue:!1,complete:function(){o.resolve(w);}});return this.el.animate(this.diff,r),o.promise();}),b.when.apply(b,t.get()).done(function(){v(),b.each(arguments,function(){var o=this.el;b.each(this.diff,function(r){o.css(r,"");});}),e.complete.call(n[0]);});});},b.fn.extend({addClass:function(i){return function(e,m,q,p){return m?b.effects.animateClass.call(this,{add:e},m,q,p):i.apply(this,arguments);};}(b.fn.addClass),removeClass:function(i){return function(e,m,q,p){return arguments.length>1?b.effects.animateClass.call(this,{remove:e},m,q,p):i.apply(this,arguments);};}(b.fn.removeClass),toggleClass:function(i){return function(m,p,r,q,e){return"boolean"==typeof p||void 0===p?r?b.effects.animateClass.call(this,p?{add:m}:{remove:m},r,q,e):i.apply(this,arguments):b.effects.animateClass.call(this,{toggle:m},p,r,q);};}(b.fn.toggleClass),switchClass:function(q,m,p,t,r){return b.effects.animateClass.call(this,{add:m,remove:q},p,t,r);}});}(),function(){function i(l,j,k,m){return b.isPlainObject(l)&&(j=l,l=l.effect),l={effect:l},null==j&&(j={}),b.isFunction(j)&&(m=j,k=null,j={}),("number"==typeof j||b.fx.speeds[j])&&(m=k,k=j,j={}),b.isFunction(k)&&(m=k,k=null),j&&b.extend(l,j),k=k||j.duration,l.duration=b.fx.off?0:"number"==typeof k?k:k in b.fx.speeds?b.fx.speeds[k]:b.fx.speeds._default,l.complete=m||j.complete,l;}function h(j){return !j||"number"==typeof j||b.fx.speeds[j]?!0:"string"!=typeof j||b.effects.effect[j]?b.isFunction(j)?!0:"object"!=typeof j||j.effect?!1:!0:!0;}function e(k,m){var j=m.outerWidth(),l=m.outerHeight(),q=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,p=q.exec(k)||["",0,j,l,0];return{top:parseFloat(p[1])||0,right:"auto"===p[2]?j:parseFloat(p[2]),bottom:"auto"===p[3]?l:parseFloat(p[3]),left:parseFloat(p[4])||0};}b.expr&&b.expr.filters&&b.expr.filters.animated&&(b.expr.filters.animated=function(j){return function(k){return !!b(k).data(c)||j(k);};}(b.expr.filters.animated)),b.uiBackCompat!==!1&&b.extend(b.effects,{save:function(k,j){for(var l=0,m=j.length;m>l;l++){null!==j[l]&&k.data(d+j[l],k[0].style[j[l]]);}},restore:function(k,j){for(var l,p=0,m=j.length;m>p;p++){null!==j[p]&&(l=k.data(d+j[p]),k.css(j[p],l));}},setMode:function(j,k){return"toggle"===k&&(k=j.is(":hidden")?"show":"hide"),k;},createWrapper:function(m){if(m.parent().is(".ui-effects-wrapper")){return m.parent();}var k={width:m.outerWidth(!0),height:m.outerHeight(!0),"float":m.css("float")},l=b("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),q={width:m.width(),height:m.height()},p=document.activeElement;try{p.id;}catch(j){p=document.body;}return m.wrap(l),(m[0]===p||b.contains(m[0],p))&&b(p).trigger("focus"),l=m.parent(),"static"===m.css("position")?(l.css({position:"relative"}),m.css({position:"relative"})):(b.extend(k,{position:m.css("position"),zIndex:m.css("z-index")}),b.each(["top","left","bottom","right"],function(n,o){k[o]=m.css(o),isNaN(parseInt(k[o],10))&&(k[o]="auto");}),m.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),m.css(q),l.css(k).show();},removeWrapper:function(k){var j=document.activeElement;return k.parent().is(".ui-effects-wrapper")&&(k.parent().replaceWith(k),(k[0]===j||b.contains(k[0],j))&&b(j).trigger("focus")),k;}}),b.extend(b.effects,{version:"1.12.1",define:function(l,j,k){return k||(k=j,j="effect"),b.effects.effect[l]=k,b.effects.effect[l].mode=j,k;},scaledDimensions:function(k,m,j){if(0===m){return{height:0,width:0,outerHeight:0,outerWidth:0};}var l="horizontal"!==j?(m||100)/100:1,o="vertical"!==j?(m||100)/100:1;return{height:k.height()*o,width:k.width()*l,outerHeight:k.outerHeight()*o,outerWidth:k.outerWidth()*l};},clipToBox:function(j){return{width:j.clip.right-j.clip.left,height:j.clip.bottom-j.clip.top,left:j.clip.left,top:j.clip.top};},unshift:function(k,m,j){var l=k.queue();m>1&&l.splice.apply(l,[1,0].concat(l.splice(m,j))),k.dequeue();},saveStyle:function(j){j.data(a,j[0].style.cssText);},restoreStyle:function(j){j[0].style.cssText=j.data(a)||"",j.removeData(a);},mode:function(k,l){var j=k.is(":hidden");return"toggle"===l&&(l=j?"show":"hide"),(j?"hide"===l:"show"===l)&&(l="none"),l;},getBaseline:function(k,m){var j,l;switch(k[0]){case"top":j=0;break;case"middle":j=0.5;break;case"bottom":j=1;break;default:j=k[0]/m.height;}switch(k[1]){case"left":l=0;break;case"center":l=0.5;break;case"right":l=1;break;default:l=k[1]/m.width;}return{x:l,y:j};},createPlaceholder:function(j){var k,m=j.css("position"),l=j.position();return j.css({marginTop:j.css("marginTop"),marginBottom:j.css("marginBottom"),marginLeft:j.css("marginLeft"),marginRight:j.css("marginRight")}).outerWidth(j.outerWidth()).outerHeight(j.outerHeight()),/^(static|relative)/.test(m)&&(m="absolute",k=b("<"+j[0].nodeName+">").insertAfter(j).css({display:/^(inline|ruby)/.test(j.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:j.css("marginTop"),marginBottom:j.css("marginBottom"),marginLeft:j.css("marginLeft"),marginRight:j.css("marginRight"),"float":j.css("float")}).outerWidth(j.outerWidth()).outerHeight(j.outerHeight()).addClass("ui-effects-placeholder"),j.data(d+"placeholder",k)),j.css({position:m,left:l.left,top:l.top}),k;},removePlaceholder:function(k){var j=d+"placeholder",l=k.data(j);l&&(l.remove(),k.removeData(j));},cleanUp:function(j){b.effects.restoreStyle(j),b.effects.removePlaceholder(j);},setTransition:function(l,j,k,m){return m=m||{},b.each(j,function(p,n){var q=l.cssUnit(n);q[0]>0&&(m[n]=q[0]*k+q[1]);}),m;}}),b.fn.extend({effect:function(){function q(y){function z(){o.removeData(c),b.effects.cleanUp(o),"hide"===n.mode&&o.hide(),u();}function u(){b.isFunction(p)&&p.call(o[0]),b.isFunction(y)&&y();}var o=b(this);n.mode=x.shift(),b.uiBackCompat===!1||w?"none"===n.mode?(o[v](),u()):k.call(o[0],n,z):(o.is(":hidden")?"hide"===v:"show"===v)?(o[v](),u()):k.call(o[0],n,u);}var n=i.apply(this,arguments),k=b.effects.effect[n.effect],w=k.mode,j=n.queue,m=j||"fx",p=n.complete,v=n.mode,x=[],t=function(o){var l=b(this),r=b.effects.mode(l,v)||w;l.data(c,!0),x.push(r),w&&("show"===r||r===w&&"hide"===r)&&l.show(),w&&"none"===r||b.effects.saveStyle(l),b.isFunction(o)&&o();};return b.fx.off||!k?v?this[v](n.duration,p):this.each(function(){p&&p.call(this);}):j===!1?this.each(t).each(q):this.queue(m,t).queue(m,q);},show:function(j){return function(l){if(h(l)){return j.apply(this,arguments);}var k=i.apply(this,arguments);return k.mode="show",this.effect.call(this,k);};}(b.fn.show),hide:function(j){return function(l){if(h(l)){return j.apply(this,arguments);}var k=i.apply(this,arguments);return k.mode="hide",this.effect.call(this,k);};}(b.fn.hide),toggle:function(j){return function(l){if(h(l)||"boolean"==typeof l){return j.apply(this,arguments);}var k=i.apply(this,arguments);return k.mode="toggle",this.effect.call(this,k);};}(b.fn.toggle),cssUnit:function(l){var j=this.css(l),k=[];return b.each(["em","px","%","pt"],function(m,n){j.indexOf(n)>0&&(k=[parseFloat(j),n]);}),k;},cssClip:function(j){return j?this.css("clip","rect("+j.top+"px "+j.right+"px "+j.bottom+"px "+j.left+"px)"):e(this.css("clip"),this);},transfer:function(v,q){var A=b(this),m=b(v.to),k="fixed"===m.css("position"),y=b("body"),j=k?y.scrollTop():0,p=k?y.scrollLeft():0,t=m.offset(),x={top:t.top-j,left:t.left-p,height:m.innerHeight(),width:m.innerWidth()},z=A.offset(),w=b("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(v.className).css({top:z.top-j,left:z.left-p,height:A.innerHeight(),width:A.innerWidth(),position:k?"fixed":"absolute"}).animate(x,v.duration,v.easing,function(){w.remove(),b.isFunction(q)&&q();});}}),b.fx.step.clip=function(j){j.clipInit||(j.start=b(j.elem).cssClip(),"string"==typeof j.end&&(j.end=e(j.end,j.elem)),j.clipInit=!0),b(j.elem).cssClip({top:j.pos*(j.end.top-j.start.top)+j.start.top,right:j.pos*(j.end.right-j.start.right)+j.start.right,bottom:j.pos*(j.end.bottom-j.start.bottom)+j.start.bottom,left:j.pos*(j.end.left-j.start.left)+j.start.left});};}(),function(){var h={};b.each(["Quad","Cubic","Quart","Quint","Expo"],function(j,e){h[e]=function(i){return Math.pow(i,j+2);};}),b.extend(h,{Sine:function(e){return 1-Math.cos(e*Math.PI/2);},Circ:function(e){return 1-Math.sqrt(1-e*e);},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15);},Back:function(e){return e*e*(3*e-2);},Bounce:function(k){for(var l,j=4;((l=Math.pow(2,--j))-1)/11>k;){}return 1/Math.pow(4,3-j)-7.5625*Math.pow((3*l-2)/22-k,2);}}),b.each(h,function(k,j){b.easing["easeIn"+k]=j,b.easing["easeOut"+k]=function(e){return 1-j(1-e);},b.easing["easeInOut"+k]=function(e){return 0.5>e?j(2*e)/2:1-j(-2*e+2)/2;};});}();var f=b.effects;b.effects.define("blind","hide",function(q,k){var m={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},u=b(this),t=q.direction||"up",j=u.cssClip(),p={clip:b.extend({},j)},h=b.effects.createPlaceholder(u);p.clip[m[t][0]]=p.clip[m[t][1]],"show"===q.mode&&(u.cssClip(p.clip),h&&h.css(b.effects.clipToBox(p)),p.clip=j),h&&h.animate(b.effects.clipToBox(p),q.duration,q.easing),u.animate(p,{queue:!1,duration:q.duration,easing:q.easing,complete:k});}),b.effects.define("bounce",function(F,B){var q,y,x,J=b(this),t=F.mode,A="hide"===t,C="show"===t,H=F.direction||"up",k=F.distance,G=F.times||5,w=2*G+(C||A?1:0),E=F.duration/w,D=F.easing,z="up"===H||"down"===H?"top":"left",K="up"===H||"left"===H,j=0,I=J.queue().length;for(b.effects.createPlaceholder(J),x=J.css(z),k||(k=J["top"===z?"outerHeight":"outerWidth"]()/3),C&&(y={opacity:1},y[z]=x,J.css("opacity",0).css(z,K?2*-k:2*k).animate(y,E,D)),A&&(k/=Math.pow(2,G-1)),y={},y[z]=x;G>j;j++){q={},q[z]=(K?"-=":"+=")+k,J.animate(q,E,D).animate(y,E,D),k=A?2*k:k/2;}A&&(q={opacity:0},q[z]=(K?"-=":"+=")+k,J.animate(q,E,D)),J.queue(B),b.effects.unshift(J,I,w+1);}),b.effects.define("clip","hide",function(u,q){var w,m={},k=b(this),v=u.direction||"vertical",j="both"===v,p=j||"horizontal"===v,t=j||"vertical"===v;w=k.cssClip(),m.clip={top:t?(w.bottom-w.top)/2:w.top,right:p?(w.right-w.left)/2:w.right,bottom:t?(w.bottom-w.top)/2:w.bottom,left:p?(w.right-w.left)/2:w.left},b.effects.createPlaceholder(k),"show"===u.mode&&(k.cssClip(m.clip),m.clip=w),k.animate(m,{queue:!1,duration:u.duration,easing:u.easing,complete:q});}),b.effects.define("drop","hide",function(v,q){var z,m=b(this),k=v.mode,x="show"===k,j=v.direction||"left",p="up"===j||"down"===j?"top":"left",t="up"===j||"left"===j?"-=":"+=",w="+="===t?"-=":"+=",y={opacity:0};b.effects.createPlaceholder(m),z=v.distance||m["top"===p?"outerHeight":"outerWidth"](!0)/2,y[p]=t+z,x&&(m.css(y),y[p]=w+z,y.opacity=1),m.animate(y,{queue:!1,duration:v.duration,easing:v.easing,complete:q});}),b.effects.define("explode","hide",function(F,B){function q(){I.push(this),I.length===k*G&&y();}function y(){w.css({visibility:"visible"}),b(I).remove(),B();}var x,J,t,A,C,H,k=F.pieces?Math.round(Math.sqrt(F.pieces)):3,G=k,w=b(this),E=F.mode,D="show"===E,z=w.show().css("visibility","hidden").offset(),K=Math.ceil(w.outerWidth()/G),j=Math.ceil(w.outerHeight()/k),I=[];for(x=0;k>x;x++){for(A=z.top+x*j,H=x-(k-1)/2,J=0;G>J;J++){t=z.left+J*K,C=J-(G-1)/2,w.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-J*K,top:-x*j}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:K,height:j,left:t+(D?C*K:0),top:A+(D?H*j:0),opacity:D?0:1}).animate({left:t+(D?0:C*K),top:A+(D?0:H*j),opacity:D?1:0},F.duration||500,F.easing,q);}}}),b.effects.define("fade","toggle",function(k,h){var j="show"===k.mode;b(this).css("opacity",j?0:1).animate({opacity:j?1:0},{queue:!1,duration:k.duration,easing:k.easing,complete:h});}),b.effects.define("fold","hide",function(B,x){var H=b(this),t=B.mode,q="show"===t,E="hide"===t,j=B.size||15,w=/([0-9]+)%/.exec(j),y=!!B.horizFirst,D=y?["right","bottom"]:["bottom","right"],G=B.duration/2,C=b.effects.createPlaceholder(H),k=H.cssClip(),A={clip:b.extend({},k)},z={clip:b.extend({},k)},v=[k[D[0]],k[D[1]]],F=H.queue().length;w&&(j=parseInt(w[1],10)/100*v[E?0:1]),A.clip[D[0]]=j,z.clip[D[0]]=j,z.clip[D[1]]=0,q&&(H.cssClip(z.clip),C&&C.css(b.effects.clipToBox(z)),z.clip=k),H.queue(function(e){C&&C.animate(b.effects.clipToBox(A),G,B.easing).animate(b.effects.clipToBox(z),G,B.easing),e();}).animate(A,G,B.easing).animate(z,G,B.easing).queue(x),b.effects.unshift(H,F,4);}),b.effects.define("highlight","show",function(k,h){var j=b(this),l={backgroundColor:j.css("backgroundColor")};"hide"===k.mode&&(l.opacity=0),b.effects.saveStyle(j),j.css({backgroundImage:"none",backgroundColor:k.color||"#ffff99"}).animate(l,{queue:!1,duration:k.duration,easing:k.easing,complete:h});}),b.effects.define("size",function(F,B){var q,y,x,I=b(this),t=["fontSize"],A=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],C=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],H=F.mode,k="effect"!==H,G=F.scale||"both",w=F.origin||["middle","center"],E=I.css("position"),D=I.position(),z=b.effects.scaledDimensions(I),J=F.from||z,j=F.to||b.effects.scaledDimensions(I,0);b.effects.createPlaceholder(I),"show"===H&&(x=J,J=j,j=x),y={from:{y:J.height/z.height,x:J.width/z.width},to:{y:j.height/z.height,x:j.width/z.width}},("box"===G||"both"===G)&&(y.from.y!==y.to.y&&(J=b.effects.setTransition(I,A,y.from.y,J),j=b.effects.setTransition(I,A,y.to.y,j)),y.from.x!==y.to.x&&(J=b.effects.setTransition(I,C,y.from.x,J),j=b.effects.setTransition(I,C,y.to.x,j))),("content"===G||"both"===G)&&y.from.y!==y.to.y&&(J=b.effects.setTransition(I,t,y.from.y,J),j=b.effects.setTransition(I,t,y.to.y,j)),w&&(q=b.effects.getBaseline(w,z),J.top=(z.outerHeight-J.outerHeight)*q.y+D.top,J.left=(z.outerWidth-J.outerWidth)*q.x+D.left,j.top=(z.outerHeight-j.outerHeight)*q.y+D.top,j.left=(z.outerWidth-j.outerWidth)*q.x+D.left),I.css(J),("content"===G||"both"===G)&&(A=A.concat(["marginTop","marginBottom"]).concat(t),C=C.concat(["marginLeft","marginRight"]),I.find("*[width]").each(function(){var h=b(this),l=b.effects.scaledDimensions(h),m={height:l.height*y.from.y,width:l.width*y.from.x,outerHeight:l.outerHeight*y.from.y,outerWidth:l.outerWidth*y.from.x},e={height:l.height*y.to.y,width:l.width*y.to.x,outerHeight:l.height*y.to.y,outerWidth:l.width*y.to.x};y.from.y!==y.to.y&&(m=b.effects.setTransition(h,A,y.from.y,m),e=b.effects.setTransition(h,A,y.to.y,e)),y.from.x!==y.to.x&&(m=b.effects.setTransition(h,C,y.from.x,m),e=b.effects.setTransition(h,C,y.to.x,e)),k&&b.effects.saveStyle(h),h.css(m),h.animate(e,F.duration,F.easing,function(){k&&b.effects.restoreStyle(h);});})),I.animate(j,{queue:!1,duration:F.duration,easing:F.easing,complete:function(){var h=I.offset();0===j.opacity&&I.css("opacity",J.opacity),k||(I.css("position","static"===E?"relative":E).offset(h),b.effects.saveStyle(I)),B();}});}),b.effects.define("scale",function(l,j){var k=b(this),p=l.mode,m=parseInt(l.percent,10)||(0===parseInt(l.percent,10)?0:"effect"!==p?0:100),h=b.extend(!0,{from:b.effects.scaledDimensions(k),to:b.effects.scaledDimensions(k,m,l.direction||"both"),origin:l.origin||["middle","center"]},l);l.fade&&(h.from.opacity=1,h.to.opacity=0),b.effects.effect.size.call(this,h,j);}),b.effects.define("puff","hide",function(k,h){var j=b.extend(!0,{},k,{fade:!0,percent:parseInt(k.percent,10)||150});b.effects.effect.scale.call(this,j,h);}),b.effects.define("pulsate","show",function(v,q){var A=b(this),m=v.mode,k="show"===m,y="hide"===m,j=k||y,p=2*(v.times||5)+(j?1:0),t=v.duration/p,x=0,z=1,w=A.queue().length;for((k||!A.is(":visible"))&&(A.css("opacity",0).show(),x=1);p>z;z++){A.animate({opacity:x},t,v.easing),x=1-x;}A.animate({opacity:x},t,v.easing),A.queue(q),b.effects.unshift(A,w,p+1);}),b.effects.define("shake",function(z,v){var E=1,q=b(this),m=z.direction||"left",C=z.distance||20,j=z.times||3,t=2*j+1,w=Math.round(z.duration/t),B="up"===m||"down"===m?"top":"left",D="up"===m||"left"===m,A={},k={},y={},x=q.queue().length;for(b.effects.createPlaceholder(q),A[B]=(D?"-=":"+=")+C,k[B]=(D?"+=":"-=")+2*C,y[B]=(D?"-=":"+=")+2*C,q.animate(A,w,z.easing);j>E;E++){q.animate(k,w,z.easing).animate(y,w,z.easing);}q.animate(k,w,z.easing).animate(A,w/2,z.easing).queue(v),b.effects.unshift(q,x,t+1);}),b.effects.define("slide","show",function(v,q){var A,m,k=b(this),y={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},j=v.mode,p=v.direction||"left",t="up"===p||"down"===p?"top":"left",x="up"===p||"left"===p,z=v.distance||k["top"===t?"outerHeight":"outerWidth"](!0),w={};b.effects.createPlaceholder(k),A=k.cssClip(),m=k.position()[t],w[t]=(x?-1:1)*z+m,w.clip=k.cssClip(),w.clip[y[p][1]]=w.clip[y[p][0]],"show"===j&&(k.cssClip(w.clip),k.css(t,w[t]),w.clip=A,w[t]=m),k.animate(w,{queue:!1,duration:v.duration,easing:v.easing,complete:q});});var f;b.uiBackCompat!==!1&&(f=b.effects.define("transfer",function(j,h){b(this).transfer(j,h);}));});(function(c,b,a,d){Foundation.libs.tooltip={name:"tooltip",version:"5.3.1",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:false,hover_delay:200,show_on:"all",tip_template:function(e,f){return'<span data-selector="'+e+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+f+'<span class="nub"></span></span>';}},cache:{},init:function(f,g,e){Foundation.inherit(this,"random_str");this.bindings(g,e);},should_show:function(g,f){var e=c.extend({},this.settings,this.data_options(g));if(e.show_on==="all"){return true;}else{if(this.small()&&e.show_on==="small"){return true;}else{if(this.medium()&&e.show_on==="medium"){return true;}else{if(this.large()&&e.show_on==="large"){return true;}}}}return false;},medium:function(){return matchMedia(Foundation.media_queries.medium).matches;},large:function(){return matchMedia(Foundation.media_queries.large).matches;},events:function(e){var f=this,g=f.S;f.create(this.S(e));c(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(k){var j=g(this),i=c.extend({},f.settings,f.data_options(j)),h=false;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)&&g(k.target).is("a")){return false;}if(/mouse/i.test(k.type)&&f.ie_touch(k)){return false;}if(j.hasClass("open")){if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){k.preventDefault();}f.hide(j);}else{if(i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){return;}else{if(!i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(k.type)){k.preventDefault();g(i.tooltip_class+".open").hide();h=true;}}if(/enter|over/i.test(k.type)){this.timer=setTimeout(function(){var l=f.showTip(j);}.bind(this),f.settings.hover_delay);}else{if(k.type==="mouseout"||k.type==="mouseleave"){clearTimeout(this.timer);f.hide(j);}else{f.showTip(j);}}}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(h){if(/mouse/i.test(h.type)&&f.ie_touch(h)){return false;}if(c(this).data("tooltip-open-event-type")=="touch"&&h.type=="mouseleave"){return;}else{if(c(this).data("tooltip-open-event-type")=="mouse"&&/MSPointerDown|touchstart/i.test(h.type)){f.convert_to_touch(c(this));}else{f.hide(c(this));}}}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(h){f.hide(g(this));});},ie_touch:function(f){return false;},showTip:function(e){var f=this.getTip(e);if(this.should_show(e,f)){return this.show(e);}return;},getTip:function(f){var e=this.selector(f),g=c.extend({},this.settings,this.data_options(f)),h=null;if(e){h=this.S('span[data-selector="'+e+'"]'+g.tooltip_class);}return(typeof h==="object")?h:false;},selector:function(e){var g=e.attr("id"),f=e.attr(this.attr_name())||e.attr("data-selector");if((g&&g.length<1||!g)&&typeof f!="string"){f=this.random_str(6);e.attr("data-selector",f);}return(g&&g.length>0)?g:f;},create:function(e){var g=this,i=c.extend({},this.settings,this.data_options(e)),f=this.settings.tip_template;if(typeof i.tip_template==="string"&&b.hasOwnProperty(i.tip_template)){f=b[i.tip_template];}var j=c(f(this.selector(e),c("<div></div>").html(e.attr("title")).html())),h=this.inheritable_classes(e);j.addClass(h).appendTo(i.append_to);if(Modernizr.touch){j.append('<span class="tap-to-close">'+i.touch_close_text+"</span>");j.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(k){g.hide(e);});}e.removeAttr("title").attr("title","");},reposition:function(j,m,h){var e,n,l,i,g,k;m.css("visibility","hidden").show();e=j.data("width");n=m.children(".nub");l=n.outerHeight();i=n.outerHeight();if(this.small()){m.css({width:"100%"});}else{m.css({width:(e)?e:"auto"});}k=function(u,t,p,o,r,q){return u.css({top:(t)?t:"auto",bottom:(o)?o:"auto",left:(r)?r:"auto",right:(p)?p:"auto"}).end();};k(m,(j.offset().top+j.outerHeight()+10),"auto","auto",j.offset().left);if(this.small()){k(m,(j.offset().top+j.outerHeight()+10),"auto","auto",12.5,c(this.scope).width());m.addClass("tip-override");k(n,-l,"auto","auto",j.offset().left);}else{var f=j.offset().left;if(Foundation.rtl){n.addClass("rtl");f=j.offset().left+j.outerWidth()-m.outerWidth();}k(m,(j.offset().top+j.outerHeight()+10),"auto","auto",f);m.removeClass("tip-override");if(h&&h.indexOf("tip-top")>-1){if(Foundation.rtl){n.addClass("rtl");}k(m,(j.offset().top-m.outerHeight()),"auto","auto",f).removeClass("tip-override");}else{if(h&&h.indexOf("tip-left")>-1){k(m,(j.offset().top+(j.outerHeight()/2)-(m.outerHeight()/2)),"auto","auto",(j.offset().left-m.outerWidth()-l)).removeClass("tip-override");n.removeClass("rtl");}else{if(h&&h.indexOf("tip-right")>-1){k(m,(j.offset().top+(j.outerHeight()/2)-(m.outerHeight()/2)),"auto","auto",(j.offset().left+j.outerWidth()+l)).removeClass("tip-override");n.removeClass("rtl");}}}}m.css("visibility","visible").hide();},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches;},inheritable_classes:function(e){var h=c.extend({},this.settings,this.data_options(e)),i=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(h.additional_inheritable_classes),g=e.attr("class"),f=g?c.map(g.split(" "),function(k,j){if(c.inArray(k,i)!==-1){return k;}}).join(" "):"";return c.trim(f);},convert_to_touch:function(e){var f=this,h=f.getTip(e),g=c.extend({},f.settings,f.data_options(e));if(h.find(".tap-to-close").length===0){h.append('<span class="tap-to-close">'+g.touch_close_text+"</span>");h.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(i){f.hide(e);});}e.data("tooltip-open-event-type","touch");},show:function(e){var f=this.getTip(e);if(e.data("tooltip-open-event-type")=="touch"){this.convert_to_touch(e);}this.reposition(e,f,e.attr("class"));e.addClass("open");f.fadeIn(150);},hide:function(e){var f=this.getTip(e);f.fadeOut(150,function(){f.find(".tap-to-close").remove();f.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose");e.removeClass("open");});},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip");this.S(this.settings.tooltip_class).each(function(f){c("["+e.attr_name()+"]").eq(f).attr("title",c(this).text());}).remove();},reflow:function(){}};}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.dropdown={name:"dropdown",version:"5.3.1",settings:{active_class:"open",align:"bottom",is_hover:false,opened:function(){},closed:function(){}},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e);},events:function(g){var e=this,f=e.S;f(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(i){var h=f(this).data(e.attr_name(true)+"-init")||e.settings;if(!h.is_hover||Modernizr.touch){i.preventDefault();e.toggle(c(this));}}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(k){var j=f(this),l,i;clearTimeout(e.timeout);if(j.data(e.data_attr())){l=f("#"+j.data(e.data_attr()));i=j;}else{l=j;i=f("["+e.attr_name()+"='"+l.attr("id")+"']");}var h=i.data(e.attr_name(true)+"-init")||e.settings;if(f(k.target).data(e.data_attr())&&h.is_hover){e.closeall.call(e);}if(h.is_hover){e.open.apply(e,[l,i]);}}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(i){var h=f(this);e.timeout=setTimeout(function(){if(h.data(e.data_attr())){var j=h.data(e.data_attr(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,f("#"+h.data(e.data_attr())));}}else{var k=f("["+e.attr_name()+'="'+f(this).attr("id")+'"]'),j=k.data(e.attr_name(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,h);}}}.bind(this),150);}).on("click.fndtn.dropdown",function(i){var h=f(i.target).closest("["+e.attr_name()+"-content]");if(f(i.target).data(e.data_attr())||f(i.target).parent().data(e.data_attr())){return;}if(!(f(i.target).data("revealId"))&&(h.length>0&&(f(i.target).is("["+e.attr_name()+"-content]")||c.contains(h.first()[0],i.target)))){i.stopPropagation();return;}e.close.call(e,f("["+e.attr_name()+"-content]"));}).on("opened.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.opened.call(this);}).on("closed.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.closed.call(this);});f(b).off(".dropdown").on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e);},50));this.resize();},close:function(f){var e=this;f.each(function(){if(e.S(this).hasClass(e.settings.active_class)){e.S(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.active_class).prev("["+e.attr_name()+"]").removeClass(e.settings.active_class).removeData("target");e.S(this).trigger("closed").trigger("closed.fndtn.dropdown",[f]);}});},closeall:function(){var e=this;c.each(e.S("["+this.attr_name()+"-content]"),function(){e.close.call(e,e.S(this));});},open:function(f,e){this.css(f.addClass(this.settings.active_class),e);f.prev("["+this.attr_name()+"]").addClass(this.settings.active_class);f.data("target",e.get(0)).trigger("opened").trigger("opened.fndtn.dropdown",[f,e]);},data_attr:function(){if(this.namespace.length>0){return this.namespace+"-"+this.name;}return this.name;},toggle:function(e){var f=this.S("#"+e.data(this.data_attr()));if(f.length===0){return;}this.close.call(this,this.S("["+this.attr_name()+"-content]").not(f));if(f.hasClass(this.settings.active_class)){this.close.call(this,f);if(f.data("target")!==e.get(0)){this.open.call(this,f,e);}}else{this.open.call(this,f,e);}},resize:function(){var f=this.S("["+this.attr_name()+"-content].open"),e=this.S("["+this.attr_name()+"='"+f.attr("id")+"']");if(f.length&&e.length){this.css(f,e);}},css:function(i,h){var e=Math.max((h.width()-i.width())/2,8);this.clear_idx();if(this.small()){var g=this.dirs.bottom.call(i,h);i.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:g.top});i.css(Foundation.rtl?"right":"left",e);}else{var f=h.data(this.attr_name(true)+"-init")||this.settings;this.style(i,h,f);}return i;},style:function(h,g,f){var e=c.extend({position:"absolute"},this.dirs[f.align].call(h,g,f));h.attr("style","").css(e);},dirs:{_base:function(e){var f=this.offsetParent(),h=f.offset(),g=e.offset();g.top-=h.top;g.left-=h.left;return g;},top:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=8;this.addClass("drop-top");if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h);}if(Foundation.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top-this.outerHeight()};}return{left:h.left,top:h.top-this.outerHeight()};},bottom:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=8;if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h);}if(e.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top+f.outerHeight()};}return{left:h.left,top:h.top+f.outerHeight()};},left:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-left");return{left:g.left-this.outerWidth(),top:g.top};},right:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-right");return{left:g.left+e.outerWidth(),top:g.top};}},adjust_pip:function(k,j){var f=Foundation.stylesheet;if(this.small()){k+=j.left-8;}this.rule_idx=f.cssRules.length;var h=".f-dropdown.open:before",g=".f-dropdown.open:after",e="left: "+k+"px;",i="left: "+(k-1)+"px;";if(f.insertRule){f.insertRule([h,"{",e,"}"].join(" "),this.rule_idx);f.insertRule([g,"{",i,"}"].join(" "),this.rule_idx+1);}else{f.addRule(h,e,this.rule_idx);f.addRule(g,i,this.rule_idx+1);}},clear_idx:function(){var e=Foundation.stylesheet;if(this.rule_idx){e.deleteRule(this.rule_idx);e.deleteRule(this.rule_idx);delete this.rule_idx;}},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches;},off:function(){this.S(this.scope).off(".fndtn.dropdown");this.S("html, body").off(".fndtn.dropdown");this.S(b).off(".fndtn.dropdown");this.S("[data-dropdown-content]").off(".fndtn.dropdown");},reflow:function(){}};}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.tab={name:"tab",version:"5.3.1",settings:{active_class:"active",callback:function(){},deep_linking:false,scroll_to_content:true,is_hover:false},default_tab_hashes:[],init:function(h,i,f){var e=this,g=this.S;this.bindings(i,f);this.handle_location_hash_change();g("["+this.attr_name()+"] > .active > a",this.scope).each(function(){e.default_tab_hashes.push(this.hash);});},events:function(){var e=this,f=this.S;f(this.scope).off(".tab").on("click.fndtn.tab","["+this.attr_name()+"] > * > a",function(h){var g=f(this).closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init");if(!g.is_hover||Modernizr.touch){h.preventDefault();h.stopPropagation();e.toggle_active_tab(f(this).parent());}}).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(h){var g=f(this).closest("["+e.attr_name()+"]").data(e.attr_name(true)+"-init");if(g.is_hover){e.toggle_active_tab(f(this).parent());}});f(b).on("hashchange.fndtn.tab",function(g){g.preventDefault();e.handle_location_hash_change();});},handle_location_hash_change:function(){var e=this,f=this.S;f("["+this.attr_name()+"]",this.scope).each(function(){var i=f(this).data(e.attr_name(true)+"-init");if(i.deep_linking){var k=e.scope.location.hash;if(k!=""){var h=f(k);if(h.hasClass("content")&&h.parent().hasClass("tab-content")){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href="+k+"]").parent());}else{var g=h.closest(".content").attr("id");if(g!=d){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href=#"+g+"]").parent(),k);}}}else{for(var j in e.default_tab_hashes){e.toggle_active_tab(c("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[j]+"]").parent());}}}});},toggle_active_tab:function(e,i){var g=this.S,l=e.closest("["+this.attr_name()+"]"),h=e.children("a").first(),n="#"+h.attr("href").split("#")[1],j=g(n),m=e.siblings(),f=l.data(this.attr_name(true)+"-init");if(g(this).data(this.data_attr("tab-content"))){n="#"+g(this).data(this.data_attr("tab-content")).split("#")[1];j=g(n);}if(f.deep_linking){var k=c("body,html").scrollTop();if(i!=d){b.location.hash=i;}else{b.location.hash=n;}if(f.scroll_to_content){if(i==d||i==n){e.parent()[0].scrollIntoView();}else{g(n)[0].scrollIntoView();}}else{if(i==d||i==n){c("body,html").scrollTop(k);}}}e.addClass(f.active_class).triggerHandler("opened");m.removeClass(f.active_class);j.siblings().removeClass(f.active_class).end().addClass(f.active_class);f.callback(e);j.triggerHandler("toggled",[e]);l.triggerHandler("toggled",[j]);},data_attr:function(e){if(this.namespace.length>0){return this.namespace+"-"+e;}return e;},off:function(){},reflow:function(){}};}(jQuery,window,window.document));(function(d,c,a,e){Foundation.libs.reveal={name:"reveal",version:"5.3.1",locked:false,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:true,close_on_esc:true,dismiss_modal_class:"close-reveal-modal",bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:d(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(g,h,f){d.extend(true,this.settings,h,f);this.bindings(h,f);},events:function(h){var f=this,g=f.S;g(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(l){l.preventDefault();if(!f.locked){var j=g(this),k=j.data(f.data_attr("reveal-ajax"));f.locked=true;if(typeof k==="undefined"){f.open.call(f,j);}else{var i=k===true?j.attr("href"):k;f.open.call(f,j,{url:i});}}});g(a).on("click.fndtn.reveal",this.close_targets(),function(j){j.preventDefault();if(!f.locked){var i=g("["+f.attr_name()+"].open").data(f.attr_name(true)+"-init"),k=g(j.target)[0]===g("."+i.bg_class)[0];if(k){if(i.close_on_background_click){j.stopPropagation();}else{return;}}f.locked=true;f.close.call(f,k?g("["+f.attr_name()+"].open"):g(this).closest("["+f.attr_name()+"]"));}});if(g("["+f.attr_name()+"]",this.scope).length>0){g(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video);}else{g(this.scope).on("open.fndtn.reveal","["+f.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+f.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+f.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+f.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+f.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+f.attr_name()+"]",this.close_video);}return true;},key_up_on:function(g){var f=this;f.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(j){var h=f.S("["+f.attr_name()+"].open"),i=h.data(f.attr_name(true)+"-init")||f.settings;if(i&&j.which===27&&i.close_on_esc&&!f.locked){f.close.call(f,h);}});return true;},key_up_off:function(f){this.S("body").off("keyup.fndtn.reveal");return true;},open:function(j,k){var g=this,i;d("body").css("overflow","hidden");if(j){if(typeof j.selector!=="undefined"){i=g.S("#"+j.data(g.data_attr("reveal-id"))).first();}else{i=g.S(this.scope);k=j;}}else{i=g.S(this.scope);}var h=i.data(g.attr_name(true)+"-init");h=h||this.settings;if(i.hasClass("open")&&j.attr("data-reveal-id")==i.attr("id")){return g.close(i);}if(!i.hasClass("open")){var f=g.S("["+g.attr_name()+"].open");if(typeof i.data("css-top")==="undefined"){i.data("css-top",parseInt(i.css("top"),10)).data("offset",this.cache_offset(i));}this.key_up_on(i);i.trigger("open").trigger("open.fndtn.reveal");if(f.length<1){this.toggle_bg(i,true);}if(typeof k==="string"){k={url:k};}if(typeof k==="undefined"||!k.url){if(f.length>0){this.hide(f,h.css.close);}this.show(i,h.css.open);}else{var l=typeof k.success!=="undefined"?k.success:null;d.extend(k,{success:function(n,o,m){if(d.isFunction(l)){l(n,o,m);}i.html(n);g.S(i).foundation("section","reflow");g.S(i).children().foundation();if(f.length>0){g.hide(f,h.css.close);}g.show(i,h.css.open);}});d.ajax(k);}}},close:function(h){var h=h&&h.length?h:this.S(this.scope),g=this.S("["+this.attr_name()+"].open"),f=h.data(this.attr_name(true)+"-init")||this.settings;d("body").css("overflow","scroll");if(g.length>0){this.locked=true;this.key_up_off(h);h.trigger("close").trigger("close.fndtn.reveal");this.toggle_bg(h,false);this.hide(g,f.css.close,f);}},close_targets:function(){var f="."+this.settings.dismiss_modal_class;if(this.settings.close_on_background_click){return f+", ."+this.settings.bg_class;}return f;},toggle_bg:function(f,g){if(this.S("."+this.settings.bg_class).length===0){this.settings.bg=d("<div />",{"class":this.settings.bg_class}).appendTo("body").hide();}var h=this.settings.bg.filter(":visible").length>0;if(g!=h){if(g==e?h:!g){this.hide(this.settings.bg);}else{this.show(this.settings.bg);}}},show:function(k,i){if(i){var j=k.data(this.attr_name(true)+"-init")||this.settings,h=j.root_element;if(k.parent(h).length===0){var l=k.wrap('<div style="display: none;" />').parent();k.on("closed.fndtn.reveal.wrapped",function(){k.detach().appendTo(l);k.unwrap().unbind("closed.fndtn.reveal.wrapped");});k.detach().appendTo(h);}var g=b(j.animation);if(!g.animate){this.locked=false;}if(g.pop){i.top=d(c).scrollTop()-k.data("offset")+"px";var f={top:d(c).scrollTop(),opacity:1};return setTimeout(function(){return k.css(i).animate(f,j.animation_speed,"linear",function(){this.locked=false;k.trigger("opened").trigger("opened.fndtn.reveal");}.bind(this)).addClass("open");}.bind(this),j.animation_speed/2);}if(g.fade){i.top=d(c).scrollTop();var f={opacity:1};return setTimeout(function(){return k.css(i).animate(f,j.animation_speed,"linear",function(){this.locked=false;k.trigger("opened").trigger("opened.fndtn.reveal");}.bind(this)).addClass("open");}.bind(this),j.animation_speed/2);}return k.css(i).show().css({opacity:1}).addClass("open").trigger("opened").trigger("opened.fndtn.reveal");}var j=this.settings;if(b(j.animation).fade){return k.fadeIn(j.animation_speed/2);}this.locked=false;return k.show();},hide:function(j,h){if(h){var i=j.data(this.attr_name(true)+"-init");i=i||this.settings;var g=b(i.animation);if(!g.animate){this.locked=false;}if(g.pop){var f={top:-d(c).scrollTop()-j.data("offset")+"px",opacity:0};return setTimeout(function(){return j.animate(f,i.animation_speed,"linear",function(){this.locked=false;j.css(h).trigger("closed").trigger("closed.fndtn.reveal");}.bind(this)).removeClass("open");}.bind(this),i.animation_speed/2);}if(g.fade){var f={opacity:0};return setTimeout(function(){return j.animate(f,i.animation_speed,"linear",function(){this.locked=false;j.css(h).trigger("closed").trigger("closed.fndtn.reveal");}.bind(this)).removeClass("open");}.bind(this),i.animation_speed/2);}return j.hide().css(h).removeClass("open").trigger("closed").trigger("closed.fndtn.reveal");}var i=this.settings;if(b(i.animation).fade){return j.fadeOut(i.animation_speed/2);}return j.hide();},close_video:function(h){var g=d(".flex-video",h.target),f=d("iframe",g);if(f.length>0){f.attr("data-src",f[0].src);f.attr("src",f.attr("src"));g.hide();}},open_video:function(h){var g=d(".flex-video",h.target),f=g.find("iframe");if(f.length>0){var j=f.attr("data-src");if(typeof j==="string"){f[0].src=f.attr("data-src");}else{var i=f[0].src;f[0].src=e;f[0].src=i;}g.show();}},data_attr:function(f){if(this.namespace.length>0){return this.namespace+"-"+f;}return f;},cache_offset:function(f){var g=f.show().height()+parseInt(f.css("top"),10);f.hide();return g;},off:function(){d(this.scope).off(".fndtn.reveal");},reflow:function(){}};function b(h){var g=/fade/i.test(h);var f=/pop/i.test(h);return{animate:g||f,pop:f,fade:g};}}(jQuery,window,window.document));(function(c,b,a,d){Foundation.libs.slider={name:"slider",version:"5.5.3",settings:{start:0,end:100,step:1,precision:2,initial:null,display_selector:"",vertical:false,trigger_input_change:false,on_change:function(){}},cache:{},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e);this.reflow();},events:function(){var e=this;c(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+e.attr_name()+"]:not(.disabled, [disabled]) .range-slider-handle",function(f){if(!e.cache.active){f.preventDefault();e.set_active_slider(c(f.target));}}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(g){if(!!e.cache.active){g.preventDefault();if(c.data(e.cache.active[0],"settings").vertical){var f=0;if(!g.pageY){f=b.scrollY;}e.calculate_position(e.cache.active,e.get_cursor_position(g,"y")+f);}else{e.calculate_position(e.cache.active,e.get_cursor_position(g,"x"));}}}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(h){if(!e.cache.active){var g=c(h.target).attr("role")==="slider"?c(h.target):c(h.target).closest(".range-slider").find("[role='slider']");if(g.length&&(!g.parent().hasClass("disabled")&&!g.parent().attr("disabled"))){e.set_active_slider(g);if(c.data(e.cache.active[0],"settings").vertical){var f=0;if(!h.pageY){f=b.scrollY;}e.calculate_position(e.cache.active,e.get_cursor_position(h,"y")+f);}else{e.calculate_position(e.cache.active,e.get_cursor_position(h,"x"));}}}e.remove_active_slider();}).on("change.fndtn.slider",function(f){e.settings.on_change();});e.S(b).on("resize.fndtn.slider",e.throttle(function(f){e.reflow();},300));this.S("["+this.attr_name()+"]").each(function(){var g=c(this),h=g.children(".range-slider-handle")[0],f=e.initialize_settings(h);if(f.display_selector!=""){c(f.display_selector).each(function(){if(c(this).attr("value")){c(this).off("change").on("change",function(){g.foundation("slider","set_value",c(this).val());});}});}});},get_cursor_position:function(i,h){var j="page"+h.toUpperCase(),g="client"+h.toUpperCase(),f;if(typeof i[j]!=="undefined"){f=i[j];}else{if(typeof i.originalEvent[g]!=="undefined"){f=i.originalEvent[g];}else{if(i.originalEvent.touches&&i.originalEvent.touches[0]&&typeof i.originalEvent.touches[0][g]!=="undefined"){f=i.originalEvent.touches[0][g];}else{if(i.currentPoint&&typeof i.currentPoint[h]!=="undefined"){f=i.currentPoint[h];}}}}return f;},set_active_slider:function(e){this.cache.active=e;},remove_active_slider:function(){this.cache.active=null;},calculate_position:function(l,j){var f=this,h=c.data(l[0],"settings"),g=c.data(l[0],"handle_l"),e=c.data(l[0],"handle_o"),k=c.data(l[0],"bar_l"),i=c.data(l[0],"bar_o");requestAnimationFrame(function(){var n;if(Foundation.rtl&&!h.vertical){n=f.limit_to(((i+k-j)/k),0,1);}else{n=f.limit_to(((j-i)/k),0,1);}n=h.vertical?1-n:n;var m=f.normalized_value(n,h.start,h.end,h.step,h.precision);f.set_ui(l,m);});},set_ui:function(f,m){var i=c.data(f[0],"settings"),g=c.data(f[0],"handle_l"),h=c.data(f[0],"bar_l"),n=this.normalized_percentage(m,i.start,i.end),l=n*(h-g)-1,j=n*100,e=f.parent(),k=f.parent().children("input[type=hidden]");if(Foundation.rtl&&!i.vertical){l=-l;}l=i.vertical?-l+h-g+1:l;this.set_translate(f,l,i.vertical);if(i.vertical){f.siblings(".range-slider-active-segment").css("height",j+"%");}else{f.siblings(".range-slider-active-segment").css("width",j+"%");}e.attr(this.attr_name(),m).trigger("change.fndtn.slider");k.val(m);if(i.trigger_input_change){k.trigger("change.fndtn.slider");}if(!f[0].hasAttribute("aria-valuemin")){f.attr({"aria-valuemin":i.start,"aria-valuemax":i.end});}f.attr("aria-valuenow",m);if(i.display_selector!=""){c(i.display_selector).each(function(){if(this.hasAttribute("value")){c(this).val(m);}else{c(this).text(m);}});}},normalized_percentage:function(f,g,e){return Math.min(1,(f-g)/(e-g));},normalized_value:function(f,e,h,g,j){var i=h-e,l=f*i,k=(l-(l%g))/g,m=l%g,n=(m>=g*0.5?g:0);return((k*g+n)+e).toFixed(j);},set_translate:function(f,g,e){if(e){c(f).css("-webkit-transform","translateY("+g+"px)").css("-moz-transform","translateY("+g+"px)").css("-ms-transform","translateY("+g+"px)").css("-o-transform","translateY("+g+"px)").css("transform","translateY("+g+"px)");}else{c(f).css("-webkit-transform","translateX("+g+"px)").css("-moz-transform","translateX("+g+"px)").css("-ms-transform","translateX("+g+"px)").css("-o-transform","translateX("+g+"px)").css("transform","translateX("+g+"px)");}},limit_to:function(g,f,e){return Math.min(Math.max(g,f),e);},initialize_settings:function(g){var f=c.extend({},this.settings,this.data_options(c(g).parent())),e;if(f.precision===null){e=(""+f.step).match(/\.([\d]*)/);f.precision=e&&e[1]?e[1].length:0;}if(f.vertical){c.data(g,"bar_o",c(g).parent().offset().top);c.data(g,"bar_l",c(g).parent().outerHeight());c.data(g,"handle_o",c(g).offset().top);c.data(g,"handle_l",c(g).outerHeight());}else{c.data(g,"bar_o",c(g).parent().offset().left);c.data(g,"bar_l",c(g).parent().outerWidth());c.data(g,"handle_o",c(g).offset().left);c.data(g,"handle_l",c(g).outerWidth());}c.data(g,"bar",c(g).parent());return c.data(g,"settings",f);},set_initial_position:function(g){var f=c.data(g.children(".range-slider-handle")[0],"settings"),e=((typeof f.initial=="number"&&!isNaN(f.initial))?f.initial:Math.floor((f.end-f.start)*0.5/f.step)*f.step+f.start),h=g.children(".range-slider-handle");this.set_ui(h,e);},set_value:function(f){var e=this;c("["+e.attr_name()+"]",this.scope).each(function(){c(this).attr(e.attr_name(),f);});if(!!c(this.scope).attr(e.attr_name())){c(this.scope).attr(e.attr_name(),f);}e.reflow();},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var f=c(this).children(".range-slider-handle")[0],g=c(this).attr(e.attr_name());e.initialize_settings(f);if(g){e.set_ui(c(f),parseFloat(g));}else{e.set_initial_position(c(this));}});}};}(jQuery,window,window.document));
/*!
 * imagesLoaded PACKAGED v3.1.7
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
/*!
 * EventEmitter v4.2.6 - git.io/ee
 * Oliver Caldwell
 * MIT license
 * @preserve
 */
(function(){function c(){}var l=c.prototype;var w=this;var y=w.EventEmitter;function h(A,B){var z=A.length;while(z--){if(A[z].listener===B){return z;}}return -1;}function j(z){return function A(){return this[z].apply(this,arguments);};}l.getListeners=function u(z){var C=this._getEvents();var A;var B;if(typeof z==="object"){A={};for(B in C){if(C.hasOwnProperty(B)&&z.test(B)){A[B]=C[B];}}}else{A=C[z]||(C[z]=[]);}return A;};l.flattenListeners=function r(B){var z=[];var A;for(A=0;A<B.length;A+=1){z.push(B[A].listener);}return z;};l.getListenersAsObject=function e(z){var B=this.getListeners(z);var A;if(B instanceof Array){A={};A[z]=B;}return A||B;};l.addListener=function f(z,C){var B=this.getListenersAsObject(z);var D=typeof C==="object";var A;for(A in B){if(B.hasOwnProperty(A)&&h(B[A],C)===-1){B[A].push(D?C:{listener:C,once:false});}}return this;};l.on=j("addListener");l.addOnceListener=function a(z,A){return this.addListener(z,{listener:A,once:true});};l.once=j("addOnceListener");l.defineEvent=function p(z){this.getListeners(z);return this;};l.defineEvents=function q(z){for(var A=0;A<z.length;A+=1){this.defineEvent(z[A]);}return this;};l.removeListener=function b(z,D){var C=this.getListenersAsObject(z);var A;var B;for(B in C){if(C.hasOwnProperty(B)){A=h(C[B],D);if(A!==-1){C[B].splice(A,1);}}}return this;};l.off=j("removeListener");l.addListeners=function m(z,A){return this.manipulateListeners(false,z,A);};l.removeListeners=function t(z,A){return this.manipulateListeners(true,z,A);};l.manipulateListeners=function g(A,B,D){var C;var E;var F=A?this.removeListener:this.addListener;var z=A?this.removeListeners:this.addListeners;if(typeof B==="object"&&!(B instanceof RegExp)){for(C in B){if(B.hasOwnProperty(C)&&(E=B[C])){if(typeof E==="function"){F.call(this,C,E);}else{z.call(this,C,E);}}}}else{C=D.length;while(C--){F.call(this,B,D[C]);}}return this;};l.removeEvent=function o(z){var C=typeof z;var B=this._getEvents();var A;if(C==="string"){delete B[z];}else{if(C==="object"){for(A in B){if(B.hasOwnProperty(A)&&z.test(A)){delete B[A];}}}else{delete this._events;}}return this;};l.removeAllListeners=j("removeEvent");l.emitEvent=function v(z,B){var E=this.getListenersAsObject(z);var F;var D;var C;var A;for(C in E){if(E.hasOwnProperty(C)){D=E[C].length;while(D--){F=E[C][D];if(F.once===true){this.removeListener(z,F.listener);}A=F.listener.apply(this,B||[]);if(A===this._getOnceReturnValue()){this.removeListener(z,F.listener);}}}}return this;};l.trigger=j("emitEvent");l.emit=function k(z){var A=Array.prototype.slice.call(arguments,1);return this.emitEvent(z,A);};l.setOnceReturnValue=function i(z){this._onceReturnValue=z;return this;};l._getOnceReturnValue=function n(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue;}else{return true;}};l._getEvents=function d(){return this._events||(this._events={});};c.noConflict=function x(){w.EventEmitter=y;return c;};if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return c;});}else{if(typeof module==="object"&&module.exports){module.exports=c;}else{this.EventEmitter=c;}}}.call(this));
/*!
 * eventie v1.0.4
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 */
(function(e){var b=document.documentElement;var f=function(){};function a(h){var g=e.event;g.target=g.target||g.srcElement||h;return g;}if(b.addEventListener){f=function(i,h,g){i.addEventListener(h,g,false);};}else{if(b.attachEvent){f=function(i,h,g){i[h+g]=g.handleEvent?function(){var j=a(i);g.handleEvent.call(g,j);}:function(){var j=a(i);g.call(i,j);};i.attachEvent("on"+h,i[h+g]);};}}var d=function(){};if(b.removeEventListener){d=function(i,h,g){i.removeEventListener(h,g,false);};}else{if(b.detachEvent){d=function(j,h,g){j.detachEvent("on"+h,j[h+g]);try{delete j[h+g];}catch(i){j[h+g]=undefined;}};}}var c={bind:f,unbind:d};if(typeof define==="function"&&define.amd){define("eventie/eventie",c);}else{e.eventie=c;}})(this);
/*!
 * imagesLoaded v3.1.7
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(b,a){if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","eventie/eventie"],function(d,c){return a(b,d,c);});}else{if(typeof exports==="object"){module.exports=a(b,require("eventEmitter"),require("eventie"));}else{b.imagesLoaded=a(b,b.EventEmitter,b.eventie);}}})(window,function factory(i,m,l){var g=i.jQuery;var e=i.console;var c=typeof e!=="undefined";function j(p,o){for(var q in o){p[q]=o[q];}return p;}var n=Object.prototype.toString;function h(o){return n.call(o)==="[object Array]";}function d(r){var q=[];if(h(r)){q=r;}else{if(typeof r.length==="number"){for(var p=0,o=r.length;p<o;p++){q.push(r[p]);}}else{q.push(r);}}return q;}function f(q,p,o){if(!(this instanceof f)){return new f(q,p);}if(typeof q==="string"){q=document.querySelectorAll(q);}this.elements=d(q);this.options=j({},this.options);if(typeof p==="function"){o=p;}else{j(this.options,p);}if(o){this.on("always",o);}this.getImages();if(g){this.jqDeferred=new g.Deferred();}var r=this;setTimeout(function(){r.check();});}f.prototype=new m();f.prototype.options={};f.prototype.getImages=function(){this.images=[];for(var t=0,o=this.elements.length;t<o;t++){var u=this.elements[t];if(u.nodeName==="IMG"){this.addImage(u);}var p=u.nodeType;if(!p||!(p===1||p===9||p===11)){continue;}var w=u.querySelectorAll("img");for(var r=0,v=w.length;r<v;r++){var q=w[r];this.addImage(q);}}};f.prototype.addImage=function(o){var p=new k(o);this.images.push(p);};f.prototype.check=function(){var u=this;var p=0;var r=this.images.length;this.hasAnyBroken=false;if(!r){this.complete();return;}function q(w,v){if(u.options.debug&&c){e.log("confirm",w,v);}u.progress(w);p++;if(p===r){u.complete();}return true;}for(var o=0;o<r;o++){var t=this.images[o];t.on("confirm",q);t.check();}};f.prototype.progress=function(o){this.hasAnyBroken=this.hasAnyBroken||!o.isLoaded;var p=this;setTimeout(function(){p.emit("progress",p,o);if(p.jqDeferred&&p.jqDeferred.notify){p.jqDeferred.notify(p,o);}});};f.prototype.complete=function(){var o=this.hasAnyBroken?"fail":"done";this.isComplete=true;var p=this;setTimeout(function(){p.emit(o,p);p.emit("always",p);if(p.jqDeferred){var q=p.hasAnyBroken?"reject":"resolve";p.jqDeferred[q](p);}});};if(g){g.fn.imagesLoaded=function(p,q){var o=new f(this,p,q);return o.jqDeferred.promise(g(this));};}function k(o){this.img=o;}k.prototype=new m();k.prototype.check=function(){var o=b[this.img.src]||new a(this.img.src);if(o.isConfirmed){this.confirm(o.isLoaded,"cached was confirmed");return;}if(this.img.complete&&this.img.naturalWidth!==undefined){this.confirm(this.img.naturalWidth!==0,"naturalWidth");return;}var p=this;o.on("confirm",function(q,r){p.confirm(q.isLoaded,r);return true;});o.check();};k.prototype.confirm=function(o,p){this.isLoaded=o;this.emit("confirm",this,p);};var b={};function a(o){this.src=o;b[o]=this;}a.prototype=new m();a.prototype.check=function(){if(this.isChecked){return;}var o=new Image();l.bind(o,"load",this);l.bind(o,"error",this);o.src=this.src;this.isChecked=true;};a.prototype.handleEvent=function(o){var p="on"+o.type;if(this[p]){this[p](o);}};a.prototype.onload=function(o){this.confirm(true,"onload");this.unbindProxyEvents(o);};a.prototype.onerror=function(o){this.confirm(false,"onerror");this.unbindProxyEvents(o);};a.prototype.confirm=function(o,p){this.isConfirmed=true;this.isLoaded=o;this.emit("confirm",this,p);};a.prototype.unbindProxyEvents=function(o){l.unbind(o.target,"load",this);l.unbind(o.target,"error",this);};return f;});(function(b){var a;toggle_component={settings:{toggle_trigger:"[data-js-toggle=toggle_trigger]",toggle_target:"[data-js-toggle=toggle_target]",toggle_add:"[data-js-toggle=toggle_add]",speed:0},init:function(){this.toggle();},toggle:function(){a=this.settings;b(a.toggle_trigger).on("click",function(){b(this).siblings(a.toggle_trigger).addBack().toggle(a.speed);b(this).siblings(a.toggle_target).toggle(a.speed);b(this).siblings(a.toggle_add).toggle(a.speed);});}};})(jQuery);(function(a){truncate_elem={remove_overflowed:function(f){var e,g,d,b,c;g="&hellip;";d=a(f);b=[];e=a(d[0]).offset().top;d.children().each(function(){if(a(this).offset().top>e){b.push(this);return a(this).addClass("remove");}});c=b[0];a(c).prev().append(g);a(".remove").css("visibility","hidden");}};})(jQuery);(function(b){var a;tooltip_hover={settings:{hover_trigger:"[data-js-tooltip-hover=trigger]",hover_target:"[data-js-tooltip-hover=target]",class_trigger:"highlighted",class_target:"visible",class_shim:"shim"},init:function(){this.action();},action:function(){a=this.settings;b(a.hover_trigger).off("mouseenter mouseleave").mouseenter(function(){b(this).addClass(a.class_trigger).find(a.hover_target).addClass(a.class_target).before("<div class="+a.class_shim+"> </div>");}).mouseleave(function(){b(this).removeClass(a.class_trigger).find(a.hover_target).removeClass(a.class_target);b(".shim").remove();});}};})(jQuery);
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license. Basically that
 * means you are free to use hoverIntent as long as this header is left intact.
 * Copyright 2007, 2013 Brian Cherne
 */
(function(a){a.fn.hoverIntent=function(m,d,h){var j={interval:100,sensitivity:7,timeout:0};if(typeof m==="object"){j=a.extend(j,m);}else{if(a.isFunction(d)){j=a.extend(j,{over:m,out:d,selector:h});}else{j=a.extend(j,{over:m,out:m,selector:d});}}var l,k,g,f;var e=function(n){l=n.pageX;k=n.pageY;};var c=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if((Math.abs(g-l)+Math.abs(f-k))<j.sensitivity){a(n).off("mousemove.hoverIntent",e);n.hoverIntent_s=1;return j.over.apply(n,[o]);}else{g=l;f=k;n.hoverIntent_t=setTimeout(function(){c(o,n);},j.interval);}};var i=function(o,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);n.hoverIntent_s=0;return j.out.apply(n,[o]);};var b=function(p){var o=jQuery.extend({},p);var n=this;if(n.hoverIntent_t){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);}if(p.type=="mouseenter"){g=o.pageX;f=o.pageY;a(n).on("mousemove.hoverIntent",e);if(n.hoverIntent_s!=1){n.hoverIntent_t=setTimeout(function(){c(o,n);},j.interval);}}else{a(n).off("mousemove.hoverIntent",e);if(n.hoverIntent_s==1){n.hoverIntent_t=setTimeout(function(){i(o,n);},j.timeout);}}};return this.on({"mouseenter.hoverIntent":b,"mouseleave.hoverIntent":b},j.selector);};})(jQuery);(function(a){a.fn.menu_drop=function(c,b){b=a.extend({},d,b);var d={child:".dropdown"};if(c==="show"){this.addClass("hover");a(b.child,this).css("visibility","visible");return this;}if(c==="hide"){this.removeClass("hover");a(b.child,this).css("visibility","hidden");return this;}};}(jQuery));(function(a){hover_delay={init:function(){var b=a("li.has-dropdown");var c=".hover";if(a("html.touch:not(.desktop)").length){b.on("touchstart",function(d){a(this).menu_drop("show").siblings(c).menu_drop("hide");d.stopPropagation();a(document).one("touchstart",function(){b.menu_drop("hide");});});}else{b.hoverIntent(function(){a(this).menu_drop("show");},function(){a(this).menu_drop("hide");});}}};})(jQuery);(function(b){var a;placeholder_style={settings:{input:"#navsearch input#search",placeholder_class:"placeholder",parent:"form"},init:function(){a=this.settings;b(a.input).focusin(function(){b(this).parents(a.parent).addClass(a.placeholder_class);});b(a.input).focusout(function(){b(this).parents(a.parent).removeClass(a.placeholder_class);});}};})(jQuery);
/*! Copyright (c) 2013 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.1.3
 *
 * Requires: 1.2.2+
 */
(function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery);})(function(f){function c(q){var j,k=q||window.event,v=[].slice.call(arguments,1),m=0,p=0,o=0,e=0,n=0;return q=f.event.fix(k),q.type="mousewheel",k.wheelDelta&&(m=k.wheelDelta),k.detail&&(m=-1*k.detail),k.deltaY&&(o=-1*k.deltaY,m=o),k.deltaX&&(p=k.deltaX,m=-1*p),void 0!==k.wheelDeltaY&&(o=k.wheelDeltaY),void 0!==k.wheelDeltaX&&(p=-1*k.wheelDeltaX),e=Math.abs(m),(!g||g>e)&&(g=e),n=Math.max(Math.abs(o),Math.abs(p)),(!h||h>n)&&(h=n),j=m>0?"floor":"ceil",m=Math[j](m/g),p=Math[j](p/h),o=Math[j](o/h),v.unshift(q,m,p,o),(f.event.dispatch||f.event.handle).apply(this,v);}var g,h,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],b="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(f.event.fixHooks){for(var d=a.length;d;){f.event.fixHooks[a[--d]]=f.event.mouseHooks;}}f.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=b.length;i;){this.addEventListener(b[--i],c,!1);}}else{this.onmousewheel=c;}},teardown:function(){if(this.removeEventListener){for(var i=b.length;i;){this.removeEventListener(b[--i],c,!1);}}else{this.onmousewheel=null;}}},f.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel");},unmousewheel:function(i){return this.unbind("mousewheel",i);}});});(function(a){(function b(){var D=200;var d=siteUrlPrefix+"taxonomy/";var r=a("#taxonomy-browser").attr("data-search-url")+"/";var x={};var G=[];var K={};var w={};var f=null;var g=null;var L=null;var I=true;var A=100;var H=300;var l=100;var F=function(){I=false;};function m(O){c(O);if((typeof(x[O])!="undefined")){return x[O];}else{return[];}}function J(P,R){if(R<=(G.length-1)){n(R);}var O=m(P);G.push(P);u(P,O);}function u(R,O){p(R,O);var T=a(".levels-position .level").length;var P=a(".levels-position").position().left;var U=Math.abs(P/L);var S=T-(3)-U;if((S>0)){M("-="+(L*S));}}function p(R,P){function S(T){return a.map(T,function(U){if(U==="ROOT"){return;}return{name:U,isLeaf:w[U]===0,link:k(U),count:K[U]};});}if(R==="/"){R="ROOT";}var O=C({parent_term:R,items:S(P),level:G.length,view_all_link:k(R),view_all_total:K[R]});a(".levels-position").append(O);t(a(".level").last());}function h(R){var S=a(R.target);if(S.hasClass("no-children")){return true;}R.preventDefault();var O=S.data("level");J(i(S),O);var P=S.closest(".level");P.find("li").removeClass("active");S.closest("li").addClass("active");}function q(P){P.preventDefault();var R=a(P.target);if(!R.hasClass("active")||a(".levels-position").is(":animated")){return false;}var O=(R.hasClass("next"))?"-=":"+=";var S=O+a(".level").outerWidth(true);M(S);a(":focus").blur();}function j(T){T.preventDefault();cancelClick=setTimeout(F,A);var S=a(T.target);var R=S.siblings(".level-scroll");var P=R.children("ul").height();var V=R.scrollTop();var O=800;var U=S.hasClass("up")?V:P-V;O=Math.round(U*O/P);R.animate({scrollTop:S.hasClass("up")?0:P},O);}function E(R){R.preventDefault();var P=a(R.target);var O=P.siblings(".level-scroll");clearTimeout(cancelClick);O.stop();if(I){var S=O.scrollTop();O.animate({scrollTop:P.hasClass("up")?S-l:S+l},H);}I=true;}function e(T,V,R,O){T.preventDefault();var S=Math[(O<0?"floor":"ceil")](O/60);var P=S*10;var U=a(this).scrollTop();a(this).scrollTop(U-P);}function M(O){a(".levels-position").stop().animate({left:O},D,N);}function N(){var P=Math.round(a(".levels-position").position().left);var S=a(".levels-position .level").length;var U=Math.abs(P/L);var R=S-3-U;var T=a(".prev");var O=a(".next");if(U>0){T.show().addClass("active");}else{T.hide().removeClass("active");}if(R>0){O.show().addClass("active");}else{O.hide().removeClass("active");}}function B(P,R){clearTimeout(g);P.removeClass("level-active-over");var S=(P.data("level")<=G.length);var O=(R&&(R.data("level")<P.data("level")));if(S||O){P.removeClass("level-active");P.addClass("level-selection");}f=null;}function t(O){clearTimeout(g);if(f!==null&&f.data("level")!==O.data("level")){B(f,O);}O.removeClass("level-selection");O.addClass("level-active level-active-over");f=O;}function C(R){var P=a.map(R.items,function(U,T){return["<li>",'<a href="'+U.link+'"'+(U.isLeaf?' class="no-children"':"")+' data-level="'+R.level+'">',U.name+" "+(U.isLeaf?"("+U.count+")":""),"</a>","</li>"].join("\n");});var S=R.parent_term;if(S==="ROOT"){S="All Subject Areas";}var O=['<div class="level" data-level="'+R.level+'">','<div class="level-title">'+S+"</div>",'<div class="level-top">','<a href="'+R.view_all_link+'">View All Articles ('+R.view_all_total+")</a>","</div>",'<a href="#" class="up"></a>','<div class="level-scroll">',"<ul>",P.join("\n"),"</ul>","</div>",'<a href="#" class="down"></a>'];if(R.items.length<5){O[5]='<a href="#" class="up hide-active-scroll"></a>';O[11]='<a href="#" class="down hide-active-scroll"></a>';}O.push(["</div>"]);return O.join("\n");}function k(P){var O=r;if((typeof(P)!=="undefined")&&(P!=="ROOT")){P=""+P;O=O+encodeURIComponent(P.replace(new RegExp("\\s","g"),"_").toLowerCase());}return O;}function i(O){return a.trim(O.html().replace(/\([0-9]+\)/g,""));}function c(S){function O(X,U,ab){var aa=[];for(var Y=0;Y<X.length;Y++){var V=X[Y].subject;var ac=V.split("/");var Z=ac[ac.length-1];aa.push(Z);var T=X[Y].articleCount;if(T!=undefined&&T>0){K[Z]=T;}else{K[Z]=0;}var W=X[Y].childCount;if(W!=undefined&&W>0){w[Z]=W;}else{w[Z]=0;}x[Z]=[];}x[S]=aa.sort();}function R(T,V,U){a(".subject-area").unbind("click",y).attr("title","Error: No subject terms available!").addClass("disabled");a("subject-area").on("click",function(W){W.preventDefault();return false;});}var P=v();if(S!="/"){P+="c="+S;}P=P.replace(/\s/g,"_");a.ajax({url:P,type:"GET",dataType:"json",async:false}).then(O,R);return true;}function v(){var O=d+"?";for(var P=1;P<G.length;P++){O+="c="+G[P]+"&";}return O;}function n(O){while(a(".levels .level").length>O){a(".levels .level").last().remove();G.pop();}}function o(P){if($tb.queue().length>0){return;}P=P||false;var O=$tb.is(":hidden");if(P||!O){if(!O){$tb.slideUp();}}else{$tb.slideDown();}}function y(O){O.preventDefault();O.stopPropagation();o();}function z(){a(".level-active").hover(function(){a(this).addClass("level-active-over");},function(){a(this).removeClass("level-active-over");});a(".subject-area").on("click",y);a(document).bind("click",function(P){o(true);});$tb.click(function(P){P.stopPropagation();});var O=a(".levels-position");if(!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch)){O.on("mouseenter",".level",function(P){t(a(P.currentTarget));});O.on("mousedown",".level > a",j);O.on("mouseup",".level > a",E);}O.on("mousewheel",".level-scroll",e);O.on("click",".level > a",function(P){P.preventDefault();});O.on("click","ul li a",h);a("#taxonomy-browser").find(".prev, .next").click(q);}a(document).ready(function(){$tb=a("#taxonomy-browser");z();J("/",0);L=Math.round(a(".levels-position .level").outerWidth(true));});})();})(jQuery);!function(a){if("function"==typeof bootstrap){bootstrap("promise",a);}else{if("object"==typeof exports&&"object"==typeof module){module.exports=a();}else{if("function"==typeof define&&define.amd){define(a);}else{if("undefined"!=typeof ses){if(!ses.ok()){return;}ses.makeQ=a;}else{if("undefined"==typeof window&&"undefined"==typeof self){throw new Error("This environment was not anticipated by Q. Please file a bug.");}var c="undefined"!=typeof window?window:self,b=c.Q;c.Q=a(),c.Q.noConflict=function(){return c.Q=b,this;};}}}}}(function(){function aO(a){return function(){return ap.apply(a,arguments);};}function aU(a){return a===Object(a);}function a4(a){return"[object StopIteration]"===aY(a)||a instanceof bb;}function aQ(b,f){if(ae&&f.stack&&"object"==typeof b&&null!==b&&b.stack&&-1===b.stack.indexOf(aG)){for(var d=[],c=f;c;c=c.source){c.stack&&d.unshift(c.stack);}d.unshift(b.stack);var a=d.join("\n"+aG+"\n");b.stack=aT(a);}}function aT(a){for(var f=a.split("\n"),c=[],b=0;b<f.length;++b){var d=f[b];a7(d)||a0(d)||!d||c.push(d);}return c.join("\n");}function a0(a){return -1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:");}function aN(a){var d=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(d){return[d[1],Number(d[2])];}var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c){return[c[1],Number(c[2])];}var b=/.*@(.+):(\d+)$/.exec(a);return b?[b[1],Number(b[2])]:void 0;}function a7(a){var d=aN(a);if(!d){return !1;}var c=d[0],b=d[1];return c===at&&b>=aR&&aD>=b;}function aP(){if(ae){try{throw new Error;}catch(a){var d=a.stack.split("\n"),c=d[0].indexOf("@")>0?d[1]:d[2],b=aN(c);if(!b){return;}return at=b[0],b[1];}}}function a3(a,c,b){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(c+" is deprecated, use "+b+" instead.",new Error("").stack),a.apply(a,arguments);};}function aS(a){return a instanceof a1?a:a2(a)?al(a):aw(a);}function a9(){function c(e){h=e,b.source=e,ad(f,function(j,i){aS.nextTick(function(){e.promiseDispatch.apply(e,i);});},void 0),f=void 0,d=void 0;}var h,f=[],d=[],g=aa(a9.prototype),b=aa(a1.prototype);if(b.promiseDispatch=function(k,l,j){var e=ao(arguments);f?(f.push(e),"when"===l&&j[1]&&d.push(j[1])):aS.nextTick(function(){h.promiseDispatch.apply(h,e);});},b.valueOf=function(){if(f){return b;}var e=aM(h);return aV(e)&&(h=e),e;},b.inspect=function(){return h?h.inspect():{state:"pending"};},aS.longStackSupport&&ae){try{throw new Error;}catch(a){b.stack=a.stack.substring(a.stack.indexOf("\n")+1);}}return g.promise=b,g.resolve=function(i){h||c(aS(i));},g.fulfill=function(i){h||c(aw(i));},g.reject=function(i){h||c(ai(i));},g.notify=function(e){h||ad(d,function(j,i){aS.nextTick(function(){i(e);});},void 0);},g;}function aW(a){if("function"!=typeof a){throw new TypeError("resolver must be a function.");}var c=a9();try{a(c.resolve,c.reject,c.notify);}catch(b){c.reject(b);}return c.promise;}function a6(a){return aW(function(f,c){for(var b=0,d=a.length;d>b;b++){aS(a[b]).then(f,c);}});}function a1(a,f,c){void 0===f&&(f=function(e){return ai(new Error("Promise does not support operation: "+e));}),void 0===c&&(c=function(){return{state:"unknown"};});var b=aa(a1.prototype);if(b.promiseDispatch=function(j,k,h){var g;try{g=a[k]?a[k].apply(b,h):f.call(b,k,h);}catch(l){g=ai(l);}j&&j(g);},b.inspect=c,c){var d=c();"rejected"===d.state&&(b.exception=d.reason),b.valueOf=function(){var e=c();return"pending"===e.state||"rejected"===e.state?b:e.value;};}return b;}function aJ(a,d,c,b){return aS(a).then(d,c,b);}function aM(a){if(aV(a)){var b=a.inspect();if("fulfilled"===b.state){return b.value;}}return a;}function aV(a){return a instanceof a1;}function a2(a){return aU(a)&&"function"==typeof a.then;}function aX(a){return aV(a)&&"pending"===a.inspect().state;}function aZ(a){return !aV(a)||"fulfilled"===a.inspect().state;}function aL(a){return aV(a)&&"rejected"===a.inspect().state;}function a8(){aE.length=0,aH.length=0,aA||(aA=!0);}function aK(a,b){aA&&("object"==typeof process&&"function"==typeof process.emit&&aS.nextTick.runAfter(function(){-1!==ac(aH,a)&&(process.emit("unhandledRejection",b,a),aC.push(a));}),aH.push(a),aE.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b));}function ag(a){if(aA){var b=ac(aH,a);-1!==b&&("object"==typeof process&&"function"==typeof process.emit&&aS.nextTick.runAfter(function(){var c=ac(aC,a);-1!==c&&(process.emit("rejectionHandled",aE[b],a),aC.splice(c,1));}),aH.splice(b,1),aE.splice(b,1));}}function ai(a){var b=a1({when:function(c){return c&&ag(this),c?c(a):this;}},function(){return this;},function(){return{state:"rejected",reason:a};});return aK(b,a),b;}function aw(a){return a1({when:function(){return a;},get:function(b){return a[b];},set:function(c,b){a[c]=b;},"delete":function(b){delete a[b];},post:function(c,b){return null===c||void 0===c?a.apply(void 0,b):a[c].apply(a,b);},apply:function(c,b){return a.apply(c,b);},keys:function(){return a5(a);}},void 0,function(){return{state:"fulfilled",value:a};});}function al(a){var b=a9();return aS.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify);}catch(c){b.reject(c);}}),b.promise;}function ah(a){return a1({isDef:function(){}},function(c,b){return aB(a,c,b);},function(){return aS(a).inspect();});}function am(a,c,b){return aS(a).spread(c,b);}function ax(a){return function(){function e(g,i){var f;if("undefined"==typeof StopIteration){try{f=c[g](i);}catch(h){return ai(h);}return f.done?aS(f.value):aJ(f.value,d,b);}try{f=c[g](i);}catch(h){return a4(h)?aS(h.value):ai(h);}return aJ(f,d,b);}var c=a.apply(this,arguments),d=e.bind(e,"next"),b=e.bind(e,"throw");return d();};}function ak(a){aS.done(aS.async(a)());}function ay(a){throw new bb(a);}function aj(a){return function(){return am([this,ar(arguments)],function(c,b){return a.apply(c,b);});};}function aB(a,c,b){return aS(a).dispatch(c,b);}function ar(a){return aJ(a,function(b){var d=0,c=a9();return ad(b,function(g,h,f){var e;aV(h)&&"fulfilled"===(e=h.inspect()).state?b[f]=e.value:(++d,aJ(h,function(i){b[f]=i,0===--d&&c.resolve(b);},c.reject,function(i){c.notify({index:f,value:i});}));},void 0),0===d&&c.resolve(b),c.promise;});}function af(a){if(0===a.length){return aS.resolve();}var c=aS.defer(),b=0;return ad(a,function(h,k,e){function d(f){c.resolve(f);}function l(){b--,0===b&&c.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."));}function g(f){c.notify({index:e,value:f});}var j=a[e];b++,aJ(j,d,l,g);},void 0),c.promise;}function av(a){return aJ(a,function(b){return b=ab(b,aS),aJ(ar(ab(b,function(c){return aJ(c,aI,aI);})),function(){return b;});});}function an(a){return aS(a).allSettled();}function az(a,b){return aS(a).then(void 0,void 0,b);}function aF(a,b){return aS(a).nodeify(b);}var ae=!1;try{throw new Error;}catch(au){ae=!!au.stack;}var at,bb,aR=aP(),aI=function(){},aq=function(){function m(){for(var c,e;j.next;){j=j.next,c=j.task,j.task=void 0,e=j.domain,e&&(j.domain=void 0,e.enter()),d(c,e);}for(;k.length;){c=k.pop(),d(c);}b=!1;}function d(i,f){try{i();}catch(c){if(l){throw f&&f.exit(),setTimeout(m,0),f&&f.enter(),c;}setTimeout(function(){throw c;},0);}f&&f.exit();}var j={task:void 0,next:null},a=j,b=!1,g=void 0,l=!1,k=[];if(aq=function(c){a=a.next={task:c,domain:l&&process.domain,next:null},b||(b=!0,g());},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick){l=!0,g=function(){process.nextTick(m);};}else{if("function"==typeof setImmediate){g="undefined"!=typeof window?setImmediate.bind(window,m):function(){setImmediate(m);};}else{if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){g=h,p.port1.onmessage=m,m();};var h=function(){p.port2.postMessage(0);};g=function(){setTimeout(m,0),h();};}else{g=function(){setTimeout(m,0);};}}}return aq.runAfter=function(c){k.push(c),b||(b=!0,g());},aq;}(),ap=Function.call,ao=aO(Array.prototype.slice),ad=aO(Array.prototype.reduce||function(a,d){var c=0,b=this.length;if(1===arguments.length){for(;;){if(c in this){d=this[c++];break;}if(++c>=b){throw new TypeError;}}}for(;b>c;c++){c in this&&(d=a(d,this[c],c));}return d;}),ac=aO(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++){if(this[b]===a){return b;}}return -1;}),ab=aO(Array.prototype.map||function(a,d){var c=this,b=[];return ad(c,function(g,f,e){b.push(a.call(d,f,e,c));},void 0),b;}),aa=Object.create||function(a){function b(){}return b.prototype=a,new b;},ba=aO(Object.prototype.hasOwnProperty),a5=Object.keys||function(a){var c=[];for(var b in a){ba(a,b)&&c.push(b);}return c;},aY=aO(Object.prototype.toString);bb="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a;};var aG="From previous event:";aS.resolve=aS,aS.nextTick=aq,aS.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(aS.longStackSupport=!0),aS.defer=a9,a9.prototype.makeNodeResolver=function(){var a=this;return function(c,b){c?a.reject(c):a.resolve(arguments.length>2?ao(arguments,1):b);};},aS.Promise=aW,aS.promise=aW,aW.race=a6,aW.all=ar,aW.reject=ai,aW.resolve=aS,aS.passByCopy=function(a){return a;},a1.prototype.passByCopy=function(){return this;},aS.join=function(a,b){return aS(a).join(b);},a1.prototype.join=function(a){return aS([this,a]).spread(function(b,c){if(b===c){return b;}throw new Error("Can't join: not the same: "+b+" "+c);});},aS.race=a6,a1.prototype.race=function(){return this.then(aS.race);},aS.makePromise=a1,a1.prototype.toString=function(){return"[object Promise]";},a1.prototype.then=function(l,b,h){function a(f){try{return"function"==typeof l?l(f):f;}catch(c){return ai(c);}}function d(c){if("function"==typeof b){aQ(c,j);try{return b(c);}catch(f){return ai(f);}}return ai(c);}function k(c){return"function"==typeof h?h(c):c;}var j=this,m=a9(),g=!1;return aS.nextTick(function(){j.promiseDispatch(function(c){g||(g=!0,m.resolve(a(c)));},"when",[function(c){g||(g=!0,m.resolve(d(c)));}]);}),j.promiseDispatch(void 0,"when",[void 0,function(c){var o,i=!1;try{o=k(c);}catch(f){if(i=!0,!aS.onerror){throw f;}aS.onerror(f);}i||m.notify(o);}]),m.promise;},aS.tap=function(a,b){return aS(a).tap(b);},a1.prototype.tap=function(a){return a=aS(a),this.then(function(b){return a.fcall(b).thenResolve(b);});},aS.when=aJ,a1.prototype.thenResolve=function(a){return this.then(function(){return a;});},aS.thenResolve=function(a,b){return aS(a).thenResolve(b);},a1.prototype.thenReject=function(a){return this.then(function(){throw a;});},aS.thenReject=function(a,b){return aS(a).thenReject(b);},aS.nearer=aM,aS.isPromise=aV,aS.isPromiseAlike=a2,aS.isPending=aX,a1.prototype.isPending=function(){return"pending"===this.inspect().state;},aS.isFulfilled=aZ,a1.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state;},aS.isRejected=aL,a1.prototype.isRejected=function(){return"rejected"===this.inspect().state;};var aE=[],aH=[],aC=[],aA=!0;aS.resetUnhandledRejections=a8,aS.getUnhandledReasons=function(){return aE.slice();},aS.stopUnhandledRejectionTracking=function(){a8(),aA=!1;},a8(),aS.reject=ai,aS.fulfill=aw,aS.master=ah,aS.spread=am,a1.prototype.spread=function(a,b){return this.all().then(function(c){return a.apply(void 0,c);},b);},aS.async=ax,aS.spawn=ak,aS["return"]=ay,aS.promised=aj,aS.dispatch=aB,a1.prototype.dispatch=function(a,d){var c=this,b=a9();return aS.nextTick(function(){c.promiseDispatch(b.resolve,a,d);}),b.promise;},aS.get=function(a,b){return aS(a).dispatch("get",[b]);},a1.prototype.get=function(a){return this.dispatch("get",[a]);},aS.set=function(a,c,b){return aS(a).dispatch("set",[c,b]);},a1.prototype.set=function(a,b){return this.dispatch("set",[a,b]);},aS.del=aS["delete"]=function(a,b){return aS(a).dispatch("delete",[b]);},a1.prototype.del=a1.prototype["delete"]=function(a){return this.dispatch("delete",[a]);},aS.mapply=aS.post=function(a,c,b){return aS(a).dispatch("post",[c,b]);},a1.prototype.mapply=a1.prototype.post=function(a,b){return this.dispatch("post",[a,b]);},aS.send=aS.mcall=aS.invoke=function(a,b){return aS(a).dispatch("post",[b,ao(arguments,2)]);},a1.prototype.send=a1.prototype.mcall=a1.prototype.invoke=function(a){return this.dispatch("post",[a,ao(arguments,1)]);},aS.fapply=function(a,b){return aS(a).dispatch("apply",[void 0,b]);},a1.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a]);},aS["try"]=aS.fcall=function(a){return aS(a).dispatch("apply",[void 0,ao(arguments,1)]);},a1.prototype.fcall=function(){return this.dispatch("apply",[void 0,ao(arguments)]);},aS.fbind=function(a){var c=aS(a),b=ao(arguments,1);return function(){return c.dispatch("apply",[this,b.concat(ao(arguments))]);};},a1.prototype.fbind=function(){var a=this,b=ao(arguments);return function(){return a.dispatch("apply",[this,b.concat(ao(arguments))]);};},aS.keys=function(a){return aS(a).dispatch("keys",[]);},a1.prototype.keys=function(){return this.dispatch("keys",[]);},aS.all=ar,a1.prototype.all=function(){return ar(this);},aS.any=af,a1.prototype.any=function(){return af(this);},aS.allResolved=a3(av,"allResolved","allSettled"),a1.prototype.allResolved=function(){return av(this);},aS.allSettled=an,a1.prototype.allSettled=function(){return this.then(function(a){return ar(ab(a,function(b){function c(){return b.inspect();}return b=aS(b),b.then(c,c);}));});},aS.fail=aS["catch"]=function(a,b){return aS(a).then(void 0,b);},a1.prototype.fail=a1.prototype["catch"]=function(a){return this.then(void 0,a);},aS.progress=az,a1.prototype.progress=function(a){return this.then(void 0,void 0,a);},aS.fin=aS["finally"]=function(a,b){return aS(a)["finally"](b);},a1.prototype.fin=a1.prototype["finally"]=function(a){return a=aS(a),this.then(function(b){return a.fcall().then(function(){return b;});},function(b){return a.fcall().then(function(){throw b;});});},aS.done=function(a,d,c,b){return aS(a).done(d,c,b);},a1.prototype.done=function(b,f,c){var d=function(e){aS.nextTick(function(){if(aQ(e,a),!aS.onerror){throw e;}aS.onerror(e);});},a=b||f||c?this.then(b,f,c):this;"object"==typeof process&&process&&process.domain&&(d=process.domain.bind(d)),a.then(void 0,d);},aS.timeout=function(a,c,b){return aS(a).timeout(c,b);},a1.prototype.timeout=function(a,d){var c=a9(),b=setTimeout(function(){d&&"string"!=typeof d||(d=new Error(d||"Timed out after "+a+" ms"),d.code="ETIMEDOUT"),c.reject(d);},a);return this.then(function(e){clearTimeout(b),c.resolve(e);},function(e){clearTimeout(b),c.reject(e);},c.notify),c.promise;},aS.delay=function(a,b){return void 0===b&&(b=a,a=void 0),aS(a).delay(b);},a1.prototype.delay=function(a){return this.then(function(c){var b=a9();return setTimeout(function(){b.resolve(c);},a),b.promise;});},aS.nfapply=function(a,b){return aS(a).nfapply(b);},a1.prototype.nfapply=function(a){var c=a9(),b=ao(a);return b.push(c.makeNodeResolver()),this.fapply(b).fail(c.reject),c.promise;},aS.nfcall=function(a){var b=ao(arguments,1);return aS(a).nfapply(b);},a1.prototype.nfcall=function(){var a=ao(arguments),b=a9();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise;},aS.nfbind=aS.denodeify=function(a){var b=ao(arguments,1);return function(){var d=b.concat(ao(arguments)),c=a9();return d.push(c.makeNodeResolver()),aS(a).fapply(d).fail(c.reject),c.promise;};},a1.prototype.nfbind=a1.prototype.denodeify=function(){var a=ao(arguments);return a.unshift(this),aS.denodeify.apply(void 0,a);},aS.nbind=function(a,c){var b=ao(arguments,2);return function(){function e(){return a.apply(c,arguments);}var f=b.concat(ao(arguments)),d=a9();return f.push(d.makeNodeResolver()),aS(e).fapply(f).fail(d.reject),d.promise;};},a1.prototype.nbind=function(){var a=ao(arguments,0);return a.unshift(this),aS.nbind.apply(void 0,a);},aS.nmapply=aS.npost=function(a,c,b){return aS(a).npost(c,b);},a1.prototype.nmapply=a1.prototype.npost=function(a,d){var c=ao(d||[]),b=a9();return c.push(b.makeNodeResolver()),this.dispatch("post",[a,c]).fail(b.reject),b.promise;},aS.nsend=aS.nmcall=aS.ninvoke=function(a,d){var c=ao(arguments,2),b=a9();return c.push(b.makeNodeResolver()),aS(a).dispatch("post",[d,c]).fail(b.reject),b.promise;},a1.prototype.nsend=a1.prototype.nmcall=a1.prototype.ninvoke=function(a){var c=ao(arguments,1),b=a9();return c.push(b.makeNodeResolver()),this.dispatch("post",[a,c]).fail(b.reject),b.promise;},aS.nodeify=aF,a1.prototype.nodeify=function(a){return a?void this.then(function(b){aS.nextTick(function(){a(null,b);});},function(b){aS.nextTick(function(){a(b);});}):this;},aS.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global");};var aD=aP();return aS;});(function(){var a=false,b=/xyz/.test(function(){xyz;})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,i){return function(){var k=this._super;this._super=f[h];var j=i.apply(this,arguments);this._super=k;return j;};})(d,g[d]):g[d];}function c(){if(!a&&this.init){this.init.apply(this,arguments);}}c.prototype=e;c.prototype.constructor=c;c.extend=arguments.callee;return c;};})();var ErrorFactory;(function(a){ErrorFactory=function(b,d){var c=new Error(d);c.name=b;return c;};})(jQuery);var CounterQueryValidator;var CounterQuery;(function(a){CounterQueryValidator=Class.extend({promise:null,init:function(d){var c=Q.defer();var b={};this.options=_.extend(b,d);c.resolve(true);this.promise=c.promise;},validate:function(b){return this.promise.then(function(){return b;});}});CounterQuery=Class.extend({init:function(b){},isDOIValid:function(b){return !_.isEmpty(b)&&(_.isString(b)||_.isArray(b));},formatDOI:function(b){b=encodeURI(b);return b.replace(new RegExp("/","g"),"%2F").replace(new RegExp(":","g"),"%3A");},validateDOI:function(b){var c=this;if(this.isDOIValid(b)){if(_.isString(b)){return this.formatDOI(b);}else{if(_.isArray(b)){return _.map(b,function(d){return c.formatDOI(d);});}}}else{throw new ErrorFactory("InvalidDOIError","[CounterQuery::validateDOI] - Invalid DOI");}},dataValidator:new CounterQueryValidator(),setDataValidator:function(b){if(b instanceof CounterQueryValidator){this.dataValidator=b;}return this;},getRequestUrl:function(b){return COUNTER_HOST+"/"+b;},processRequest:function(c){var e=this;var b=Q.defer();if(COUNTER_HOST==null){var d=new Error("[CounterQuery::processRequest] - COUNTER API is not configured");d.name="COUNTERNotConfiguredError";b.reject(new ErrorFactory("COUNTERNotConfiguredError","[CounterQuery::processRequest] - COUNTER API is not configured"));}else{a.ajax({url:c,jsonp:"callback",dataType:"json",timeout:60000,success:function(f){e.dataValidator.validate(f).then(function(g){b.resolve(g);}).fail(function(g){b.reject(g);});},error:function(g,h){var f=new Error("[CounterQuery::processRequest] - Request failed to API");f.name="APIRequestError";b.reject(new ErrorFactory("APIRequestError","[CounterQuery::processRequest] - Request failed to API"));}});}return b.promise;},getArticleSummary:function(b){var c=this.getRequestUrl(b);return this.processRequest(c);}});})(jQuery);var AlmQueryValidator;var AlmQuery;(function(a){AlmQueryValidator=Class.extend({promise:null,init:function(d){var c=Q.defer();var b={checkSources:true,excludeInvalidSources:true,checkIsUndefined:true,excludeUndefinedItems:true,checkHasData:true};this.options=_.extend(b,d);c.resolve(true);this.promise=c.promise;},validate:function(c){var b=this;return this.promise.then(function(){if(b.options.checkHasData){if(_.has(c,"data")&&c.data.length){return c.data;}else{throw new ErrorFactory("AlmQueryValidatorError",'[AlmQueryValidator::validate] - Data has no "data" key');}}return c;}).then(function(f){if(b.options.checkIsUndefined){var d=new ErrorFactory("AlmQueryValidatorError","[AlmQueryValidator::validate] - Data is undefined");if(_.isArray(f)&&f.length){if(b.options.excludeUndefinedItems){var e=[];_.each(f,function(g){if(!_.isUndefined(g)){e.push(g);}});if(!e.length){throw d;}f=e;}else{_.each(f,function(g){if(_.isUndefined(g)){throw d;}});}}else{if(_.isUndefined(f)){throw d;}}}return f;}).then(function(e){if(b.options.checkSources){var f=new ErrorFactory("AlmQueryValidatorError","[AlmQueryValidator::validate] - Data source is invalid");if(_.isArray(e)&&e.length){if(b.options.excludeInvalidSources){var d=[];_.each(e,function(g){if(b.validateSource(g)){d.push(g);}});if(!d.length){throw f;}e=d;}else{_.each(e,function(g){if(!b.validateSource(g)){throw f;}});}}else{if(b.validateSource(e)){throw f;}}}return e;});},validateSource:function(b){return _.has(b,"sources")&&!_.isUndefined(b.sources);}});AlmQuery=Class.extend({init:function(b){this.config=_.extend(ALM_CONFIG,b);this.hasSessionStorage=Modernizr.sessionstorage;},isDOIValid:function(b){return !_.isEmpty(b)&&(_.isString(b)||_.isArray(b));},formatDOI:function(b){b=encodeURI(b);return b.replace(new RegExp("/","g"),"%2F").replace(new RegExp(":","g"),"%3A");},validateDOI:function(b){var c=this;if(this.isDOIValid(b)){if(_.isString(b)){return this.formatDOI(b);}else{if(_.isArray(b)){return _.map(b,function(d){return c.formatDOI(d);});}}}else{throw new ErrorFactory("InvalidDOIError","[AlmQuery::validateDOI] - Invalid DOI");}},isArticleNew:function(){var b=moment(ArticleData.date,"MMM DD, YYYY").valueOf();var c=moment().subtract(2,"days").valueOf();return(c<b);},dataValidator:new AlmQueryValidator(),setDataValidator:function(b){if(b instanceof AlmQueryValidator){this.dataValidator=b;}return this;},getRequestBaseUrl:function(){return this.config.host+"?api_key="+this.config.apiKey;},getRequestUrl:function(b){if(_.has(b,"ids")){b.ids=this.validateDOI(b.ids);}b=_.reduce(b,function(c,e,d){if(_.isArray(e)){e=_.reduce(e,function(f,g){return f+g+",";},"");e=e.slice(0,-1);}return c+"&"+d+"="+e;},"");return this.getRequestBaseUrl()+b;},processRequest:function(c){var e=this;var b=Q.defer();if(this.config.host==null){var d=new Error("[AlmQuery::processRequest] - ALM API is not configured");d.name="ALMNotConfiguredError";b.reject(new ErrorFactory("ALMNotConfiguredError","[AlmQuery::processRequest] - ALM API is not configured"));}else{a.ajax({url:c,jsonp:"callback",dataType:"jsonp",timeout:60000,success:function(f){e.dataValidator.validate(f).then(function(g){b.resolve(g);}).fail(function(g){if(e.isArticleNew()){b.reject(new ErrorFactory("NewArticleError","[AlmQuery::processRequest] - The article is too new to have data."));}else{b.reject(g);}});},error:function(g,h){var f=new Error("[AlmQuery::processRequest] - Request failed to API");f.name="APIRequestError";b.reject(new ErrorFactory("APIRequestError","[AlmQuery::processRequest] - Request failed to API"));}});}return b.promise;},getArticleSummary:function(b){var c=this.getRequestUrl({ids:b});return this.processRequest(c);},getArticleDetail:function(b){var c=this.getRequestUrl({ids:b,info:"detail"});return this.processRequest(c);},getMediaReferences:function(b){var c=this.getRequestUrl({ids:b,source_id:"articlecoveragecurated",info:"detail"});return this.processRequest(c);},getArticleTweets:function(b){var c=this.getRequestUrl({ids:b,source_id:"twitter",info:"detail"});return this.processRequest(c);}});})(jQuery);var Signposts;(function(c){Signposts=Class.extend({$element:c("#almSignposts"),init:function(){var f=this;var e=new CounterQuery();var d=new CounterQueryValidator();var g;e.setDataValidator(d).getArticleSummary(ArticleData.doi).then(function(h){g=h.totals;a(g,f);}).fail(function(h){b(h,f);});}});function a(g,f){var e=new AlmQuery();var d=new AlmQueryValidator({checkSources:false});e.setDataValidator(d).getArticleDetail(ArticleData.doi).then(function(h){var l=h[0];var k=_.template(c("#signpostsTemplate").html());var j={saveCount:l.saved,citationCount:l.cited,shareCount:l.discussed,viewCount:getPmcViewsAndDownloads(h)+g};f.$element.html(k(j));if(!_.isUndefined(l.sources)){var i=_.findWhere(l.sources,{name:"scopus"});if(i.metrics.total>0){c("#almCitations").find(".citations-tip a").html("Displaying Scopus citation count.");}}tooltip_hover.init();}).fail(function(h){b(h,f);});}function b(d,f){var e;switch(d.name){case"NewArticleError":e=_.template(c("#signpostsNewArticleErrorTemplate").html());break;default:e=_.template(c("#signpostsGeneralErrorTemplate").html());break;}f.$element.html(e());}new Signposts();})(jQuery);function getPmcViewsAndDownloads(b){var a=b[0].sources[7]["metrics"];return a.html+a.pdf;}(function(b){var a;tooltip_component={settings:{tooltip_trigger:"[data-js-tooltip=tooltip_trigger]",tooltip_target:"[data-js-tooltip=tooltip_target]",tooltip_close:"[data-js-tooltip=tooltip_close]",tooltip_container:"[data-js-tooltip=tooltip_container]",tooltip_class:"active",tooltip_container_class:"tooltip-container-active"},init:function(){this.tooltip();},tooltip:function(){a=this.settings;b(a.tooltip_trigger).on("click",function(h){var i=b(this),g=i.parents(a.tooltip_container).innerWidth(),f=g*0.75,e=i.position(),d=b(h.target),c=i.children("div");b(a.tooltip_trigger).not(this).removeClass(a.tooltip_class).children("div").fadeOut("fast");if(!d.parents(a.tooltip_target).length||d.is(a.tooltip_close)){i.toggleClass(a.tooltip_class);if(Modernizr.borderradius){c.fadeToggle("fast");}}if(e.left>=f){i.find(a.tooltip_target).addClass("pos-right");}b(document).on("click.closeOutside",function(j){if(!b(j.target).closest(a.tooltip_trigger).length){i.removeClass(a.tooltip_class);c.fadeOut("fast");b(document).off("click.closeOutside");}});});}};})(jQuery);(function(a){var b=(function(){var h,i,e,c,g,f,d;h=a("#twitter-share-link").attr("href");i=h.split("&");e=i[1].substring(5);c=e.length;if(c>115){g="&text="+e.substring(0,115)+" ...";f=g.replace(/;/g,"%3B");d=i[0]+f;return a("#twitter-share-link").attr("href",d);}})();})(jQuery);(function(a){show_onscroll=function(d,b,e){var c=a(window).scrollTop();if(c>e){a(d).addClass(b);}else{if(c<e){a(d).removeClass(b);}}};})(jQuery);(function(b){function a(c){if(c==null){throw new Error("DOI is null.");}c=encodeURI(c);return c.replace(new RegExp("/","g"),"%2F").replace(new RegExp(":","g"),"%3A");}b.fn.getArticleSummary=function(e,c,d){var f=ALM_CONFIG;if(f.host==null){return;}e=a(e);var g=f.host+"?api_key="+f.apiKey+"&ids="+e;b.ajax({url:g,jsonp:"callback",dataType:"jsonp",timeout:20000,success:function(h){if(h.data.length>0){c(h.data[0]);}},error:function(h,i){d(i);}});};b.fn.getMediaReferences=function(e,c,d){var f=ALM_CONFIG;if(f.host==null){return;}e=a(e);var g=f.host+"?api_key="+f.apiKey+"&ids="+e+"&source_id=articlecoveragecurated&info=detail";b.ajax({url:g,jsonp:"callback",dataType:"jsonp",timeout:20000,success:function(h){c(h.data[0]);},error:function(h,i){d(i);}});};})(jQuery);var TwitterModule;(function(a){TwitterModule=Class.extend({$listEl:a("#tweetList"),$containerEl:a(".twitter-container"),$showMoreButtonEl:null,$viewAllButtonEl:null,maxTweets:10,maxTweetsShown:5,init:function(){this.$showMoreButtonEl=this.$containerEl.find(".load-more");this.$viewAllButtonEl=this.$containerEl.find(".view-all");this.loadData();},loadData:function(){var b=this;var c=new AlmQuery();c.getArticleTweets(ArticleData.doi).then(function(d){if(d[0].sources[0]&&d[0].sources[0].events.length){return d[0].sources[0].events;}else{throw new ErrorFactory("NoTwitterDataError","[TwitterModule::loadData] - No twitter data available");}}).then(function(f){var e=_.template(a("#twitterModuleItemTemplate").html());f=_.map(f,function(i){i=i.event;i.text=b.addTweetTextLinks(i.text);var j=moment(i.created_at);i.timestamp=j.valueOf();i.created_at=j.format("D MMM YYYY");var h=i.user_profile_image;var g=h.slice(7,9);if(g==="a0"){i.user_profile_image="http://pbs"+h.slice(9);}return i;});f=_.sortBy(f,function(g){return g.timestamp;});f=_.last(f.reverse(),b.maxTweets);var d=e({items:f});b.$listEl.html(d);b.bindImageFailEvent();if(f.length>5){b.bindShowMoreEvent();}b.$containerEl.show();}).fail(function(d){console.log(d);});},bindShowMoreEvent:function(){var b=this;b.maxTweetsShown=b.maxTweetsShown-1;this.$listEl.find("li:gt("+b.maxTweetsShown+")").hide();this.$showMoreButtonEl.on("click",function(){b.$listEl.find("li").show();b.$viewAllButtonEl.show();b.$showMoreButtonEl.hide();});this.$showMoreButtonEl.show();},bindImageFailEvent:function(){var b=WombatConfig.imgPath+"icon.avatar.placeholder.png";this.$containerEl.find(".imgLoad").on("error",function(){var c=a(this).attr("src",b);a(this).parent().html(c);});},addTweetTextLinks:function(c){c=c+" ";var e=/((ht|f)tp(s?):\/\/[a-zA-Z0-9\-\.\/]+?)([\s])/g;var d=c.replace(e,function(h,g,j,k,i){return'<a href="'+g+'">'+g+"</a> ";});var f=/#([A-Za-z0-9/-]+?)([:\s])/g;d=d.replace(f,function(i,g,h,k,j){return'<a href="https://twitter.com/#!/search/%23'+g+'">#'+g+"</a>"+h;});var b=/@([A-Za-z0-9_]+)([:\s])/g;d=d.replace(b,function(h,k,g,j,i){return'<a href="https://twitter.com/'+k+'">@'+k+"</a>"+g;});return d;}});new TwitterModule();})(jQuery);(function(a,b){if(typeof exports=="object"){module.exports=b();}else{if(typeof define=="function"&&define.amd){define(b);}else{a.Spinner=b();}}}(this,function(){var e=["webkit","Moz","ms","O"],p={},o;function g(q,u){var r=document.createElement(q||"div"),t;for(t in u){r[t]=u[t];}return r;}function h(r){for(var q=1,t=arguments.length;q<t;q++){r.appendChild(arguments[q]);}return r;}var i=(function(){var q=g("style",{type:"text/css"});h(document.getElementsByTagName("head")[0],q);return q.sheet||q.styleSheet;}());function c(v,q,w,A){var r=["opacity",q,~~(v*100),w,A].join("-"),t=0.01+w/A*100,y=Math.max(1-(1-v)/q*(100-t),v),x=o.substring(0,o.indexOf("Animation")).toLowerCase(),u=x&&"-"+x+"-"||"";if(!p[r]){i.insertRule("@"+u+"keyframes "+r+"{0%{opacity:"+y+"}"+t+"%{opacity:"+v+"}"+(t+0.01)+"%{opacity:1}"+(t+q)%100+"%{opacity:"+v+"}100%{opacity:"+y+"}}",i.cssRules.length);p[r]=1;}return r;}function m(u,v){var t=u.style,q,r;v=v.charAt(0).toUpperCase()+v.slice(1);for(r=0;r<e.length;r++){q=e[r]+v;if(t[q]!==undefined){return q;}}if(t[v]!==undefined){return v;}}function f(q,t){for(var r in t){q.style[m(q,r)||r]=t[r];}return q;}function k(t){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var u in r){if(t[u]===undefined){t[u]=r[u];}}}return t;}function j(q){var r={x:q.offsetLeft,y:q.offsetTop};while((q=q.offsetParent)){r.x+=q.offsetLeft,r.y+=q.offsetTop;}return r;}function n(r,q){return typeof r=="string"?r:r[q%r.length];}var d={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",position:"absolute"};function b(q){this.opts=k(q||{},b.defaults,d);}b.defaults={};k(b.prototype,{spin:function(A){this.stop();var D=this,r=D.opts,t=D.el=f(g(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex}),C=r.radius+r.length+r.width;f(t,{left:r.left,top:r.top});if(A){A.insertBefore(t,A.firstChild||null);}t.setAttribute("role","progressbar");D.lines(t,D.opts);if(!o){var x=0,q=(r.lines-1)*(1-r.direction)/2,w,u=r.fps,z=u/r.speed,y=(1-r.opacity)/(z*r.trail/100),B=z/r.lines;(function v(){x++;for(var E=0;E<r.lines;E++){w=Math.max(1-(x+(r.lines-E)*B)%z*y,r.opacity);D.opacity(t,E*r.direction+q,w,r);}D.timeout=D.el&&setTimeout(v,~~(1000/u));})();}return D;},stop:function(){var q=this.el;if(q){clearTimeout(this.timeout);if(q.parentNode){q.parentNode.removeChild(q);}this.el=undefined;}return this;},lines:function(t,v){var r=0,w=(v.lines-1)*(1-v.direction)/2,q;function u(x,y){return f(g(),{position:"absolute",width:(v.length+v.width)+"px",height:v.width+"px",background:x,boxShadow:y,transformOrigin:"left",transform:"rotate("+~~(360/v.lines*r+v.rotate)+"deg) translate("+v.radius+"px,0)",borderRadius:(v.corners*v.width>>1)+"px"});}for(;r<v.lines;r++){q=f(g(),{position:"absolute",top:1+~(v.width/2)+"px",transform:v.hwaccel?"translate3d(0,0,0)":"",opacity:v.opacity,animation:o&&c(v.opacity,v.trail,w+r*v.direction,v.lines)+" "+1/v.speed+"s linear infinite"});if(v.shadow){h(q,f(u("#000","0 0 4px #000"),{top:2+"px"}));}h(t,h(q,u(n(v.color,r),"0 0 1px rgba(0,0,0,.1)")));}return t;},opacity:function(r,q,t){if(q<r.childNodes.length){r.childNodes[q].style.opacity=t;}}});function l(){function q(t,r){return g("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',r);}i.addRule(".spin-vml","behavior:url(#default#VML)");b.prototype.lines=function(v,u){var t=u.length+u.width,B=2*t;function A(){return f(q("group",{coordsize:B+" "+B,coordorigin:-t+" "+-t}),{width:B,height:B});}var w=-(u.width+u.length)*2+"px",z=f(A(),{position:"absolute",top:w,left:w}),y;function x(C,r,D){h(z,h(f(A(),{rotation:360/u.lines*C+"deg",left:~~r}),h(f(q("roundrect",{arcsize:u.corners}),{width:t,height:u.width,left:u.radius,top:-u.width>>1,filter:D}),q("fill",{color:n(u.color,C),opacity:u.opacity}),q("stroke",{opacity:0}))));}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");}}for(y=1;y<=u.lines;y++){x(y);}return h(v,z);};b.prototype.opacity=function(t,r,v,u){var w=t.firstChild;u=u.shadow&&u.lines||0;if(w&&r+u<w.childNodes.length){w=w.childNodes[r+u];w=w&&w.firstChild;w=w&&w.firstChild;if(w){w.opacity=v;}}};}var a=f(g("group"),{behavior:"url(#default#VML)"});if(!m(a,"transform")&&a.adj){l();}else{o=m(a,"animation");}return b;}));(function(g){var e,b,d,a,f,c;b={settings:{floater:g("#floatTitleTop"),hidden_div:"topVisible",scroll_trigger:420,width_trigger:960,div_exists:1},init:function(){e=this.settings;this.scroll_it();this.close_floater();this.get_width();this.check_positions();},check_div:function(){e.div_exists=e.floater.length;return e.div_exists;},check_positions:function(){var h=g(window).scrollTop();var i=g(window).width();if(h>e.scroll_trigger&&i>e.width_trigger){return e.floater.addClass(e.hidden_div);}},scroll_it:function(){if(this.check_div()>0){return g(window).on("scroll",function(){var h=g(window).width();if(h>e.width_trigger){show_onscroll(e.floater,e.hidden_div,e.scroll_trigger);}});}},get_width:function(){if(this.check_div()>0){g(window).resize(function(){var i=g(window).width();var h=g(window).scrollTop();if(i<960){g(e.floater).removeClass(e.hidden_div);}else{if(h>e.scroll_trigger&&i>e.width_trigger){g(e.floater).addClass(e.hidden_div);}}});}},close_floater:function(){e.floater.find(".logo-close").on("click",function(){e.floater.remove();});}};g(document).ready(function(){g(".preventDefault").on("click",function(j){j.preventDefault();});d=document.getElementById("floatAuthorList");if(d!=null){truncate_elem.remove_overflowed("#floatAuthorList");tooltip_component.init();}b.init();if(g.fn.signposts){var h=g("meta[name=citation_doi]").attr("content");var i=new g.fn.signposts();i.getSignpostData(h);}toggle_component.init();f={width:1,zIndex:5000,top:"40%",left:"50%"};a=document.getElementById("loadingMetrics");c=new Spinner(f).spin(a);g(".lightbox-figure").on("click",function(){FigureLightbox.loadImage("#figure-lightbox-container",g(this).data("doi"));});g("#artText div.img-box").on("click",function(j){j.preventDefault();FigureLightbox.loadImage("#figure-lightbox-container",g(this).find("a").data("uri"));});g("#nav-figures a").on("click",function(){FigureLightbox.loadImage("#figure-lightbox-container",g(".figure").eq(0).data("doi"));});});}(jQuery));(function(f){var e,b,c;e=(function(){var g,h;f("#subjectList li").each(function(){var l=f(".taxo-flag").outerWidth(true);var i=f(this).width()-l;var n=5*2;var q=(i-n);var p=f(this).find(".taxo-term");var j=f(p).next();var o=f(p).width();if(o>q){var m=f(p).css("width",i+"px");}g=f(j).next().data("categoryname");h=localStorage[g];if(h!==undefined){var k=f(j).addClass("flagged");}return{term_flagged:k,term_truncate:m};});})();b=function(){var h,g;h=this;g=f(h).next();f(g).addClass("activate");if(f(g).parent().siblings().children("div").hasClass("activate")){f(g).parent().siblings().children("div").removeClass("activate");window.clearTimeout(closeIt);}f(document).on("click.closeOutside",function(i){if(f(i.target).closest(".taxo-flag").length!==1&&f(i.target).closest(".taxo-tooltip").length!==1){f(g).removeClass("activate");f(document).off("click.closeOutside");}});};f(".taxo-flag").on("click",b);c=(function(){f(".taxo-tooltip button").on("click",function(){var k,l,j,i,n,g,h;g=this;i=f(g).parent().parent();l=f(i).data("categoryname");k=f(i).prev();h=f("meta[name='dc.identifier']").attr("content");j=f(g).data("action");f.ajax({type:"POST",url:siteUrlPrefix+"taxonomy/flag/"+j,data:{categoryTerm:l,articleDoi:h},error:function(o){f("#subjectErrors").append(o);},success:function(){j==="remove"?f(k).removeClass("flagged"):f(k).addClass("flagged");}});j==="add"?localStorage.setItem(l,h):localStorage.removeItem(l,h);f(g).parent().toggle().next().toggle();n=window.setTimeout(function(){f(i).removeClass("activate");f(i).children(".taxo-explain").toggle();f(i).children(".taxo-confirm").toggle();f(".taxo-flag").on("click",c);},1000);var m=n;});})();if(f.fn.twitter){var a=f("meta[name=citation_doi]").attr("content");var d=new f.fn.twitter();d.getSidebarTweets(a);}})(jQuery);(function(a){referenceValidation=Class.extend({init:function(){this.getJSON();},getJSON:function(){that=this;a(".references li").on("click","ul.reflinks li:first-child a",function(b){var h=a(this).attr("data-author");var d=a(this).attr("data-title");var c=a(this).attr("data-cit");var e="doi-provided";if(c!==e){var i=a(this);var j=(h?"query.author="+h+"&":"")+"query.title="+d;var k="http://api.crossref.org/works?query="+j+"&sort=score&rows=1";var g="https://doi.org/";var f="http://search.crossref.org/?q="+c;var l=null;b.preventDefault();a.ajax({url:k,beforeSend:(function(){i.addClass("link-disabled");})}).success(function(n){var m=n.message.items[0].DOI;l=g+m;if(d&&n.message.items[0].title){var o=n.message.items[0].title[0];if(o.toLowerCase().replace(/[^a-zA-Z0-9]/g,"")!=decodeURIComponent(d).toLowerCase().replace(/[^a-zA-Z0-9]/g,"")){console.log("mismatch in title "+o+" != "+decodeURIComponent(d)+"\n, using search query");l=f;}}}).error(function(){l=f;}).done(function(){window.open(l,"_new");i.removeClass("link-disabled");});}});},});this.articleReferences=new referenceValidation();})(jQuery);(function(c,b,a,d){Foundation.libs.dropdown={name:"dropdown",version:"5.3.1",settings:{active_class:"open",align:"bottom",is_hover:false,opened:function(){},closed:function(){}},init:function(f,g,e){Foundation.inherit(this,"throttle");this.bindings(g,e);},events:function(g){var e=this,f=e.S;f(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(i){var h=f(this).data(e.attr_name(true)+"-init")||e.settings;if(!h.is_hover||Modernizr.touch){i.preventDefault();e.toggle(c(this));}}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(k){var j=f(this),l,i;clearTimeout(e.timeout);if(j.data(e.data_attr())){l=f("#"+j.data(e.data_attr()));i=j;}else{l=j;i=f("["+e.attr_name()+"='"+l.attr("id")+"']");}var h=i.data(e.attr_name(true)+"-init")||e.settings;if(f(k.target).data(e.data_attr())&&h.is_hover){e.closeall.call(e);}if(h.is_hover){e.open.apply(e,[l,i]);}}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(i){var h=f(this);e.timeout=setTimeout(function(){if(h.data(e.data_attr())){var j=h.data(e.data_attr(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,f("#"+h.data(e.data_attr())));}}else{var k=f("["+e.attr_name()+'="'+f(this).attr("id")+'"]'),j=k.data(e.attr_name(true)+"-init")||e.settings;if(j.is_hover){e.close.call(e,h);}}}.bind(this),150);}).on("click.fndtn.dropdown",function(i){var h=f(i.target).closest("["+e.attr_name()+"-content]");if(f(i.target).data(e.data_attr())||f(i.target).parent().data(e.data_attr())){return;}if(!(f(i.target).data("revealId"))&&(h.length>0&&(f(i.target).is("["+e.attr_name()+"-content]")||c.contains(h.first()[0],i.target)))){i.stopPropagation();return;}e.close.call(e,f("["+e.attr_name()+"-content]"));}).on("opened.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.opened.call(this);}).on("closed.fndtn.dropdown","["+e.attr_name()+"-content]",function(){e.settings.closed.call(this);});f(b).off(".dropdown").on("resize.fndtn.dropdown",e.throttle(function(){e.resize.call(e);},50));this.resize();},close:function(f){var e=this;f.each(function(){if(e.S(this).hasClass(e.settings.active_class)){e.S(this).css(Foundation.rtl?"right":"left","-99999px").removeClass(e.settings.active_class).prev("["+e.attr_name()+"]").removeClass(e.settings.active_class).removeData("target");e.S(this).trigger("closed").trigger("closed.fndtn.dropdown",[f]);}});},closeall:function(){var e=this;c.each(e.S("["+this.attr_name()+"-content]"),function(){e.close.call(e,e.S(this));});},open:function(f,e){this.css(f.addClass(this.settings.active_class),e);f.prev("["+this.attr_name()+"]").addClass(this.settings.active_class);f.data("target",e.get(0)).trigger("opened").trigger("opened.fndtn.dropdown",[f,e]);},data_attr:function(){if(this.namespace.length>0){return this.namespace+"-"+this.name;}return this.name;},toggle:function(e){var f=this.S("#"+e.data(this.data_attr()));if(f.length===0){return;}this.close.call(this,this.S("["+this.attr_name()+"-content]").not(f));if(f.hasClass(this.settings.active_class)){this.close.call(this,f);if(f.data("target")!==e.get(0)){this.open.call(this,f,e);}}else{this.open.call(this,f,e);}},resize:function(){var f=this.S("["+this.attr_name()+"-content].open"),e=this.S("["+this.attr_name()+"='"+f.attr("id")+"']");if(f.length&&e.length){this.css(f,e);}},css:function(i,h){var e=Math.max((h.width()-i.width())/2,8);this.clear_idx();if(this.small()){var g=this.dirs.bottom.call(i,h);i.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:g.top});i.css(Foundation.rtl?"right":"left",e);}else{var f=h.data(this.attr_name(true)+"-init")||this.settings;this.style(i,h,f);}return i;},style:function(h,g,f){var e=c.extend({position:"absolute"},this.dirs[f.align].call(h,g,f));h.attr("style","").css(e);},dirs:{_base:function(e){var f=this.offsetParent(),h=f.offset(),g=e.offset();g.top-=h.top;g.left-=h.left;return g;},top:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=8;this.addClass("drop-top");if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h);}if(Foundation.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top-this.outerHeight()};}return{left:h.left,top:h.top-this.outerHeight()};},bottom:function(f,g){var e=Foundation.libs.dropdown,h=e.dirs._base.call(this,f),i=8;if(f.outerWidth()<this.outerWidth()||e.small()){e.adjust_pip(i,h);}if(e.rtl){return{left:h.left-this.outerWidth()+f.outerWidth(),top:h.top+f.outerHeight()};}return{left:h.left,top:h.top+f.outerHeight()};},left:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-left");return{left:g.left-this.outerWidth(),top:g.top};},right:function(e,f){var g=Foundation.libs.dropdown.dirs._base.call(this,e);this.addClass("drop-right");return{left:g.left+e.outerWidth(),top:g.top};}},adjust_pip:function(k,j){var f=Foundation.stylesheet;if(this.small()){k+=j.left-8;}this.rule_idx=f.cssRules.length;var h=".f-dropdown.open:before",g=".f-dropdown.open:after",e="left: "+k+"px;",i="left: "+(k-1)+"px;";if(f.insertRule){f.insertRule([h,"{",e,"}"].join(" "),this.rule_idx);f.insertRule([g,"{",i,"}"].join(" "),this.rule_idx+1);}else{f.addRule(h,e,this.rule_idx);f.addRule(g,i,this.rule_idx+1);}},clear_idx:function(){var e=Foundation.stylesheet;if(this.rule_idx){e.deleteRule(this.rule_idx);e.deleteRule(this.rule_idx);delete this.rule_idx;}},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches;},off:function(){this.S(this.scope).off(".fndtn.dropdown");this.S("html, body").off(".fndtn.dropdown");this.S(b).off(".fndtn.dropdown");this.S("[data-dropdown-content]").off(".fndtn.dropdown");},reflow:function(){}};}(jQuery,window,window.document));function tableOpen(l,d,o){try{var x=o.find(".table"),v=o.find(".table-caption"),n=o.find(".table-footnote");if(d=="HTML"){var k=window.open();k.document.open();k.document.writeln("<html><head><title>"+v.text()+'</title><link rel="stylesheet" type="text/css" href="resource/css/screen.css"><link rel="shortcut icon" href="resource/img/favicon.ico" type="image/x-icon"></head>');k.document.writeln('<body style="background-color: #ffffff;">');k.document.writeln('<div class="table-wrap">'+x.html()+'<div class="table-caption">'+v.html()+'</div><div class="table-footnote">'+n.html()+"</div>");k.document.writeln("</body></html>");k.document.close();}else{if(d=="CSV"){var y,r,g,c,j,a,q,f,z,p,i,m,h;function b(e){y=e.join("");if(e.length>0&&y!=""){var w=e.join(",");g[g.length]=w;}}g=[];r=[];c=x.find("th");c.each(function(){r[r.length]=this.textContent;});b(r);j=x.find("tbody").children("tr");a=[];j.each(function(){q=this.cells.length;f=this.cells;for(var e=0;e<q;e++){a[e]=f[e].textContent;}b(a);});z=g.join("\n");p=l+".csv";i=document.createElement("a");if(window.navigator.msSaveOrOpenBlob){m=new Blob([z]);window.navigator.msSaveOrOpenBlob(m,p);}else{if(i.download!==undefined){m=new Blob([z],{type:"text/csv;charset=utf-8;"});h=URL.createObjectURL(m);i.setAttribute("href",h);i.setAttribute("download",p);document.body.appendChild(i);i.click();document.body.removeChild(i);}else{var k=window.open();k.document.open();k.document.write(z);k.document.close();}}}}}catch(u){var t="Our system is having a bad day. We are working on it. Please check back later.";}return false;}if(window.figshare){window.figshare.load(window.WombatConfig.figShareInstitutionString,function(d){var g=document.querySelectorAll(".figshare_widget");var a=[];for(var c=0,h=g.length;c<h;c+=1){var b=g[c].getAttribute("doi");var f=b.split(".")[2];var e=new d({doi:b,extraClass:f});e.initialize();e.mount(g[c]);a.push(e);}window.loadedWidgets=a;});}(function(a){a.fn.hoverEnhanced=function(b){var c={trigger:""};b=a.extend(c,b);return this.each(function(){var d=a(this);d.hoverIntent(function(){d.addClass("reveal");},function(){d.removeClass("reveal");});if(a.support.touchEvents){d.unbind("mouseenter").unbind("mouseleave");d.find(b.trigger).on("click",function(){d.siblings().removeClass("reveal");d.toggleClass("reveal");});}});};})(jQuery);(function(){function aw(o,n){var r;o||(o={});for(r in n){o[r]=n[r];}return o;}function j(){for(var o=0,n=arguments,t=n.length,r={};o<t;o++){r[n[o++]]=n[o];}return r;}function at(o,n){return parseInt(o,n||10);}function bR(n){return typeof n==="string";}function aQ(n){return typeof n==="object";}function bD(n){return Object.prototype.toString.call(n)==="[object Array]";}function bO(n){return typeof n==="number";}function bC(n){return a8.log(n)/a8.LN10;}function aZ(n){return a8.pow(10,n);}function bz(o,n){for(var r=o.length;r--;){if(o[r]===n){o.splice(r,1);break;}}}function au(n){return n!==ar&&n!==null;}function ao(o,n,w){var t,r;if(bR(n)){au(w)?o.setAttribute(n,w):o&&o.getAttribute&&(r=o.getAttribute(n));}else{if(au(n)&&aQ(n)){for(t in n){o.setAttribute(t,n[t]);}}}return r;}function bi(n){return bD(n)?n:[n];}function ay(){var o=arguments,n,t,r=o.length;for(n=0;n<r;n++){if(t=o[n],typeof t!=="undefined"&&t!==null){return t;}}}function bd(o,n){if(bc&&n&&n.opacity!==ar){n.filter="alpha(opacity="+n.opacity*100+")";}aw(o.style,n);}function aX(o,n,w,t,r){o=bk.createElement(o);n&&aw(o,n);r&&bd(o,{padding:0,border:aW,margin:0});w&&bd(o,w);t&&t.appendChild(o);return o;}function aA(o,n){var r=function(){};r.prototype=new o;aw(r.prototype,n);return r;}function bj(o,n,y,x){var w=a2.lang,t=o;n===-1?(n=(o||0).toString(),o=n.indexOf(".")>-1?n.split(".")[1].length:0):o=isNaN(n=a3(n))?2:n;var n=o,y=y===void 0?w.decimalPoint:y,x=x===void 0?w.thousandsSep:x,w=t<0?"-":"",o=String(at(t=a3(+t||0).toFixed(n))),r=o.length>3?o.length%3:0;return w+(r?o.substr(0,r)+x:"")+o.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+x)+(n?y+a3(t-o).toFixed(n).slice(2):"");}function bH(o,n){return Array((n||2)+1-String(o).length).join(0)+o;}function a5(o,n,w,t){var r,w=ay(w,1);r=o/w;n||(n=[1,2,2.5,5,10],t&&t.allowDecimals===!1&&(w===1?n=[1,2,5,10]:w<=0.1&&(n=[1/w])));for(t=0;t<n.length;t++){if(o=n[t],r<=(n[t]+(n[t+1]||n[t]))/2){break;}}o*=w;return o;}function bG(o,n){var y=n||[[bs,[1,2,5,10,20,25,50,100,200,500]],[aB,[1,2,5,10,15,30]],[bu,[1,2,5,10,15,30]],[aI,[1,2,3,4,6,8,12]],[aG,[1,2]],[aO,[1,2]],[aj,[1,2,3,4,6]],[bp,null]],x=y[y.length-1],w=bm[x[0]],t=x[1],r;for(r=0;r<y.length;r++){if(x=y[r],w=bm[x[0]],t=x[1],y[r+1]&&o<=(w*t[t.length-1]+bm[y[r+1][0]])/2){break;}}w===bm[bp]&&o<5*w&&(t=[1,2,5]);w===bm[bp]&&o<5*w&&(t=[1,2,5]);y=a5(o/w,t);return{unitRange:w,count:y,unitName:x[0]};}function bq(G,E,C,B){var A=[],z={},y=a2.global.useUTC,x,w=new Date(E),E=G.unitRange,t=G.count;E>=bm[aB]&&(w.setMilliseconds(0),w.setSeconds(E>=bm[bu]?0:t*aU(w.getSeconds()/t)));if(E>=bm[bu]){w[bM](E>=bm[aI]?0:t*aU(w[ac]()/t));}if(E>=bm[aI]){w[by](E>=bm[aG]?0:t*aU(w[h]()/t));}if(E>=bm[aG]){w[bP](E>=bm[aj]?1:t*aU(w[q]()/t));}E>=bm[aj]&&(w[a7](E>=bm[bp]?0:t*aU(w[aq]()/t)),x=w[P]());E>=bm[bp]&&(x-=x%t,w[aC](x));if(E===bm[aO]){w[bP](w[q]()-w[bA]()+ay(B,1));}B=1;x=w[P]();for(var r=w.getTime(),o=w[aq](),n=w[q](),w=y?0:(86400000+w.getTimezoneOffset()*60000)%86400000;r<C;){A.push(r),E===bm[bp]?r=e(x+B*t,0):E===bm[aj]?r=e(x,o+B*t):!y&&(E===bm[aG]||E===bm[aO])?r=e(x,o,n+B*t*(E===bm[aG]?1:7)):(r+=E*t,E<=bm[aI]&&r%bm[aG]===w&&(z[r]=aG)),B++;}A.push(r);A.info=aw(G,{higherRanks:z,totalRange:E*t});return A;}function ae(){this.symbol=this.color=0;}function i(o,n){var w=o.length,t,r;for(r=0;r<w;r++){o[r].ss_i=r;}o.sort(function(x,y){t=n(x,y);return t===0?x.ss_i-y.ss_i:t;});for(r=0;r<w;r++){delete o[r].ss_i;}}function bV(o){for(var n=o.length,r=o[0];n--;){o[n]<r&&(r=o[n]);}return r;}function aE(o){for(var n=o.length,r=o[0];n--;){o[n]>r&&(r=o[n]);}return r;}function af(o,n){for(var r in o){o[r]&&o[r]!==n&&o[r].destroy&&o[r].destroy(),delete o[r];}}function bI(n){bL||(bL=aX(aD));n&&bL.appendChild(n);bL.innerHTML="";}function bl(o,n){var r="Highcharts error #"+o+": www.highcharts.com/errors/"+o;if(n){throw r;}else{a4.console&&console.log(r);}}function g(n){return parseFloat(n.toPrecision(14));}function aL(o,n){br=ay(o,n.animation);}function bQ(){var o=a2.global.useUTC,n=o?"getUTC":"get",r=o?"setUTC":"set";e=o?Date.UTC:function(w,t,A,z,y,x){return(new Date(w,t,ay(A,1),ay(z,0),ay(y,0),ay(x,0))).getTime();};ac=n+"Minutes";h=n+"Hours";bA=n+"Day";q=n+"Date";aq=n+"Month";P=n+"FullYear";bM=r+"Minutes";by=r+"Hours";bP=r+"Date";a7=r+"Month";aC=r+"FullYear";}function am(){}function aM(o,n,r){this.axis=o;this.pos=n;this.type=r||"";this.isNew=!0;r||this.addLabel();}function bf(o,n){this.axis=o;if(n){this.options=n,this.id=n.id;}return this;}function bB(o,n,y,x,w,t){var r=o.chart.inverted;this.axis=o;this.isNegative=y;this.options=n;this.x=x;this.stack=w;this.percent=t==="percent";this.alignOptions={align:n.align||(r?y?"left":"right":"center"),verticalAlign:n.verticalAlign||(r?"middle":y?"bottom":"top"),y:ay(n.y,r?4:y?14:-6),x:ay(n.x,r?y?-6:6:0)};this.textAlign=n.textAlign||(r?y?"right":"left":"center");}function aF(){this.init.apply(this,arguments);}function ag(o,n){var w=n.borderWidth,t=n.style,r=at(t.padding);this.chart=o;this.options=n;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=o.renderer.label("",0,0,n.shape,null,null,n.useHTML,null,"tooltip").attr({padding:r,fill:n.backgroundColor,"stroke-width":w,r:n.borderRadius,zIndex:8}).css(t).css({padding:0}).hide().add();aT||this.label.shadow(n.shadow);this.shared=n.shared;}function l(o,n){var r=aT?"":n.chart.zoomType;this.zoomX=/x/.test(r);this.zoomY=/y/.test(r);this.options=n;this.chart=o;this.init(o,n.tooltip);}function bS(n){this.init(n);}function bF(o,n){var w,t=o.series;o.series=null;w=bn(a2,o);w.series=o.series=t;var t=w.chart,r=t.margin,r=aQ(r)?r:[r,r,r,r];this.optionsMarginTop=ay(t.marginTop,r[0]);this.optionsMarginRight=ay(t.marginRight,r[1]);this.optionsMarginBottom=ay(t.marginBottom,r[2]);this.optionsMarginLeft=ay(t.marginLeft,r[3]);this.runChartClick=(r=t.events)&&!!r.click;this.callback=n;this.isResizing=0;this.options=w;this.axes=[];this.series=[];this.hasCartesianSeries=t.showAxes;this.init(r);}var ar,bk=document,a4=window,a8=Math,av=a8.round,aU=a8.floor,D=a8.ceil,ap=a8.max,a0=a8.min,a3=a8.abs,aS=a8.cos,aP=a8.sin,c=a8.PI,bv=c*2/360,k=navigator.userAgent,bh=a4.opera,bc=/msie/i.test(k)&&!bh,an=bk.documentMode===8,bo=/AppleWebKit/.test(k),aY=/Firefox/.test(k),ai="http://www.w3.org/2000/svg",aN=!!bk.createElementNS&&!!bk.createElementNS(ai,"svg").createSVGRect,aK=aY&&parseInt(k.split("Firefox/")[1],10)<4,aT=!aN&&!bc&&!!bk.createElement("canvas").getContext,F,bN=bk.documentElement.ontouchstart!==ar,aH={},aJ=0,bL,a2,ax,br,ak,bm,bJ=function(){},aD="div",aW="none",u="rgba(192,192,192,"+(aN?0.000001:0.002)+")",bs="millisecond",aB="second",bu="minute",aI="hour",aG="day",aO="week",aj="month",bp="year",e,ac,h,bA,q,aq,P,bM,by,bP,a7,aC,bE={};a4.Highcharts={};ax=function(E,C,B){if(!au(C)||isNaN(C)){return"Invalid date";}var E=ay(E,"%Y-%m-%d %H:%M:%S"),A=new Date(C),z,y=A[h](),x=A[bA](),w=A[q](),t=A[aq](),r=A[P](),o=a2.lang,n=o.weekdays,C={a:n[x].substr(0,3),A:n[x],d:bH(w),e:w,b:o.shortMonths[t],B:o.months[t],m:bH(t+1),y:r.toString().substr(2,2),Y:r,H:bH(y),I:bH(y%12||12),l:y%12||12,M:bH(A[ac]()),p:y<12?"AM":"PM",P:y<12?"am":"pm",S:bH(A.getSeconds()),L:bH(av(C%1000),3)};for(z in C){E=E.replace("%"+z,C[z]);}return B?E.substr(0,1).toUpperCase()+E.substr(1):E;};ae.prototype={wrapColor:function(n){if(this.color>=n){this.color=0;}},wrapSymbol:function(n){if(this.symbol>=n){this.symbol=0;}}};bm=j(bs,1,aB,1000,bu,60000,aI,3600000,aG,86400000,aO,604800000,aj,2592000000,bp,31556952000);ak={init:function(B,A,z){var A=A||"",y=B.shift,x=A.indexOf("C")>-1,w=x?7:3,t,A=A.split(" "),z=[].concat(z),r,o,n=function(C){for(t=C.length;t--;){C[t]==="M"&&C.splice(t+1,0,C[t+1],C[t+2],C[t+1],C[t+2]);}};x&&(n(A),n(z));B.isArea&&(r=A.splice(A.length-6,6),o=z.splice(z.length-6,6));if(y<=z.length/w){for(;y--;){z=[].concat(z).splice(0,w).concat(z);}}B.shift=0;if(A.length){for(B=z.length;A.length<B;){y=[].concat(A).splice(A.length-w,w),x&&(y[w-6]=y[w-2],y[w-5]=y[w-1]),A=A.concat(y);}}r&&(A=A.concat(r),z=z.concat(o));return[A,z];},step:function(o,n,x,w){var t=[],r=o.length;if(x===1){t=w;}else{if(r===n.length&&x<1){for(;r--;){w=parseFloat(o[r]),t[r]=isNaN(w)?o[r]:x*parseFloat(n[r]-w)+w;}}else{t=n;}}return t;}};(function(n){a4.HighchartsAdapter=a4.HighchartsAdapter||n&&{init:function(o){var y=n.fx,x=y.step,w,t=n.Tween,r=t&&t.propHooks;n.extend(n.easing,{easeOutQuad:function(A,z,E,C,B){return -C*(z/=B)*(z-2)+E;}});n.each(["cur","_default","width","height"],function(B,z){var E=x,C,A;z==="cur"?E=y.prototype:z==="_default"&&t&&(E=r[z],z="set");(C=E[z])&&(E[z]=function(G){G=B?G:this;A=G.elem;return A.attr?A.attr(G.prop,z==="cur"?ar:G.now):C.apply(this,arguments);});});w=function(z){var B=z.elem,A;if(!z.started){A=o.init(B,B.d,B.toD),z.start=A[0],z.end=A[1],z.started=!0;}B.attr("d",o.step(z.start,z.end,z.pos,B.toD));};t?r.d={set:w}:x.d=w;this.each=Array.prototype.forEach?function(A,z){return Array.prototype.forEach.call(A,z);}:function(A,z){for(var C=0,B=A.length;C<B;C++){if(z.call(A[C],A[C],C,A)===!1){return C;}}};},getScript:n.getScript,inArray:n.inArray,adapterRun:function(o,r){return n(o)[r]();},grep:n.grep,map:function(o,x){for(var w=[],t=0,r=o.length;t<r;t++){w[t]=x.call(o[t],o[t],t,o);}return w;},merge:function(){var o=arguments;return n.extend(!0,null,o[0],o[1],o[2],o[3]);},offset:function(o){return n(o).offset();},addEvent:function(o,t,r){n(o).bind(t,r);},removeEvent:function(o,w,t){var r=bk.removeEventListener?"removeEventListener":"detachEvent";bk[r]&&!o[r]&&(o[r]=function(){});n(o).unbind(w,t);},fireEvent:function(o,z,y,x){var w=n.Event(z),t="detached"+z,r;!bc&&y&&(delete y.layerX,delete y.layerY);aw(w,y);o[z]&&(o[t]=o[z],o[z]=null);n.each(["preventDefault","stopPropagation"],function(B,A){var C=w[A];w[A]=function(){try{C.call(w);}catch(E){A==="preventDefault"&&(r=!0);}};});n(o).trigger(w);o[t]&&(o[z]=o[t],o[t]=null);x&&!w.isDefaultPrevented()&&!r&&x(w);},washMouseEvent:function(o){var r=o.originalEvent||o;if(r.pageX===ar){r.pageX=o.pageX,r.pageY=o.pageY;}return r;},animate:function(o,w,t){var r=n(o);if(w.d){o.toD=w.d,w.d=1;}r.stop();r.animate(w,t);},stop:function(o){n(o).stop();}};})(a4.jQuery);var bx=a4.HighchartsAdapter,be=bx||{};bx&&bx.init.call(bx,ak);var aa=be.adapterRun,al=be.getScript,v=be.inArray,az=be.each,ah=be.grep,b=be.offset,d=be.map,bn=be.merge,a9=be.addEvent,aV=be.removeEvent,bg=be.fireEvent,p=be.washMouseEvent,a=be.animate,f=be.stop,be={enabled:!0,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px",lineHeight:"14px"}};a2={colors:"#4572A7,#AA4643,#89A54E,#80699B,#3D96AE,#DB843D,#92A8CD,#A47D7C,#B5CA92".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/2.3.3/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/2.3.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",y:15,style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",align:"center",y:30,style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},lineWidth:2,shadow:!0,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:bn(be,{enabled:!1,formatter:function(){return this.y;},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,showInLegend:!0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name;},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#3E576F",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#3E576F",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,verticalAlign:"bottom",x:0,y:0},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,shared:aT,snap:bN?25:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var aR=a2.plotOptions,bx=aR.line;bQ();var m=function(o){var n=[],r;(function(t){(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(t))?n=[at(r[1]),at(r[2]),at(r[3]),parseFloat(r[4],10)]:(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))&&(n=[at(r[1],16),at(r[2],16),at(r[3],16),1]);})(o);return{get:function(t){return n&&!isNaN(n[0])?t==="rgb"?"rgb("+n[0]+","+n[1]+","+n[2]+")":t==="a"?n[3]:"rgba("+n.join(",")+")":o;},brighten:function(t){if(bO(t)&&t!==0){var w;for(w=0;w<3;w++){n[w]+=at(t*255),n[w]<0&&(n[w]=0),n[w]>255&&(n[w]=255);}}return this;},setOpacity:function(t){n[3]=t;return this;}};};am.prototype={init:function(o,n){this.element=n==="span"?aX(n):bk.createElementNS(ai,n);this.renderer=o;this.attrSetters={};},animate:function(o,n,r){n=ay(n,br,!0);f(this);if(n){n=bn(n);if(r){n.complete=r;}a(this,o,n);}else{this.attr(o),r&&r();}},attr:function(H,G){var E,C,B,A,z=this.element,y=z.nodeName.toLowerCase(),x=this.renderer,w,t=this.attrSetters,r=this.shadows,o,n,I=this;bR(H)&&au(G)&&(E=H,H={},H[E]=G);if(bR(H)){E=H,y==="circle"?E={x:"cx",y:"cy"}[E]||E:E==="strokeWidth"&&(E="stroke-width"),I=ao(z,E)||this[E]||0,E!=="d"&&E!=="visibility"&&(I=parseFloat(I));}else{for(E in H){if(w=!1,C=H[E],B=t[E]&&t[E].call(this,C,E),B!==!1){B!==ar&&(C=B);if(E==="d"){C&&C.join&&(C=C.join(" ")),/(NaN| {2}|^$)/.test(C)&&(C="M 0 0");}else{if(E==="x"&&y==="text"){for(B=0;B<z.childNodes.length;B++){A=z.childNodes[B],ao(A,"x")===ao(z,"x")&&ao(A,"x",C);}this.rotation&&ao(z,"transform","rotate("+this.rotation+" "+C+" "+at(H.y||ao(z,"y"))+")");}else{if(E==="fill"){C=x.color(C,z,E);}else{if(y==="circle"&&(E==="x"||E==="y")){E={x:"cx",y:"cy"}[E]||E;}else{if(y==="rect"&&E==="r"){ao(z,{rx:C,ry:C}),w=!0;}else{if(E==="translateX"||E==="translateY"||E==="rotation"||E==="verticalAlign"){w=n=!0;}else{if(E==="stroke"){C=x.color(C,z,E);}else{if(E==="dashstyle"){if(E="stroke-dasharray",C=C&&C.toLowerCase(),C==="solid"){C=aW;}else{if(C){C=C.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(B=C.length;B--;){C[B]=at(C[B])*H["stroke-width"];}C=C.join(",");}}}else{if(E==="isTracker"){this[E]=C;}else{if(E==="width"){C=at(C);}else{if(E==="align"){E="text-anchor",C={left:"start",center:"middle",right:"end"}[C];}else{if(E==="title"){B=z.getElementsByTagName("title")[0],B||(B=bk.createElementNS(ai,"title"),z.appendChild(B)),B.textContent=C;}}}}}}}}}}}}E==="strokeWidth"&&(E="stroke-width");bo&&E==="stroke-width"&&C===0&&(C=0.000001);this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(E)&&(o||(this.symbolAttr(H),o=!0),w=!0);if(r&&/^(width|height|visibility|x|y|d|transform)$/.test(E)){for(B=r.length;B--;){ao(r[B],E,E==="height"?ap(C-(r[B].cutHeight||0),0):C);}}if((E==="width"||E==="height")&&y==="rect"&&C<0){C=0;}this[E]=C;n&&this.updateTransform();E==="text"?(C!==this.textStr&&delete this.bBox,this.textStr=C,this.added&&x.buildText(this)):w||ao(z,E,C);}}}return I;},symbolAttr:function(o){var n=this;az("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(r){n[r]=ay(o[r],n[r]);});n.attr({d:n.renderer.symbols[n.symbolName](n.x,n.y,n.width,n.height,n)});},clip:function(n){return this.attr("clip-path",n?"url("+this.renderer.url+"#"+n.id+")":aW);},crisp:function(A,z,y,x,w){var t,r={},o={},n,A=A||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;n=av(A)%2/2;o.x=aU(z||this.x||0)+n;o.y=aU(y||this.y||0)+n;o.width=aU((x||this.width||0)-2*n);o.height=aU((w||this.height||0)-2*n);o.strokeWidth=A;for(t in o){this[t]!==o[t]&&(this[t]=r[t]=o[t]);}return r;},css:function(o){var n=this.element,n=o&&o.width&&n.nodeName.toLowerCase()==="text",w,t="",r=function(y,x){return"-"+x.toLowerCase();};if(o&&o.color){o.fill=o.color;}this.styles=o=aw(this.styles,o);aT&&n&&delete o.width;if(bc&&!aN){n&&delete o.width,bd(this.element,o);}else{for(w in o){t+=w.replace(/([A-Z])/g,r)+":"+o[w]+";";}this.attr({style:t});}n&&this.added&&this.renderer.buildText(this);return this;},on:function(o,n){var r=n;bN&&o==="click"&&(o="touchstart",r=function(t){t.preventDefault();n();});this.element["on"+o]=r;return this;},setRadialReference:function(n){this.element.radialReference=n;return this;},translate:function(o,n){return this.attr({translateX:o,translateY:n});},invert:function(){this.inverted=!0;this.updateTransform();return this;},htmlCss:function(o){var n=this.element;if(n=o&&n.tagName==="SPAN"&&o.width){delete o.width,this.textWidth=n,this.updateTransform();}this.styles=aw(this.styles,o);bd(this.element,o);return this;},htmlGetBBox:function(){var o=this.element,n=this.bBox;if(!n){if(o.nodeName==="text"){o.style.position="absolute";}n=this.bBox={x:o.offsetLeft,y:o.offsetTop,width:o.offsetWidth,height:o.offsetHeight};}return n;},htmlUpdateTransform:function(){if(this.added){var K=this.renderer,J=this.element,I=this.translateX||0,H=this.translateY||0,G=this.x||0,E=this.y||0,C=this.textAlign||"left",B={left:0,center:0.5,right:1}[C],A=C&&C!=="left",z=this.shadows;if(I||H){bd(J,{marginLeft:I,marginTop:H}),z&&az(z,function(N){bd(N,{marginLeft:I+1,marginTop:H+1});});}this.inverted&&az(J.childNodes,function(N){K.invertChild(N,J);});if(J.tagName==="SPAN"){var y,x,z=this.rotation,w,t=0,n=1,t=0,M;w=at(this.textWidth);var r=this.xCorr||0,o=this.yCorr||0,L=[z,C,J.innerHTML,this.textWidth].join(",");y={};if(L!==this.cTT){if(au(z)){K.isSVG?(r=bc?"-ms-transform":bo?"-webkit-transform":aY?"MozTransform":bh?"-o-transform":"",y[r]=y.transform="rotate("+z+"deg)"):(t=z*bv,n=aS(t),t=aP(t),y.filter=z?["progid:DXImageTransform.Microsoft.Matrix(M11=",n,", M12=",-t,", M21=",t,", M22=",n,", sizingMethod='auto expand')"].join(""):aW),bd(J,y);}y=ay(this.elemWidth,J.offsetWidth);x=ay(this.elemHeight,J.offsetHeight);y>w&&/[ \-]/.test(J.innerText)&&(bd(J,{width:w+"px",display:"block",whiteSpace:"normal"}),y=w);w=K.fontMetrics(J.style.fontSize).b;r=n<0&&-y;o=t<0&&-x;M=n*t<0;r+=t*w*(M?1-B:B);o-=n*w*(z?M?B:1-B:1);A&&(r-=y*B*(n<0?-1:1),z&&(o-=x*B*(t<0?-1:1)),bd(J,{textAlign:C}));this.xCorr=r;this.yCorr=o;}bd(J,{left:G+r+"px",top:E+o+"px"});this.cTT=L;}}else{this.alignOnAdd=!0;}},updateTransform:function(){var o=this.translateX||0,n=this.translateY||0,w=this.inverted,t=this.rotation,r=[];w&&(o+=this.attr("width"),n+=this.attr("height"));(o||n)&&r.push("translate("+o+","+n+")");w?r.push("rotate(90) scale(-1,1)"):t&&r.push("rotate("+t+" "+(this.x||0)+" "+(this.y||0)+")");r.length&&ao(this.element,"transform",r.join(" "));},toFront:function(){var n=this.element;n.parentNode.appendChild(n);return this;},align:function(o,n,z){o?(this.alignOptions=o,this.alignByTranslate=n,z||this.renderer.alignedObjects.push(this)):(o=this.alignOptions,n=this.alignByTranslate);var z=ay(z,this.renderer),y=o.align,x=o.verticalAlign,w=(z.x||0)+(o.x||0),t=(z.y||0)+(o.y||0),r={};if(y==="right"||y==="center"){w+=(z.width-(o.width||0))/{right:1,center:2}[y];}r[n?"translateX":"x"]=av(w);if(x==="bottom"||x==="middle"){t+=(z.height-(o.height||0))/({bottom:1,middle:2}[x]||1);}r[n?"translateY":"y"]=av(t);this[this.placed?"animate":"attr"](r);this.placed=!0;this.alignAttr=r;return this;},getBBox:function(){var o=this.bBox,n=this.renderer,z,y=this.rotation,x=this.element,w=this.styles,t=y*bv;if(!o){if(x.namespaceURI===ai||n.forExport){try{o=x.getBBox?aw({},x.getBBox()):{width:x.offsetWidth,height:x.offsetHeight};}catch(r){}if(!o||o.width<0){o={width:0,height:0};}}else{o=this.htmlGetBBox();}if(n.isSVG&&(n=o.width,z=o.height,y)){o.width=a3(z*aP(t))+a3(n*aS(t)),o.height=a3(z*aS(t))+a3(n*aP(t));}if(bc&&w&&w.fontSize==="11px"&&z===22.700000762939453){o.height=14;}this.bBox=o;}return o;},show:function(){return this.attr({visibility:"visible"});},hide:function(){return this.attr({visibility:"hidden"});},add:function(o){var n=this.renderer,z=o||n,y=z.element||n.box,x=y.childNodes,w=this.element,t=ao(w,"zIndex"),r;if(o){this.parentGroup=o;}this.parentInverted=o&&o.inverted;this.textStr!==void 0&&n.buildText(this);if(t){z.handleZ=!0,t=at(t);}if(z.handleZ){for(z=0;z<x.length;z++){if(o=x[z],n=ao(o,"zIndex"),o!==w&&(at(n)>t||!au(t)&&au(n))){y.insertBefore(w,o);r=!0;break;}}}r||y.appendChild(w);this.added=!0;bg(this,"add");return this;},safeRemoveChild:function(o){var n=o.parentNode;n&&n.removeChild(o);},destroy:function(){var o=this,n=o.element||{},w=o.shadows,t,r;n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=null;f(o);if(o.clipPath){o.clipPath=o.clipPath.destroy();}if(o.stops){for(r=0;r<o.stops.length;r++){o.stops[r]=o.stops[r].destroy();}o.stops=null;}o.safeRemoveChild(n);w&&az(w,function(x){o.safeRemoveChild(x);});bz(o.renderer.alignedObjects,o);for(t in o){delete o[t];}return null;},empty:function(){for(var o=this.element,n=o.childNodes,r=n.length;r--;){o.removeChild(n[r]);}},shadow:function(C,B,A){var z=[],y,x,w=this.element,t,r,o,n;if(C){r=ay(C.width,3);o=(C.opacity||0.15)/r;n=this.parentInverted?"(-1,-1)":"("+ay(C.offsetX,1)+", "+ay(C.offsetY,1)+")";for(y=1;y<=r;y++){x=w.cloneNode(0);t=r*2+1-2*y;ao(x,{isShadow:"true",stroke:C.color||"black","stroke-opacity":o*y,"stroke-width":t,transform:"translate"+n,fill:aW});if(A){ao(x,"height",ap(ao(x,"height")-t,0)),x.cutHeight=t;}B?B.element.appendChild(x):w.parentNode.insertBefore(x,w);z.push(x);}this.shadows=z;}return this;}};var bU=function(){this.init.apply(this,arguments);};bU.prototype={Element:am,init:function(o,n,y,x){var w=location,t;t=this.createElement("svg").attr({xmlns:ai,version:"1.1"});o.appendChild(t.element);this.isSVG=!0;this.box=t.element;this.boxWrapper=t;this.alignedObjects=[];this.url=(aY||bo)&&bk.getElementsByTagName("base").length?w.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.defs=this.createElement("defs").add();this.forExport=x;this.gradients={};this.setSize(n,y,!1);var r;if(aY&&o.getBoundingClientRect){this.subPixelFix=n=function(){bd(o,{left:0,top:0});r=o.getBoundingClientRect();bd(o,{left:D(r.left)-r.left+"px",top:D(r.top)-r.top+"px"});},n(),a9(a4,"resize",n);}},isHidden:function(){return !this.boxWrapper.getBBox().width;},destroy:function(){var n=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();af(this.gradients||{});this.gradients=null;if(n){this.defs=n.destroy();}this.subPixelFix&&aV(a4,"resize",this.subPixelFix);return this.alignedObjects=null;},createElement:function(o){var n=new this.Element;n.init(this,o);return n;},draw:function(){},buildText:function(E){for(var C=E.element,B=ay(E.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),A=C.childNodes,z=/style="([^"]+)"/,y=/href="([^"]+)"/,x=ao(C,"x"),w=E.styles,t=w&&w.width&&at(w.width),r=w&&w.lineHeight,o,w=A.length,n=[];w--;){C.removeChild(A[w]);}t&&!E.added&&this.box.appendChild(C);B[B.length-1]===""&&B.pop();az(B,function(K,J){var H,G=0,I,K=K.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");H=K.split("|||");az(H,function(S){if(S!==""||H.length===1){var L={},O=bk.createElementNS(ai,"tspan"),R;z.test(S)&&(R=S.match(z)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),ao(O,"style",R));y.test(S)&&(ao(O,"onclick",'location.href="'+S.match(y)[1]+'"'),bd(O,{cursor:"pointer"}));S=(S.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");O.appendChild(bk.createTextNode(S));G?L.dx=3:L.x=x;if(!G){if(J){!aN&&E.renderer.forExport&&bd(O,{display:"block"});I=a4.getComputedStyle&&at(a4.getComputedStyle(o,null).getPropertyValue("line-height"));if(!I||isNaN(I)){var N;if(!(N=r)){if(!(N=o.offsetHeight)){n[J]=C.getBBox?C.getBBox().height:E.renderer.fontMetrics(C.style.fontSize).h,N=av(n[J]-(n[J-1]||0))||18;}}I=N;}ao(O,"dy",I);}o=O;}ao(O,L);C.appendChild(O);G++;if(t){for(var S=S.replace(/([^\^])-/g,"$1- ").split(" "),M=[];S.length||M.length;){delete E.bBox,N=E.getBBox().width,L=N>t,!L||S.length===1?(S=M,M=[],S.length&&(O=bk.createElementNS(ai,"tspan"),ao(O,{dy:r||16,x:x}),R&&ao(O,"style",R),C.appendChild(O),N>t&&(t=N))):(O.removeChild(O.firstChild),M.unshift(S.pop())),S.length&&O.appendChild(bk.createTextNode(S.join(" ").replace(/- /g,"-")));}}}});});},button:function(H,G,E,C,B,A,z){var y=this.label(H,G,E),x=0,w,t,r,o,n,H={x1:0,y1:0,x2:0,y2:1},B=bn(j("stroke-width",1,"stroke","#999","fill",j("linearGradient",H,"stops",[[0,"#FFF"],[1,"#DDD"]]),"r",3,"padding",3,"style",j("color","black")),B);r=B.style;delete B.style;A=bn(B,j("stroke","#68A","fill",j("linearGradient",H,"stops",[[0,"#FFF"],[1,"#ACF"]])),A);o=A.style;delete A.style;z=bn(B,j("stroke","#68A","fill",j("linearGradient",H,"stops",[[0,"#9BD"],[1,"#CDF"]])),z);n=z.style;delete z.style;a9(y.element,"mouseenter",function(){y.attr(A).css(o);});a9(y.element,"mouseleave",function(){w=[B,A,z][x];t=[r,o,n][x];y.attr(w).css(t);});y.setState=function(I){(x=I)?I===2&&y.attr(z).css(n):y.attr(B).css(r);};return y.on("click",function(){C.call(y);}).attr(B).css(aw({cursor:"default"},r));},crispLine:function(o,n){o[1]===o[4]&&(o[1]=o[4]=av(o[1])-n%2/2);o[2]===o[5]&&(o[2]=o[5]=av(o[2])+n%2/2);return o;},path:function(o){var n={fill:aW};bD(o)?n.d=o:aQ(o)&&aw(n,o);return this.createElement("path").attr(n);},circle:function(o,n,r){o=aQ(o)?o:{x:o,y:n,r:r};return this.createElement("circle").attr(o);},arc:function(o,n,x,w,t,r){if(aQ(o)){n=o.y,x=o.r,w=o.innerR,t=o.start,r=o.end,o=o.x;}return this.symbol("arc",o||0,n||0,x||0,x||0,{innerR:w||0,start:t||0,end:r||0});},rect:function(o,n,x,w,t,r){t=aQ(o)?o.r:t;t=this.createElement("rect").attr({rx:t,ry:t,fill:aW});return t.attr(aQ(o)?o:t.crisp(r,o,n,ap(x,0),ap(w,0)));},setSize:function(o,n,w){var t=this.alignedObjects,r=t.length;this.width=o;this.height=n;for(this.boxWrapper[ay(w,!0)?"animate":"attr"]({width:o,height:n});r--;){t[r].align();}},g:function(o){var n=this.createElement("g");return au(o)?n.attr({"class":"highcharts-"+o}):n;},image:function(o,n,x,w,t){var r={preserveAspectRatio:aW};arguments.length>1&&aw(r,{x:n,y:x,width:w,height:t});r=this.createElement("image").attr(r);r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",o):r.element.setAttribute("hc-svg-href",o);return r;},symbol:function(C,B,A,z,y,x){var w,t=this.symbols[C],t=t&&t(av(B),av(A),z,y,x),r=/^url\((.*?)\)$/,o,n;t?(w=this.path(t),aw(w,{symbolName:C,x:B,y:A,width:z,height:y}),x&&aw(w,x)):r.test(C)&&(n=function(G,E){G.attr({width:E[0],height:E[1]});G.alignByTranslate||G.translate(-av(E[0]/2),-av(E[1]/2));},o=C.match(r)[1],C=aH[o],w=this.image(o).attr({x:B,y:A}),C?n(w,C):(w.attr({width:0,height:0}),aX("img",{onload:function(){n(w,aH[o]=[this.width,this.height]);},src:o})));return w;},symbols:{circle:function(o,n,w,t){var r=0.166*w;return["M",o+w/2,n,"C",o+w+r,n,o+w+r,n+t,o+w/2,n+t,"C",o-r,n+t,o-r,n,o+w/2,n,"Z"];},square:function(o,n,t,r){return["M",o,n,"L",o+t,n,o+t,n+r,o,n+r,"Z"];},triangle:function(o,n,t,r){return["M",o+t/2,n,"L",o+t,n+r,o,n+r,"Z"];},"triangle-down":function(o,n,t,r){return["M",o,n,"L",o+t,n,o+t/2,n+r,"Z"];},diamond:function(o,n,t,r){return["M",o+t/2,n,"L",o+t,n+r/2,o+t/2,n+r,o,n+r/2,"Z"];},arc:function(C,B,A,z,y){var x=y.start,A=y.r||A||z,w=y.end-0.000001,z=y.innerR,t=y.open,r=aS(x),o=aP(x),n=aS(w),w=aP(w),y=y.end-x<c?0:1;return["M",C+A*r,B+A*o,"A",A,A,0,y,1,C+A*n,B+A*w,t?"M":"L",C+z*n,B+z*w,"A",z,z,0,y,0,C+z*r,B+z*o,t?"":"Z"];}},clipRect:function(o,n,x,w){var t="highcharts-"+aJ++,r=this.createElement("clipPath").attr({id:t}).add(this.defs),o=this.rect(o,n,x,w,0).add(r);o.id=t;o.clipPath=r;return o;},color:function(C,B,A){var z=this,y,x=/^rgba/,w;C&&C.linearGradient?w="linearGradient":C&&C.radialGradient&&(w="radialGradient");if(w){var A=C[w],t=z.gradients,r,o,n,B=B.radialReference;if(!A.id||!t[A.id]){bD(A)&&(C[w]=A={x1:A[0],y1:A[1],x2:A[2],y2:A[3],gradientUnits:"userSpaceOnUse"}),w==="radialGradient"&&B&&!au(A.gradientUnits)&&aw(A,{cx:B[0]-B[2]/2+A.cx*B[2],cy:B[1]-B[2]/2+A.cy*B[2],r:A.r*B[2],gradientUnits:"userSpaceOnUse"}),A.id="highcharts-"+aJ++,t[A.id]=r=z.createElement(w).attr(A).add(z.defs),r.stops=[],az(C.stops,function(E){x.test(E[1])?(y=m(E[1]),o=y.get("rgb"),n=y.get("a")):(o=E[1],n=1);E=z.createElement("stop").attr({offset:E[0],"stop-color":o,"stop-opacity":n}).add(r);r.stops.push(E);});}return"url("+z.url+"#"+A.id+")";}else{return x.test(C)?(y=m(C),ao(B,A+"-opacity",y.get("a")),y.get("rgb")):(B.removeAttribute(A+"-opacity"),C);}},text:function(o,n,x,w){var t=a2.chart.style,r=aT||!aN&&this.forExport;if(w&&!this.forExport){return this.html(o,n,x);}n=av(ay(n,0));x=av(ay(x,0));o=this.createElement("text").attr({x:n,y:x,text:o}).css({fontFamily:t.fontFamily,fontSize:t.fontSize});r&&o.css({position:"absolute"});o.x=n;o.y=x;return o;},html:function(o,n,z){var y=a2.chart.style,x=this.createElement("span"),w=x.attrSetters,t=x.element,r=x.renderer;w.text=function(A){A!==t.innerHTML&&delete this.bBox;t.innerHTML=A;return !1;};w.x=w.y=w.align=function(B,A){A==="align"&&(A="textAlign");x[A]=B;x.htmlUpdateTransform();return !1;};x.attr({text:o,x:av(n),y:av(z)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:y.fontFamily,fontSize:y.fontSize});x.css=x.htmlCss;if(r.isSVG){x.add=function(B){var A,E=r.box.parentNode,C=[];if(B){if(A=B.div,!A){for(;B;){C.push(B),B=B.parentGroup;}az(C.reverse(),function(G){var H;A=G.div=G.div||aX(aD,{className:ao(G.element,"class")},{position:"absolute",left:(G.translateX||0)+"px",top:(G.translateY||0)+"px"},A||E);H=A.style;aw(G.attrSetters,{translateX:function(I){H.left=I+"px";},translateY:function(I){H.top=I+"px";},visibility:function(J,I){H[I]=J;}});});}}else{A=E;}A.appendChild(t);x.added=!0;x.alignOnAdd&&x.htmlUpdateTransform();return x;};}return x;},fontMetrics:function(o){var o=at(o||11),o=o<24?o+4:av(o*1.2),n=av(o*0.8);return{h:o,b:n};},label:function(Y,X,W,V,U,T,S,R,O){function N(){var w=H.styles,w=w&&w.textAlign,o=Z*(1-E),y;y=R?0:n;if(au(r)&&(w==="center"||w==="right")){o+={center:0.5,right:1}[w]*(r-G.width);}(o!==C.x||y!==C.y)&&C.attr({x:o,y:y});C.x=o;C.y=y;}function M(w,o){J?J.attr(w,o):I[w]=o;}function L(){C.add(H);H.attr({text:Y,x:X,y:W});au(U)&&H.attr({anchorX:U,anchorY:T});}var K=this,H=K.g(O),C=K.text("",0,0,S).attr({zIndex:1}),J,G,E=0,Z=3,r,A,B,x,t=0,I={},n,S=H.attrSetters;a9(H,"add",L);S.width=function(o){r=o;return !1;};S.height=function(o){A=o;return !1;};S.padding=function(o){au(o)&&o!==Z&&(Z=o,N());return !1;};S.align=function(o){E={left:0,center:0.5,right:1}[o];return !1;};S.text=function(w,o){C.attr(o,w);var y;y=C.element.style;G=(r===void 0||A===void 0||H.styles.textAlign)&&C.getBBox();H.width=(r||G.width||0)+2*Z;H.height=(A||G.height||0)+2*Z;n=Z+K.fontMetrics(y&&y.fontSize).b;if(!J){y=R?-n:0,H.box=J=V?K.symbol(V,-E*Z,y,H.width,H.height):K.rect(-E*Z,y,H.width,H.height,0,I["stroke-width"]),J.add(H);}J.attr(bn({width:H.width,height:H.height},I));I=null;N();return !1;};S["stroke-width"]=function(w,o){t=w%2/2;M(o,w);return !1;};S.stroke=S.fill=S.r=function(w,o){M(o,w);return !1;};S.anchorX=function(w,o){U=w;M(o,w+t-B);return !1;};S.anchorY=function(w,o){T=w;M(o,w-x);return !1;};S.x=function(o){H.x=o;o-=E*((r||G.width)+Z);B=av(o);H.attr("translateX",B);return !1;};S.y=function(o){x=H.y=av(o);H.attr("translateY",o);return !1;};var z=H.css;return aw(H,{css:function(w){if(w){var o={},w=bn({},w);az("fontSize,fontWeight,fontFamily,color,lineHeight,width".split(","),function(y){w[y]!==ar&&(o[y]=w[y],delete w[y]);});C.css(o);}return z.call(H,w);},getBBox:function(){return J.getBBox();},shadow:function(o){J.shadow(o);return H;},destroy:function(){aV(H,"add",L);aV(H.element,"mouseenter");aV(H.element,"mouseleave");C&&(C=C.destroy());J&&(J=J.destroy());am.prototype.destroy.call(H);}});}};F=bU;var ad;if(!aN&&!aT){ad={init:function(o,n){var t=["<",n,' filled="f" stroked="f"'],r=["position: ","absolute",";"];(n==="shape"||n===aD)&&r.push("left:0;top:0;width:1px;height:1px;");an&&r.push("visibility: ",n===aD?"hidden":"visible");t.push(' style="',r.join(""),'"/>');if(n){t=n===aD||n==="span"||n==="img"?t.join(""):o.prepVML(t),this.element=aX(t);}this.renderer=o;this.attrSetters={};},add:function(o){var n=this.renderer,t=this.element,r=n.box,r=o?o.element||o:r;o&&o.inverted&&n.invertChild(t,r);r.appendChild(t);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();bg(this,"add");return this;},updateTransform:am.prototype.htmlUpdateTransform,attr:function(H,G){var E,C,B,A=this.element||{},z=A.style,y=A.nodeName,x=this.renderer,w=this.symbolName,t,r=this.shadows,o,n=this.attrSetters,I=this;bR(H)&&au(G)&&(E=H,H={},H[E]=G);if(bR(H)){E=H,I=E==="strokeWidth"||E==="stroke-width"?this.strokeweight:this[E];}else{for(E in H){if(C=H[E],o=!1,B=n[E]&&n[E].call(this,C,E),B!==!1&&C!==null){B!==ar&&(C=B);if(w&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(E)){t||(this.symbolAttr(H),t=!0),o=!0;}else{if(E==="d"){C=C||[];this.d=C.join(" ");B=C.length;for(o=[];B--;){o[B]=bO(C[B])?av(C[B]*10)-5:C[B]==="Z"?"x":C[B];}C=o.join(" ")||"x";A.path=C;if(r){for(B=r.length;B--;){r[B].path=r[B].cutOff?this.cutOffPath(C,r[B].cutOff):C;}}o=!0;}else{if(E==="visibility"){if(r){for(B=r.length;B--;){r[B].style[E]=C;}}y==="DIV"&&(C=C==="hidden"?"-999em":0,E="top");z[E]=C;o=!0;}else{if(E==="zIndex"){C&&(z[E]=C),o=!0;}else{if(E==="width"||E==="height"){C=ap(0,C),this[E]=C,this.updateClipping?(this[E]=C,this.updateClipping()):z[E]=C,o=!0;}else{if(E==="x"||E==="y"){this[E]=C,z[{x:"left",y:"top"}[E]]=C;}else{if(E==="class"){A.className=C;}else{if(E==="stroke"){C=x.color(C,A,E),E="strokecolor";}else{if(E==="stroke-width"||E==="strokeWidth"){A.stroked=C?!0:!1,E="strokeweight",this[E]=C,bO(C)&&(C+="px");}else{if(E==="dashstyle"){(A.getElementsByTagName("stroke")[0]||aX(x.prepVML(["<stroke/>"]),null,null,A))[E]=C||"solid",this.dashstyle=C,o=!0;}else{if(E==="fill"){y==="SPAN"?z.color=C:(A.filled=C!==aW?!0:!1,C=x.color(C,A,E,this),E="fillcolor");}else{if(y==="shape"&&E==="rotation"){this[E]=C,A.style.left=-av(aP(C*bv)+1)+"px",A.style.top=av(aS(C*bv))+"px";}else{if(E==="translateX"||E==="translateY"||E==="rotation"){this[E]=C,this.updateTransform(),o=!0;}else{if(E==="text"){this.bBox=null,A.innerHTML=C,o=!0;}}}}}}}}}}}}}}o||(an?A[E]=C:ao(A,E,C));}}}return I;},clip:function(o){var n=this,w,t=n.element,r=t.parentNode;o?(w=o.members,w.push(n),n.destroyClip=function(){bz(w,n);},r&&r.className==="highcharts-tracker"&&!an&&bd(t,{visibility:"hidden"}),o=o.getCSS(n)):(n.destroyClip&&n.destroyClip(),o={clip:an?"inherit":"rect(auto)"});return n.css(o);},css:am.prototype.htmlCss,safeRemoveChild:function(n){n.parentNode&&bI(n);},destroy:function(){this.destroyClip&&this.destroyClip();return am.prototype.destroy.apply(this);},empty:function(){for(var o=this.element.childNodes,n=o.length,r;n--;){r=o[n],r.parentNode.removeChild(r);}},on:function(o,n){this.element["on"+o]=function(){var r=a4.event;r.target=r.srcElement;n(r);};return this;},cutOffPath:function(o,n){var r,o=o.split(/[ ,]/);r=o.length;if(r===9||r===11){o[r-4]=o[r-2]=at(o[r-2])-10*n;}return o.join(" ");},shadow:function(H,G,E){var C=[],B,A=this.element,z=this.renderer,y,x=A.style,w,t=A.path,r,o,n,I;t&&typeof t.value!=="string"&&(t="x");o=t;if(H){n=ay(H.width,3);I=(H.opacity||0.15)/n;for(B=1;B<=3;B++){r=n*2+1-2*B;E&&(o=this.cutOffPath(t.value,r+0.5));w=['<shape isShadow="true" strokeweight="',r,'" filled="false" path="',o,'" coordsize="10 10" style="',A.style.cssText,'" />'];y=aX(z.prepVML(w),null,{left:at(x.left)+ay(H.offsetX,1),top:at(x.top)+ay(H.offsetY,1)});if(E){y.cutOff=r+1;}w=['<stroke color="',H.color||"black",'" opacity="',I*B,'"/>'];aX(z.prepVML(w),null,null,y);G?G.element.appendChild(y):A.parentNode.insertBefore(y,A);C.push(y);}this.shadows=C;}return this;}};ad=aA(am,ad);var a6={Element:ad,isIE8:k.indexOf("MSIE 8.0")>-1,init:function(o,n,w){var t,r;this.alignedObjects=[];t=this.createElement(aD);r=t.element;r.style.position="relative";o.appendChild(t.element);this.box=r;this.boxWrapper=t;this.setSize(n,w,!1);if(!bk.namespaces.hcv){bk.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),bk.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";}},isHidden:function(){return !this.box.offsetWidth;},clipRect:function(o,n,x,w){var t=this.createElement(),r=aQ(o);return aw(t,{members:[],left:r?o.x:o,top:r?o.y:n,width:r?o.width:x,height:r?o.height:w,getCSS:function(z){var y=z.inverted,E=this.top,C=this.left,B=C+this.width,A=E+this.height,E={clip:"rect("+av(y?C:E)+"px,"+av(y?A:B)+"px,"+av(y?B:A)+"px,"+av(y?E:C)+"px)"};!y&&an&&z.element.nodeName!=="IMG"&&aw(E,{width:B+"px",height:A+"px"});return E;},updateClipping:function(){az(t.members,function(y){y.css(t.getCSS(y));});}});},color:function(bX,bW,bb,ba){var ab=this,Z,Y=/^rgba/,X,W,V=aW;bX&&bX.linearGradient?W="gradient":bX&&bX.radialGradient&&(W="pattern");if(W){var U,T,S=bX.linearGradient||bX.radialGradient,O,H,R,M,K,I="",bX=bX.stops,J,E=[],G=function(){X=['<fill colors="'+E.join(",")+'" opacity="',R,'" o:opacity2="',H,'" type="',W,'" ',I,'focus="100%" method="any" />'];aX(ab.prepVML(X),null,null,bW);};O=bX[0];J=bX[bX.length-1];O[0]>0&&bX.unshift([0,O[1]]);J[0]<1&&bX.push([1,J[1]]);az(bX,function(r,o){Y.test(r[1])?(Z=m(r[1]),U=Z.get("rgb"),T=Z.get("a")):(U=r[1],T=1);E.push(r[0]*100+"% "+U);o?(R=T,M=U):(H=T,K=U);});if(bb==="fill"){if(W==="gradient"){bb=S.x1||S[0]||0,bX=S.y1||S[1]||0,O=S.x2||S[2]||0,S=S.y2||S[3]||0,I='angle="'+(90-a8.atan((S-bX)/(O-bb))*180/c)+'"',G();}else{var V=S.r,L=V*2,n=V*2,z=S.cx,B=S.cy,N=bW.radialReference,C,V=function(){N&&(C=ba.getBBox(),z+=(N[0]-C.x)/C.width-0.5,B+=(N[1]-C.y)/C.height-0.5,L*=N[2]/C.width,n*=N[2]/C.height);I='src="'+a2.global.VMLRadialGradientURL+'" size="'+L+","+n+'" origin="0.5,0.5" position="'+z+","+B+'" color2="'+K+'" ';G();};ba.added?V():a9(ba,"add",V);V=M;}}else{V=U;}}else{if(Y.test(bX)&&bW.tagName!=="IMG"){Z=m(bX),X=["<",bb,' opacity="',Z.get("a"),'"/>'],aX(this.prepVML(X),null,null,bW),V=Z.get("rgb");}else{V=bW.getElementsByTagName(bb);if(V.length){V[0].opacity=1;}V=bX;}}return V;},prepVML:function(o){var n=this.isIE8,o=o.join("");n?(o=o.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),o=o.indexOf('style="')===-1?o.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):o.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):o=o.replace("<","<hcv:");return o;},text:bU.prototype.html,path:function(o){var n={coordsize:"10 10"};bD(o)?n.d=o:aQ(o)&&aw(n,o);return this.createElement("shape").attr(n);},circle:function(o,n,r){return this.symbol("circle").attr({x:o-r,y:n-r,width:2*r,height:2*r});},g:function(o){var n;o&&(n={className:"highcharts-"+o,"class":"highcharts-"+o});return this.createElement(aD).attr(n);},image:function(o,n,x,w,t){var r=this.createElement("img").attr({src:o});arguments.length>1&&r.attr({x:n,y:x,width:w,height:t});return r;},rect:function(o,n,y,x,w,t){if(aQ(o)){n=o.y,y=o.width,x=o.height,t=o.strokeWidth,o=o.x;}var r=this.symbol("rect");r.r=w;return r.attr(r.crisp(t,o,n,ap(y,0),ap(x,0)));},invertChild:function(o,n){var r=n.style;bd(o,{flip:"x",left:at(r.width)-1,top:at(r.height)-1,rotation:-90});},symbols:{arc:function(G,E,C,B,A){var z=A.start,y=A.end,x=A.r||C||B,C=aS(z),B=aP(z),w=aS(y),t=aP(y),r=A.innerR,o=0.08/x,n=r&&0.1/r||0;if(y-z===0){return["x"];}else{2*c-y+z<o?w=-o:y-z<n&&(w=aS(z+n));}z=["wa",G-x,E-x,G+x,E+x,G+x*C,E+x*B,G+x*w,E+x*t];A.open&&!r&&z.push("e","M",G,E);z.push("at",G-r,E-r,G+r,E+r,G+r*w,E+r*t,G+r*C,E+r*B,"x","e");return z;},circle:function(o,n,t,r){return["wa",o,n,o+t,n+r,o+t,n+r/2,o+t,n+r/2,"e"];},rect:function(o,n,z,y,x){var w=o+z,t=n+y,r;!au(x)||!x.r?w=bU.prototype.symbols.square.apply(0,arguments):(r=a0(x.r,z,y),w=["M",o+r,n,"L",w-r,n,"wa",w-2*r,n,w,n+2*r,w-r,n,w,n+r,"L",w,t-r,"wa",w-2*r,t-2*r,w,t,w,t-r,w-r,t,"L",o+r,t,"wa",o,t-2*r,o+2*r,t,o+r,t,o,t-r,"L",o,n+r,"wa",o,n,o+2*r,n+2*r,o,n+r,o+r,n,"x","e"]);return w;}}};ad=function(){this.init.apply(this,arguments);};ad.prototype=bn(bU.prototype,a6);F=ad;}var bw,bT;if(aT){bw=function(){ai="http://www.w3.org/1999/xhtml";},bw.prototype.symbols={},bT=function(){function o(){var r=n.length,t;for(t=0;t<r;t++){n[t]();}n=[];}var n=[];return{push:function(t,r){n.length===0&&al(r,o);n.push(t);}};}();}F=ad||bw||bU;aM.prototype={addLabel:function(){var E=this.axis,C=E.options,B=E.chart,A=E.horiz,z=E.categories,y=this.pos,x=C.labels,w=E.tickPositions,A=z&&A&&z.length&&!x.step&&!x.staggerLines&&!x.rotation&&B.plotWidth/w.length||!A&&B.plotWidth/2,t=y===w[0],r=y===w[w.length-1],o=z&&au(z[y])?z[y]:y,z=this.label,w=w.info,n;E.isDatetimeAxis&&w&&(n=C.dateTimeLabelFormats[w.higherRanks[y]||w.unitName]);this.isFirst=t;this.isLast=r;C=E.labelFormatter.call({axis:E,chart:B,isFirst:t,isLast:r,dateTimeLabelFormat:n,value:E.isLog?g(aZ(o)):o});y=A&&{width:ap(1,av(A-2*(x.padding||10)))+"px"};y=aw(y,x.style);if(au(z)){z&&z.attr({text:C}).css(y);}else{A={align:x.align};if(bO(x.rotation)){A.rotation=x.rotation;}this.label=au(C)&&x.enabled?B.renderer.text(C,0,0,x.useHTML).attr(A).css(y).add(E.labelGroup):null;}},getLabelSize:function(){var o=this.label,n=this.axis;return o?(this.labelBBox=o.getBBox())[n.horiz?"height":"width"]:0;},getLabelSides:function(){var o=this.axis.options.labels,n=this.labelBBox.width,o=n*{left:0,center:0.5,right:1}[o.align]-o.x;return[-o,n-o];},handleOverflow:function(G,E){var C=!0,B=this.axis,A=B.chart,z=this.isFirst,y=this.isLast,x=E.x,w=B.reversed,t=B.tickPositions;if(z||y){var r=this.getLabelSides(),o=r[0],r=r[1],A=A.plotLeft,n=A+B.len,t=(B=B.ticks[t[G+(z?1:-1)]])&&B.label.xy&&B.label.xy.x+B.getLabelSides()[z?0:1];z&&!w||y&&w?x+o<A&&(x=A-o,B&&x+r>t&&(C=!1)):x+r>n&&(x=n-r,B&&x+o<t&&(C=!1));E.x=x;}return C;},getPosition:function(o,n,y,x){var w=this.axis,t=w.chart,r=x&&t.oldChartHeight||t.chartHeight;return{x:o?w.translate(n+y,null,null,x)+w.transB:w.left+w.offset+(w.opposite?(x&&t.oldChartWidth||t.chartWidth)-w.right-w.left:0),y:o?r-w.bottom+w.offset-(w.opposite?w.height:0):r-w.translate(n+y,null,null,x)-w.transB};},getLabelPosition:function(C,B,A,z,y,x,w,t){var r=this.axis,o=r.transA,n=r.reversed,r=r.staggerLines,C=C+y.x-(x&&z?x*o*(n?-1:1):0),B=B+y.y-(x&&!z?x*o*(n?1:-1):0);au(y.y)||(B+=at(A.styles.lineHeight)*0.9-A.getBBox().height/2);r&&(B+=w/(t||1)%r*16);return{x:C,y:B};},getMarkPath:function(o,n,x,w,t,r){return r.crispLine(["M",o,n,"L",o+(t?0:-x),n+(t?x:0)],w);},render:function(Y,X){var W=this.axis,V=W.options,U=W.chart.renderer,T=W.horiz,S=this.type,R=this.label,O=this.pos,N=V.labels,M=this.gridLine,L=S?S+"Grid":"grid",K=S?S+"Tick":"tick",I=V[L+"LineWidth"],A=V[L+"LineColor"],J=V[L+"LineDashStyle"],H=V[K+"Length"],L=V[K+"Width"]||0,E=V[K+"Color"],B=V[K+"Position"],K=this.mark,C=N.step,x=!0,z=W.tickmarkOffset,G=this.getPosition(T,O,z,X),o=G.x,G=G.y,w=W.staggerLines;if(I){O=W.getPlotLinePath(O+z,I,X);if(M===ar){M={stroke:A,"stroke-width":I};if(J){M.dashstyle=J;}if(!S){M.zIndex=1;}this.gridLine=M=I?U.path(O).attr(M).add(W.gridGroup):null;}if(!X&&M&&O){M[this.isNew?"attr":"animate"]({d:O});}}if(L&&H){B==="inside"&&(H=-H),W.opposite&&(H=-H),S=this.getMarkPath(o,G,H,L,T,U),K?K.animate({d:S}):this.mark=U.path(S).attr({stroke:E,"stroke-width":L}).add(W.axisGroup);}if(R&&!isNaN(o)){R.xy=G=this.getLabelPosition(o,G,R,T,N,z,Y,C),this.isFirst&&!ay(V.showFirstLabel,1)||this.isLast&&!ay(V.showLastLabel,1)?x=!1:!w&&T&&N.overflow==="justify"&&!this.handleOverflow(Y,G)&&(x=!1),C&&Y%C&&(x=!1),x?(R[this.isNew?"attr":"animate"](G),R.show(),this.isNew=!1):R.hide();}},destroy:function(){af(this,this.axis);}};bf.prototype={render:function(){var R=this,O=R.axis,N=O.horiz,M=(O.pointRange||0)/2,L=R.options,K=L.label,J=R.label,I=L.width,H=L.to,G=L.from,E=au(G)&&au(H),C=L.value,B=L.dashStyle,z=R.svgElem,o=[],A,y=L.color,w=L.zIndex,t=L.events,x=O.chart.renderer;O.isLog&&(G=bC(G),H=bC(H),C=bC(C));if(I){if(o=O.getPlotLinePath(C,I),M={stroke:y,"stroke-width":I},B){M.dashstyle=B;}}else{if(E){if(G=ap(G,O.min-M),H=a0(H,O.max+M),o=O.getPlotBandPath(G,H,L),M={fill:y},L.borderWidth){M.stroke=L.borderColor,M["stroke-width"]=L.borderWidth;}}else{return;}}if(au(w)){M.zIndex=w;}if(z){o?z.animate({d:o},null,z.onGetPath):(z.hide(),z.onGetPath=function(){z.show();});}else{if(o&&o.length&&(R.svgElem=z=x.path(o).attr(M).add(),t)){for(A in L=function(n){z.on(n,function(r){t[n].apply(R,[r]);});},t){L(A);}}}if(K&&au(K.text)&&o&&o.length&&O.width>0&&O.height>0){K=bn({align:N&&E&&"center",x:N?!E&&4:10,verticalAlign:!N&&E&&"middle",y:N?E?16:10:E?6:-4,rotation:N&&!E&&90},K);if(!J){R.label=J=x.text(K.text,0,0).attr({align:K.textAlign||K.align,rotation:K.rotation,zIndex:w}).css(K.style).add();}O=[o[1],o[4],ay(o[6],o[1])];o=[o[2],o[5],ay(o[7],o[2])];N=bV(O);E=bV(o);J.align(K,!1,{x:N,y:E,width:aE(O)-N,height:aE(o)-E});J.show();}else{J&&J.hide();}return R;},destroy:function(){bz(this.axis.plotLinesAndBands,this);af(this,this.axis);}};bB.prototype={destroy:function(){af(this,this.axis);},setTotal:function(n){this.cum=this.total=n;},render:function(o){var n=this.options.formatter.call(this);this.label?this.label.attr({text:n,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(n,0,0).css(this.options.style).attr({align:this.textAlign,rotation:this.options.rotation,visibility:"hidden"}).add(o);},setOffset:function(A,z){var y=this.axis,x=y.chart,w=x.inverted,t=this.isNegative,r=y.translate(this.percent?100:this.total,0,0,0,1),y=y.translate(0),y=a3(r-y),o=x.xAxis[0].translate(this.x)+A,n=x.plotHeight,t={x:w?t?r:r-y:o,y:w?n-o-z:t?n-r-y:n-r,width:w?y:z,height:w?z:y};if(w=this.label){w.align(this.alignOptions,null,t),t=w.alignAttr,w.attr({visibility:this.options.crop===!1||x.isInsidePlot(t.x,t.y)?aN?"inherit":"visible":"hidden"});}}};aF.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:be,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Y-values"},stackLabels:{enabled:!1,formatter:function(){return this.total;},style:be.style}},defaultLeftAxisOptions:{labels:{align:"right",x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{align:"left",x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{align:"center",x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{align:"center",x:0,y:-5},title:{rotation:0}},init:function(o,n){var y=n.isX;this.horiz=o.inverted?!y:y;this.xOrY=(this.isXAxis=y)?"x":"y";this.opposite=n.opposite;this.side=this.horiz?this.opposite?0:2:this.opposite?1:3;this.setOptions(n);var x=this.options,w=x.type,t=w==="datetime";this.labelFormatter=x.labels.formatter||this.defaultLabelFormatter;this.staggerLines=this.horiz&&x.labels.staggerLines;this.userOptions=n;this.minPixelPadding=0;this.chart=o;this.reversed=x.reversed;this.categories=x.categories;this.isLog=w==="logarithmic";this.isLinked=au(x.linkedTo);this.isDatetimeAxis=t;this.tickmarkOffset=x.categories&&x.tickmarkPlacement==="between"?0.5:0;this.ticks={};this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=x.minRange||x.maxZoom;this.range=x.range;this.offset=x.offset||0;this.stacks={};this.min=this.max=null;var r,x=this.options.events;o.axes.push(this);o[y?"xAxis":"yAxis"].push(this);this.series=[];if(o.inverted&&y&&this.reversed===ar){this.reversed=!0;}this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;this.addPlotLine=this.addPlotBand=this.addPlotBandOrLine;for(r in x){a9(this,r,x[r]);}if(this.isLog){this.val2lin=bC,this.lin2val=aZ;}},setOptions:function(n){this.options=bn(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],bn(a2[this.isXAxis?"xAxis":"yAxis"],n));},defaultLabelFormatter:function(){var o=this.axis,n=this.value,y=this.dateTimeLabelFormat,x=a2.lang.numericSymbols,w=x&&x.length,t,r=o.isLog?n:o.tickInterval;if(o.categories){t=n;}else{if(y){t=ax(y,n);}else{if(w&&r>=1000){for(;w--&&t===ar;){o=Math.pow(1000,w+1),r>=o&&x[w]!==null&&(t=bj(n/o,-1)+x[w]);}}}}t===ar&&(t=n>=1000?bj(n,0):bj(n,-1));return t;},getSeriesExtremes:function(){var o=this,n=o.chart,x=o.stacks,w=[],t=[],r;o.hasVisibleSeries=!1;o.dataMin=o.dataMax=null;az(o.series,function(Z){if(Z.visible||!n.options.chart.ignoreHiddenSeries){var Y=Z.options,X,W,V,U,T,R,I,S,N,K=Y.threshold,J,M=[],G=0;o.hasVisibleSeries=!0;if(o.isLog&&K<=0){K=Y.threshold=null;}if(o.isXAxis){if(Y=Z.xData,Y.length){o.dataMin=a0(ay(o.dataMin,Y[0]),bV(Y)),o.dataMax=ap(ay(o.dataMax,Y[0]),aE(Y));}}else{var H,E,y,O=Z.cropped,B=Z.xAxis.getExtremes(),L=!!Z.modifyValue;X=Y.stacking;o.usePercentage=X==="percent";if(X){T=Y.stack,U=Z.type+ay(T,""),R="-"+U,Z.stackKey=U,W=w[U]||[],w[U]=W,V=t[R]||[],t[R]=V;}if(o.usePercentage){o.dataMin=0,o.dataMax=99;}Y=Z.processedXData;I=Z.processedYData;J=I.length;for(r=0;r<J;r++){if(S=Y[r],N=I[r],X&&(E=(H=N<K)?V:W,y=H?R:U,N=E[S]=au(E[S])?g(E[S]+N):N,x[y]||(x[y]={}),x[y][S]||(x[y][S]=new bB(o,o.options.stackLabels,H,S,T,X)),x[y][S].setTotal(N)),N!==null&&N!==ar&&(L&&(N=Z.modifyValue(N)),O||(Y[r+1]||S)>=B.min&&(Y[r-1]||S)<=B.max)){if(S=N.length){for(;S--;){N[S]!==null&&(M[G++]=N[S]);}}else{M[G++]=N;}}}if(!o.usePercentage&&M.length){o.dataMin=a0(ay(o.dataMin,M[0]),bV(M)),o.dataMax=ap(ay(o.dataMax,M[0]),aE(M));}if(au(K)){if(o.dataMin>=K){o.dataMin=K,o.ignoreMinPadding=!0;}else{if(o.dataMax<K){o.dataMax=K,o.ignoreMaxPadding=!0;}}}}}});},translate:function(B,A,z,y,x,w){var t=this.len,r=1,o=0,n=y?this.oldTransA:this.transA,y=y?this.oldMin:this.min,x=this.options.ordinal||this.isLog&&x;if(!n){n=this.transA;}z&&(r*=-1,o=t);this.reversed&&(r*=-1,o-=r*t);A?(this.reversed&&(B=t-B),B=B/n+y,x&&(B=this.lin2val(B))):(x&&(B=this.val2lin(B)),B=r*(B-y)*n+o+r*this.minPixelPadding+(w?n*this.pointRange/2:0));return B;},getPlotLinePath:function(E,C,B){var A=this.chart,z=this.left,y=this.top,x,w,t,E=this.translate(E,null,null,B),r=B&&A.oldChartHeight||A.chartHeight,o=B&&A.oldChartWidth||A.chartWidth,n;x=this.transB;B=w=av(E+x);x=t=av(r-E-x);if(isNaN(E)){n=!0;}else{if(this.horiz){if(x=y,t=r-this.bottom,B<z||B>z+this.width){n=!0;}}else{if(B=z,w=o-this.right,x<y||x>y+this.height){n=!0;}}}return n?null:A.renderer.crispLine(["M",B,x,"L",w,t],C||0);},getPlotBandPath:function(o,n){var t=this.getPlotLinePath(n),r=this.getPlotLinePath(o);r&&t?r.push(t[4],t[5],t[1],t[2]):r=null;return r;},getLinearTickPositions:function(o,n,w){for(var t,n=g(aU(n/o)*o),w=g(D(w/o)*o),r=[];n<=w;){r.push(n);n=g(n+o);if(n===t){break;}t=n;}return r;},getLogTickPositions:function(E,C,B,A){var z=this.options,y=this.len,x=[];if(!A){this._minorAutoInterval=null;}if(E>=0.5){E=av(E),x=this.getLinearTickPositions(E,C,B);}else{if(E>=0.08){for(var y=aU(C),w,t,r,o,n,z=E>0.3?[1,2,4]:E>0.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];y<B+1&&!n;y++){t=z.length;for(w=0;w<t&&!n;w++){r=bC(aZ(y)*z[w]),r>C&&x.push(o),o>B&&(n=!0),o=r;}}}else{if(C=aZ(C),B=aZ(B),E=z[A?"minorTickInterval":"tickInterval"],E=ay(E==="auto"?null:E,this._minorAutoInterval,(B-C)*(z.tickPixelInterval/(A?5:1))/((A?y/this.tickPositions.length:y)||1)),E=a5(E,null,a8.pow(10,aU(a8.log(E)/a8.LN10))),x=d(this.getLinearTickPositions(E,C,B),bC),!A){this._minorAutoInterval=E/5;}}}if(!A){this.tickInterval=E;}return x;},getMinorTickPositions:function(){var o=this.tickPositions,n=this.minorTickInterval,w=[],t,r;if(this.isLog){r=o.length;for(t=1;t<r;t++){w=w.concat(this.getLogTickPositions(n,o[t-1],o[t],!0));}}else{for(o=this.min+(o[0]-this.min)%n;o<=this.max;o+=n){w.push(o);}}return w;},adjustForMinRange:function(){var C=this.options,B=this.min,A=this.max,z,y=this.dataMax-this.dataMin>=this.minRange,x,w,t,r,o;if(this.isXAxis&&this.minRange===ar&&!this.isLog){au(C.min)||au(C.max)?this.minRange=null:(az(this.series,function(E){r=E.xData;for(w=o=E.xIncrement?1:r.length-1;w>0;w--){if(t=r[w]-r[w-1],x===ar||t<x){x=t;}}}),this.minRange=a0(x*5,this.dataMax-this.dataMin));}if(A-B<this.minRange){var n=this.minRange;z=(n-A+B)/2;z=[B-z,ay(C.min,B-z)];if(y){z[2]=this.dataMin;}B=aE(z);A=[B+n,ay(C.max,B+n)];if(y){A[2]=this.dataMax;}A=bV(A);A-B<n&&(z[0]=A-n,z[1]=ay(C.min,A-n),B=aE(z));}this.min=B;this.max=A;},setAxisTranslation:function(){var o=this.max-this.min,n=0,y,x=0,w=0,t=this.linkedParent,r=this.transA;if(this.isXAxis){t?(x=t.minPointOffset,w=t.pointRangePadding):az(this.series,function(z){var C=z.pointRange,B=z.options.pointPlacement,A=z.closestPointRange;n=ap(n,C);x=ap(x,B?0:C/2);w=ap(w,B==="on"?0:C);!z.noSharedTooltip&&au(A)&&(y=au(y)?a0(y,A):A);}),this.minPointOffset=x,this.pointRangePadding=w,this.pointRange=n,this.closestPointRange=y;}this.oldTransA=r;this.translationSlope=this.transA=r=this.len/(o+w||1);this.transB=this.horiz?this.left:this.bottom;this.minPixelPadding=r*x;},setTickPositions:function(H){var G=this,E=G.chart,C=G.options,B=G.isLog,A=G.isDatetimeAxis,z=G.isXAxis,y=G.isLinked,x=G.options.tickPositioner,w=C.maxPadding,t=C.minPadding,r=C.tickInterval,o=C.minTickInterval,n=C.tickPixelInterval,I=G.categories;y?(G.linkedParent=E[z?"xAxis":"yAxis"][C.linkedTo],E=G.linkedParent.getExtremes(),G.min=ay(E.min,E.dataMin),G.max=ay(E.max,E.dataMax),C.type!==G.linkedParent.options.type&&bl(11,1)):(G.min=ay(G.userMin,C.min,G.dataMin),G.max=ay(G.userMax,C.max,G.dataMax));if(B){!H&&a0(G.min,ay(G.dataMin,G.min))<=0&&bl(10,1),G.min=g(bC(G.min)),G.max=g(bC(G.max));}if(G.range&&(G.userMin=G.min=ap(G.min,G.max-G.range),G.userMax=G.max,H)){G.range=null;}G.adjustForMinRange();if(!I&&!G.usePercentage&&!y&&au(G.min)&&au(G.max)){E=G.max-G.min||1;if(!au(C.min)&&!au(G.userMin)&&t&&(G.dataMin<0||!G.ignoreMinPadding)){G.min-=E*t;}if(!au(C.max)&&!au(G.userMax)&&w&&(G.dataMax>0||!G.ignoreMaxPadding)){G.max+=E*w;}}G.tickInterval=G.min===G.max||G.min===void 0||G.max===void 0?1:y&&!r&&n===G.linkedParent.options.tickPixelInterval?G.linkedParent.tickInterval:ay(r,I?1:(G.max-G.min)*n/(G.len||1));z&&!H&&az(G.series,function(J){J.processData(G.min!==G.oldMin||G.max!==G.oldMax);});G.setAxisTranslation(H);G.beforeSetTickPositions&&G.beforeSetTickPositions();if(G.postProcessTickInterval){G.tickInterval=G.postProcessTickInterval(G.tickInterval);}if(!r&&G.tickInterval<o){G.tickInterval=o;}if(!A&&!B&&(H=a8.pow(10,aU(a8.log(G.tickInterval)/a8.LN10)),!r)){G.tickInterval=a5(G.tickInterval,null,H,C);}G.minorTickInterval=C.minorTickInterval==="auto"&&G.tickInterval?G.tickInterval/5:C.minorTickInterval;G.tickPositions=x=C.tickPositions||x&&x.apply(G,[G.min,G.max]);if(!x){x=A?(G.getNonLinearTimeTicks||bq)(bG(G.tickInterval,C.units),G.min,G.max,C.startOfWeek,G.ordinalPositions,G.closestPointRange,!0):B?G.getLogTickPositions(G.tickInterval,G.min,G.max):G.getLinearTickPositions(G.tickInterval,G.min,G.max),G.tickPositions=x;}if(!y){B=x[0],A=x[x.length-1],y=G.minPointOffset||0,C.startOnTick?G.min=B:G.min-y>B&&x.shift(),C.endOnTick?G.max=A:G.max+y<A&&x.pop();}},setMaxTicks:function(){var o=this.chart,n=o.maxTicks,t=this.tickPositions,r=this.xOrY;n||(n={x:0,y:0});if(!this.isLinked&&!this.isDatetimeAxis&&t.length>n[r]&&this.options.alignTicks!==!1){n[r]=t.length;}o.maxTicks=n;},adjustTickAmount:function(){var o=this.xOrY,n=this.tickPositions,w=this.chart.maxTicks;if(w&&w[o]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1){var t=this.tickAmount,r=n.length;this.tickAmount=o=w[o];if(r<o){for(;n.length<o;){n.push(g(n[n.length-1]+this.tickInterval));}this.transA*=(r-1)/(o-1);this.max=n[n.length-1];}if(au(t)&&o!==t){this.isDirty=!0;}}},setScale:function(){var o=this.stacks,n,w,t,r;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();r=this.len!==this.oldAxisLength;az(this.series,function(x){if(x.isDirtyData||x.isDirty||x.xAxis.isDirty){t=!0;}});if(r||t||this.isLinked||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,!this.isDirty){this.isDirty=r||this.min!==this.oldMin||this.max!==this.oldMax;}}if(!this.isXAxis){for(n in o){for(w in o[n]){o[n][w].cum=o[n][w].total;}}}this.setMaxTicks();},setExtremes:function(o,n,y,x,w){var t=this,r=t.chart,y=ay(y,!0),w=aw(w,{min:o,max:n});bg(t,"setExtremes",w,function(){t.userMin=o;t.userMax=n;t.isDirtyExtremes=!0;y&&r.redraw(x);});},zoom:function(o,n){this.setExtremes(o,n,!1,ar,{trigger:"zoom"});return !0;},setAxisSize:function(){var o=this.chart,n=this.options,t=n.offsetLeft||0,r=n.offsetRight||0;this.left=ay(n.left,o.plotLeft+t);this.top=ay(n.top,o.plotTop);this.width=ay(n.width,o.plotWidth-t+r);this.height=ay(n.height,o.plotHeight);this.bottom=o.chartHeight-this.height-this.top;this.right=o.chartWidth-this.width-this.left;this.len=ap(this.horiz?this.width:this.height,0);},getExtremes:function(){var n=this.isLog;return{min:n?g(aZ(this.min)):this.min,max:n?g(aZ(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax};},getThreshold:function(o){var n=this.isLog,r=n?aZ(this.min):this.min,n=n?aZ(this.max):this.max;r>o||o===null?o=r:n<o&&(o=n);return this.translate(o,0,1,0,1);},addPlotBandOrLine:function(n){n=(new bf(this,n)).render();this.plotLinesAndBands.push(n);return n;},getOffset:function(){var K=this,J=K.chart,I=J.renderer,H=K.options,G=K.tickPositions,E=K.ticks,C=K.horiz,B=K.side,A,z=0,y,x=0,w=H.title,t=H.labels,n=0,L=J.axisOffset,r=[-1,1,1,-1][B],o;K.hasData=J=K.hasVisibleSeries||au(K.min)&&au(K.max)&&!!G;K.showAxis=A=J||ay(H.showEmpty,!0);if(!K.axisGroup){K.gridGroup=I.g("grid").attr({zIndex:H.gridZIndex||1}).add(),K.axisGroup=I.g("axis").attr({zIndex:H.zIndex||2}).add(),K.labelGroup=I.g("axis-labels").attr({zIndex:t.zIndex||7}).add();}if(J||K.isLinked){az(G,function(M){E[M]?E[M].addLabel():E[M]=new aM(K,M);}),az(G,function(M){if(B===0||B===2||{1:"left",3:"right"}[B]===t.align){n=ap(E[M].getLabelSize(),n);}}),K.staggerLines&&(n+=(K.staggerLines-1)*16);}else{for(o in E){E[o].destroy(),delete E[o];}}if(w&&w.text){if(!K.axisTitle){K.axisTitle=I.text(w.text,0,0,w.useHTML).attr({zIndex:7,rotation:w.rotation||0,align:w.textAlign||{low:"left",middle:"center",high:"right"}[w.align]}).css(w.style).add(K.axisGroup),K.axisTitle.isNew=!0;}if(A){z=K.axisTitle.getBBox()[C?"height":"width"],x=ay(w.margin,C?5:10),y=w.offset;}K.axisTitle[A?"show":"hide"]();}K.offset=r*ay(H.offset,L[B]);K.axisTitleMargin=ay(y,n+x+(B!==2&&n&&r*H.labels[C?"y":"x"]));L[B]=ap(L[B],K.axisTitleMargin+z+r*K.offset);},getLinePath:function(o){var n=this.chart,x=this.opposite,w=this.offset,t=this.horiz,r=this.left+(x?this.width:0)+w;this.lineTop=x=n.chartHeight-this.bottom-(x?this.height:0)+w;return n.renderer.crispLine(["M",t?this.left:r,t?x:this.top,"L",t?n.chartWidth-this.right:r,t?x:n.chartHeight-this.bottom],o);},getTitlePosition:function(){var A=this.horiz,z=this.left,y=this.top,x=this.len,w=this.options.title,t=A?z:y,r=this.opposite,o=this.offset,n=at(w.style.fontSize||12),x={low:t+(A?0:x),middle:t+x/2,high:t+(A?x:0)}[w.align],z=(A?y+this.height:z)+(A?1:-1)*(r?-1:1)*this.axisTitleMargin+(this.side===2?n:0);return{x:A?x:z+(r?this.width:0)+o+(w.x||0),y:A?z-(r?this.height:0)+o:x+(w.y||0)};},render:function(){var V=this,U=V.chart,T=U.renderer,S=V.options,R=V.isLog,O=V.isLinked,N=V.tickPositions,M=V.axisTitle,L=V.stacks,K=V.ticks,J=V.minorTicks,I=V.alternateBands,H=S.stackLabels,E=S.alternateGridColor,y=V.tickmarkOffset,G=S.lineWidth,C,A=U.hasRendered&&au(V.oldMin)&&!isNaN(V.oldMin),B=V.showAxis,z,t;if(V.hasData||O){if(V.minorTickInterval&&!V.categories&&az(V.getMinorTickPositions(),function(o){J[o]||(J[o]=new aM(V,o,"minor"));A&&J[o].isNew&&J[o].render(null,!0);J[o].isActive=!0;J[o].render();}),az(N.slice(1).concat([N[0]]),function(o,r){r=r===N.length-1?0:r+1;if(!O||o>=V.min&&o<=V.max){K[o]||(K[o]=new aM(V,o)),A&&K[o].isNew&&K[o].render(r,!0),K[o].isActive=!0,K[o].render(r);}}),E&&az(N,function(o,r){if(r%2===0&&o<V.max){I[o]||(I[o]=new bf(V)),z=o+y,t=N[r+1]!==ar?N[r+1]+y:V.max,I[o].options={from:R?aZ(z):z,to:R?aZ(t):t,color:E},I[o].render(),I[o].isActive=!0;}}),!V._addedPlotLB){az((S.plotLines||[]).concat(S.plotBands||[]),function(o){V.addPlotBandOrLine(o);}),V._addedPlotLB=!0;}}az([K,J,I],function(r){for(var o in r){r[o].isActive?r[o].isActive=!1:(r[o].destroy(),delete r[o]);}});if(G){C=V.getLinePath(G),V.axisLine?V.axisLine.animate({d:C}):V.axisLine=T.path(C).attr({stroke:S.lineColor,"stroke-width":G,zIndex:7}).add(V.axisGroup),V.axisLine[B?"show":"hide"]();}if(M&&B){M[M.isNew?"attr":"animate"](V.getTitlePosition()),M.isNew=!1;}if(H&&H.enabled){var x,n,S=V.stackTotalGroup;if(!S){V.stackTotalGroup=S=T.g("stack-labels").attr({visibility:"visible",zIndex:6}).add();}S.translate(U.plotLeft,U.plotTop);for(x in L){for(n in U=L[x],U){U[n].render(S);}}}V.isDirty=!1;},removePlotBandOrLine:function(o){for(var n=this.plotLinesAndBands,r=n.length;r--;){n[r].id===o&&n[r].destroy();}},setTitle:function(o,n){var w=this.chart,t=this.options,r=this.axisTitle;t.title=bn(t.title,o);this.axisTitle=r&&r.destroy();this.isDirty=!0;ay(n,!0)&&w.redraw();},redraw:function(){var n=this.chart;n.tracker.resetTracker&&n.tracker.resetTracker(!0);this.render();az(this.plotLinesAndBands,function(o){o.render();});az(this.series,function(o){o.isDirty=!0;});},setCategories:function(o,n){var r=this.chart;this.categories=this.userOptions.categories=o;az(this.series,function(t){t.translate();t.setTooltipPoints(!0);});this.isDirty=!0;ay(n,!0)&&r.redraw();},destroy:function(){var o=this,n=o.stacks,r;aV(o);for(r in n){af(n[r]),n[r]=null;}az([o.ticks,o.minorTicks,o.alternateBands,o.plotLinesAndBands],function(t){af(t);});az("stackTotalGroup,axisLine,axisGroup,gridGroup,labelGroup,axisTitle".split(","),function(t){o[t]&&(o[t]=o[t].destroy());});}};ag.prototype={destroy:function(){az(this.crosshairs,function(n){n&&n.destroy();});if(this.label){this.label=this.label.destroy();}},move:function(o,n,y,x){var w=this,t=w.now,r=w.options.animation!==!1&&!w.isHidden;aw(t,{x:r?(2*t.x+o)/3:o,y:r?(t.y+n)/2:n,anchorX:r?(2*t.anchorX+y)/3:y,anchorY:r?(t.anchorY+x)/2:x});w.label.attr(t);if(r&&(a3(o-t.x)>1||a3(n-t.y)>1)){clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){w&&w.move(o,n,y,x);},32);}},hide:function(){if(!this.isHidden){var n=this.chart.hoverPoints;this.label.hide();n&&az(n,function(o){o.setState();});this.chart.hoverPoints=null;this.isHidden=!0;}},hideCrosshairs:function(){az(this.crosshairs,function(n){n&&n.hide();});},getAnchor:function(o,n){var z,y=this.chart,x=y.inverted,w=0,t=0,r,o=bi(o);z=o[0].tooltipPos;z||(az(o,function(A){r=A.series.yAxis;w+=A.plotX;t+=(A.plotLow?(A.plotLow+A.plotHigh)/2:A.plotY)+(!x&&r?r.top-y.plotTop:0);}),w/=o.length,t/=o.length,z=[x?y.plotWidth-t:w,this.shared&&!x&&o.length>1&&n?n.chartY-y.plotTop:x?y.plotHeight-w:t]);return d(z,av);},getPosition:function(E,C,B){var A=this.chart,z=A.plotLeft,y=A.plotTop,x=A.plotWidth,w=A.plotHeight,t=ay(this.options.distance,12),r=B.plotX,B=B.plotY,A=r+z+(A.inverted?t:-E-t),o=B-C+y+15,n;A<7&&(A=z+ap(r,0)+t);A+E>z+x&&(A-=A+E-(z+x),o=B-C+y-t,n=!0);o<y+5&&(o=y+5,n&&B>=o&&B<=o+C&&(o=B+y+t));o+C>y+w&&(o=ap(y,y+w-C-t));return{x:A,y:o};},refresh:function(H,G){function E(){var J=this.points||bi(this),I=J[0].series,K;K=[I.tooltipHeaderFormatter(J[0].key)];az(J,function(L){I=L.series;K.push(I.tooltipFormatter&&I.tooltipFormatter(L)||L.point.tooltipFormatter(I.tooltipOptions.pointFormat));});K.push(A.footerFormat||"");return K.join("");}var C=this.chart,B=this.label,A=this.options,z,y,x,w={},t,r=[];t=A.formatter||E;var w=C.hoverPoints,o,n=A.crosshairs;x=this.shared;y=this.getAnchor(H,G);z=y[0];y=y[1];x&&(!H.series||!H.series.noSharedTooltip)?(C.hoverPoints=H,w&&az(w,function(I){I.setState();}),az(H,function(I){I.setState("hover");r.push(I.getLabelConfig());}),w={x:H[0].category,y:H[0].y},w.points=r,H=H[0]):w=H.getLabelConfig();t=t.call(w);w=H.series;x=x||!w.isCartesian||w.tooltipOutsidePlot||C.isInsidePlot(z,y);t===!1||!x?this.hide():(this.isHidden&&B.show(),B.attr({text:t}),o=A.borderColor||H.color||w.color||"#606060",B.attr({stroke:o}),B=(A.positioner||this.getPosition).call(this,B.width,B.height,{plotX:z,plotY:y}),this.move(av(B.x),av(B.y),z+C.plotLeft,y+C.plotTop),this.isHidden=!1);if(n){n=bi(n);for(B=n.length;B--;){if(x=H.series[B?"yAxis":"xAxis"],n[B]&&x){if(x=x.getPlotLinePath(B?ay(H.stackY,H.y):H.x,1),this.crosshairs[B]){this.crosshairs[B].attr({d:x,visibility:"visible"});}else{w={"stroke-width":n[B].width||1,stroke:n[B].color||"#C0C0C0",zIndex:n[B].zIndex||2};if(n[B].dashStyle){w.dashstyle=n[B].dashStyle;}this.crosshairs[B]=C.renderer.path(x).attr(w).add();}}}}bg(C,"tooltipRefresh",{text:t,x:z+C.plotLeft,y:y+C.plotTop,borderColor:o});}};l.prototype={normalizeMouseEvent:function(o){var n,t,r,o=o||a4.event;if(!o.target){o.target=o.srcElement;}o=p(o);r=o.touches?o.touches.item(0):o;this.chartPosition=n=b(this.chart.container);r.pageX===ar?(t=o.x,n=o.y):(t=r.pageX-n.left,n=r.pageY-n.top);return aw(o,{chartX:av(t),chartY:av(n)});},getMouseCoordinates:function(o){var n={xAxis:[],yAxis:[]},r=this.chart;az(r.axes,function(w){var t=w.isXAxis;n[t?"xAxis":"yAxis"].push({axis:w,value:w.translate(((r.inverted?!t:t)?o.chartX-r.plotLeft:w.top+w.len-o.chartY)-w.minPixelPadding,!0)});});return n;},getIndex:function(o){var n=this.chart;return n.inverted?n.plotHeight+n.plotTop-o.chartY:o.chartX-n.plotLeft;},onmousemove:function(C){var B=this.chart,A=B.series,z=B.tooltip,y,x=B.hoverPoint,w=B.hoverSeries,t,r,o=B.chartWidth,n=this.getIndex(C);if(z&&this.options.tooltip.shared&&(!w||!w.noSharedTooltip)){y=[];t=A.length;for(r=0;r<t;r++){if(A[r].visible&&A[r].options.enableMouseTracking!==!1&&!A[r].noSharedTooltip&&A[r].tooltipPoints.length){B=A[r].tooltipPoints[n],B._dist=a3(n-B[A[r].xAxis.tooltipPosName||"plotX"]),o=a0(o,B._dist),y.push(B);}}for(t=y.length;t--;){y[t]._dist>o&&y.splice(t,1);}if(y.length&&y[0].plotX!==this.hoverX){z.refresh(y,C),this.hoverX=y[0].plotX;}}if(w&&w.tracker&&(B=w.tooltipPoints[n])&&B!==x){B.onMouseOver();}},resetTracker:function(o){var n=this.chart,w=n.hoverSeries,t=n.hoverPoint,r=n.tooltip,n=r&&r.shared?n.hoverPoints:t;(o=o&&r&&n)&&bi(n)[0].plotX===ar&&(o=!1);if(o){r.refresh(n);}else{if(t){t.onMouseOut();}if(w){w.onMouseOut();}r&&(r.hide(),r.hideCrosshairs());this.hoverX=null;}},setDOMEvents:function(){function o(){if(n.selectionMarker){var G={xAxis:[],yAxis:[]},E=n.selectionMarker.getBBox(),C=E.x-z.plotLeft,B=E.y-z.plotTop,A;x&&(az(z.axes,function(I){if(I.options.zoomEnabled!==!1){var H=I.isXAxis,K=z.inverted?!H:H,J=I.translate(K?C:z.plotHeight-B-E.height,!0,0,0,1),K=I.translate((K?C+E.width:z.plotHeight-B)-2*I.minPixelPadding,!0,0,0,1);!isNaN(J)&&!isNaN(K)&&(G[H?"xAxis":"yAxis"].push({axis:I,min:a0(J,K),max:ap(J,K)}),A=!0);}}),A&&bg(z,"selection",G,function(H){z.zoom(H);}));n.selectionMarker=n.selectionMarker.destroy();}if(z){bd(y,{cursor:"auto"}),z.cancelClick=x,z.mouseIsDown=x=!1;}aV(bk,bN?"touchend":"mouseup",o);}var n=this,z=n.chart,y=z.container,x,w=n.zoomX&&!z.inverted||n.zoomY&&z.inverted,t=n.zoomY&&!z.inverted||n.zoomX&&z.inverted;n.hideTooltipOnMouseMove=function(A){A=p(A);n.chartPosition&&z.hoverSeries&&z.hoverSeries.isCartesian&&!z.isInsidePlot(A.pageX-n.chartPosition.left-z.plotLeft,A.pageY-n.chartPosition.top-z.plotTop)&&n.resetTracker();};n.hideTooltipOnMouseLeave=function(){n.resetTracker();n.chartPosition=null;};y.onmousedown=function(A){A=n.normalizeMouseEvent(A);!bN&&A.preventDefault&&A.preventDefault();z.mouseIsDown=!0;z.cancelClick=!1;z.mouseDownX=n.mouseDownX=A.chartX;n.mouseDownY=A.chartY;a9(bk,bN?"touchend":"mouseup",o);};var r=function(C){if(!C||!(C.touches&&C.touches.length>1)){C=n.normalizeMouseEvent(C);if(!bN){C.returnValue=!1;}var H=C.chartX,E=C.chartY,B=!z.isInsidePlot(H-z.plotLeft,E-z.plotTop);bN&&C.type==="touchstart"&&(ao(C.target,"isTracker")?z.runTrackerClick||C.preventDefault():!z.runChartClick&&!B&&C.preventDefault());if(B){H<z.plotLeft?H=z.plotLeft:H>z.plotLeft+z.plotWidth&&(H=z.plotLeft+z.plotWidth),E<z.plotTop?E=z.plotTop:E>z.plotTop+z.plotHeight&&(E=z.plotTop+z.plotHeight);}if(z.mouseIsDown&&C.type!=="touchstart"&&(x=Math.sqrt(Math.pow(n.mouseDownX-H,2)+Math.pow(n.mouseDownY-E,2)),x>10)){var A=z.isInsidePlot(n.mouseDownX-z.plotLeft,n.mouseDownY-z.plotTop);if(z.hasCartesianSeries&&(n.zoomX||n.zoomY)&&A&&!n.selectionMarker){n.selectionMarker=z.renderer.rect(z.plotLeft,z.plotTop,w?1:z.plotWidth,t?1:z.plotHeight,0).attr({fill:n.options.chart.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add();}if(n.selectionMarker&&w){var G=H-n.mouseDownX;n.selectionMarker.attr({width:a3(G),x:(G>0?0:G)+n.mouseDownX});}n.selectionMarker&&t&&(E-=n.mouseDownY,n.selectionMarker.attr({height:a3(E),y:(E>0?0:E)+n.mouseDownY}));A&&!n.selectionMarker&&n.options.chart.panning&&z.pan(H);}if(!B){n.onmousemove(C);}return B||!z.hasCartesianSeries;}};y.onmousemove=r;a9(y,"mouseleave",n.hideTooltipOnMouseLeave);a9(bk,"mousemove",n.hideTooltipOnMouseMove);y.ontouchstart=function(A){if(n.zoomX||n.zoomY){y.onmousedown(A);}r(A);};y.ontouchmove=r;y.ontouchend=function(){x&&n.resetTracker();};y.onclick=function(A){var E=z.hoverPoint,C,B,A=n.normalizeMouseEvent(A);A.cancelBubble=!0;if(!z.cancelClick){E&&(ao(A.target,"isTracker")||ao(A.target.parentNode,"isTracker"))?(C=E.plotX,B=E.plotY,aw(E,{pageX:n.chartPosition.left+z.plotLeft+(z.inverted?z.plotWidth-B:C),pageY:n.chartPosition.top+z.plotTop+(z.inverted?z.plotHeight-C:B)}),bg(E.series,"click",aw(A,{point:E})),E.firePointEvent("click",A)):(aw(A,n.getMouseCoordinates(A)),z.isInsidePlot(A.chartX-z.plotLeft,A.chartY-z.plotTop)&&bg(z,"click",A));}};},destroy:function(){var o=this.chart,n=o.container;if(o.trackerGroup){o.trackerGroup=o.trackerGroup.destroy();}aV(n,"mouseleave",this.hideTooltipOnMouseLeave);aV(bk,"mousemove",this.hideTooltipOnMouseMove);n.onclick=n.onmousedown=n.onmousemove=n.ontouchstart=n.ontouchend=n.ontouchmove=null;clearInterval(this.tooltipTimeout);},init:function(o,n){if(!o.trackerGroup){o.trackerGroup=o.renderer.g("tracker").attr({zIndex:9}).add();}if(n.enabled){o.tooltip=new ag(o,n);}this.setDOMEvents();}};bS.prototype={init:function(o){var n=this,x=n.options=o.options.legend;if(x.enabled){var w=x.itemStyle,t=ay(x.padding,8),r=x.itemMarginTop||0;n.baseline=at(w.fontSize)+3+r;n.itemStyle=w;n.itemHiddenStyle=bn(w,x.itemHiddenStyle);n.itemMarginTop=r;n.padding=t;n.initialItemX=t;n.initialItemY=t-5;n.maxItemWidth=0;n.chart=o;n.itemHeight=0;n.lastLineHeight=0;n.render();a9(n.chart,"endResize",function(){n.positionCheckboxes();});}},colorizeItem:function(B,A){var z=this.options,y=B.legendItem,x=B.legendLine,w=B.legendSymbol,t=this.itemHiddenStyle.color,z=A?z.itemStyle.color:t,r=A?B.color:t,t=B.options&&B.options.marker,o={stroke:r,fill:r},n;y&&y.css({fill:z});x&&x.attr({stroke:r});if(w){if(t){for(n in t=B.convertAttribs(t),t){y=t[n],y!==ar&&(o[n]=y);}}w.attr(o);}},positionItem:function(o){var n=this.options,x=n.symbolPadding,n=!n.rtl,w=o._legendItemPos,t=w[0],w=w[1],r=o.checkbox;o.legendGroup&&o.legendGroup.translate(n?t:this.legendWidth-t-2*x-4,w);if(r){r.x=t,r.y=w;}},destroyItem:function(o){var n=o.checkbox;az(["legendItem","legendLine","legendSymbol","legendGroup"],function(r){o[r]&&o[r].destroy();});n&&bI(o.checkbox);},destroy:function(){var o=this.group,n=this.box;if(n){this.box=n.destroy();}if(o){this.group=o.destroy();}},positionCheckboxes:function(){var n=this;az(n.allItems,function(o){var t=o.checkbox,r=n.group.alignAttr;t&&bd(t,{left:r.translateX+o.legendItemWidth+t.x-20+"px",top:r.translateY+t.y+3+"px"});});},renderItem:function(U){var w;var T=this,S=T.chart,R=S.renderer,O=T.options,N=O.layout==="horizontal",M=O.symbolWidth,L=O.symbolPadding,K=T.itemStyle,J=T.itemHiddenStyle,I=T.padding,H=!O.rtl,G=O.width,B=O.itemMarginBottom||0,C=T.itemMarginTop,E=T.initialItemX,A=U.legendItem,x=U.series||U,z=x.options,y=z.showCheckbox;if(!A&&(U.legendGroup=R.g("legend-item").attr({zIndex:1}).add(T.scrollGroup),x.drawLegendSymbol(T,U),U.legendItem=A=R.text(O.labelFormatter.call(U),H?M+L:-L,T.baseline,O.useHTML).css(bn(U.visible?K:J)).attr({align:H?"left":"right",zIndex:2}).add(U.legendGroup),U.legendGroup.on("mouseover",function(){U.setState("hover");A.css(T.options.itemHoverStyle);}).on("mouseout",function(){A.css(U.visible?K:J);U.setState();}).on("click",function(n){var o=function(){U.setVisible();},n={browserEvent:n};U.firePointEvent?U.firePointEvent("legendItemClick",n,o):bg(U,"legendItemClick",n,o);}),T.colorizeItem(U,U.visible),z&&y)){U.checkbox=aX("input",{type:"checkbox",checked:U.selected,defaultChecked:U.selected},O.itemCheckboxStyle,S.container),a9(U.checkbox,"click",function(n){bg(U,"checkboxClick",{checked:n.target.checked},function(){U.select();});});}R=A.getBBox();w=U.legendItemWidth=O.itemWidth||M+L+R.width+I+(y?20:0),O=w;T.itemHeight=M=R.height;if(N&&T.itemX-E+O>(G||S.chartWidth-2*I-E)){T.itemX=E,T.itemY+=C+T.lastLineHeight+B,T.lastLineHeight=0;}T.maxItemWidth=ap(T.maxItemWidth,O);T.lastItemY=C+T.itemY+B;T.lastLineHeight=ap(M,T.lastLineHeight);U._legendItemPos=[T.itemX,T.itemY];N?T.itemX+=O:(T.itemY+=C+M+B,T.lastLineHeight=M);T.offsetWidth=G||ap(N?T.itemX-E:O,T.offsetWidth);},render:function(){var G=this,E=G.chart,C=E.renderer,B=G.group,A,z,y,x,w=G.box,t=G.options,r=G.padding,o=t.borderWidth,n=t.backgroundColor;G.itemX=G.initialItemX;G.itemY=G.initialItemY;G.offsetWidth=0;G.lastItemY=0;if(!B){G.group=B=C.g("legend").attr({zIndex:7}).add(),G.contentGroup=C.g().attr({zIndex:1}).add(B),G.scrollGroup=C.g().add(G.contentGroup),G.clipRect=C.clipRect(0,0,9999,E.chartHeight),G.contentGroup.clip(G.clipRect);}A=[];az(E.series,function(I){var H=I.options;H.showInLegend&&(A=A.concat(I.legendItems||(H.legendType==="point"?I.data:I)));});i(A,function(I,H){return(I.options&&I.options.legendIndex||0)-(H.options&&H.options.legendIndex||0);});t.reversed&&A.reverse();G.allItems=A;G.display=z=!!A.length;az(A,function(H){G.renderItem(H);});y=t.width||G.offsetWidth;x=G.lastItemY+G.lastLineHeight;x=G.handleOverflow(x);if(o||n){y+=r;x+=r;if(w){if(y>0&&x>0){w[w.isNew?"attr":"animate"](w.crisp(null,null,null,y,x)),w.isNew=!1;}}else{G.box=w=C.rect(0,0,y,x,t.borderRadius,o||0).attr({stroke:t.borderColor,"stroke-width":o||0,fill:n||aW}).add(B).shadow(t.shadow),w.isNew=!0;}w[z?"show":"hide"]();}G.legendWidth=y;G.legendHeight=x;az(A,function(H){G.positionItem(H);});z&&B.align(aw({width:y,height:x},t),!0,E.spacingBox);E.isResizing||this.positionCheckboxes();},handleOverflow:function(E){var C=this,B=this.chart,A=B.renderer,z=this.options,y=z.y,y=B.spacingBox.height+(z.verticalAlign==="top"?-y:y)-this.padding,x=z.maxHeight,w=this.clipRect,t=z.navigation,r=ay(t.animation,!0),o=t.arrowSize||12,n=this.nav;z.layout==="horizontal"&&(y/=2);x&&(y=a0(y,x));if(E>y){this.clipHeight=B=y-20;this.pageCount=D(E/B);this.currentPage=ay(this.currentPage,1);this.fullHeight=E;w.attr({height:B});if(!n){this.nav=n=A.g().attr({zIndex:1}).add(this.group),this.up=A.symbol("triangle",0,0,o,o).on("click",function(){C.scroll(-1,r);}).add(n),this.pager=A.text("",15,10).css(t.style).add(n),this.down=A.symbol("triangle-down",0,0,o,o).on("click",function(){C.scroll(1,r);}).add(n);}C.scroll(0);E=y;}else{n&&(w.attr({height:B.chartHeight}),n.hide(),this.scrollGroup.attr({translateY:1}));}return E;},scroll:function(A,z){var y=this.pageCount,x=this.currentPage+A,w=this.clipHeight,t=this.options.navigation,r=t.activeColor,t=t.inactiveColor,o=this.pager,n=this.padding;x>y&&(x=y);if(x>0){z!==ar&&aL(z,this.chart),this.nav.attr({translateX:n,translateY:w+7,visibility:"visible"}),this.up.attr({fill:x===1?t:r}).css({cursor:x===1?"default":"pointer"}),o.attr({text:x+"/"+this.pageCount}),this.down.attr({x:18+this.pager.getBBox().width,fill:x===y?t:r}).css({cursor:x===y?"default":"pointer"}),this.scrollGroup.animate({translateY:-a0(w*(x-1),this.fullHeight-w+n)+1}),o.attr({text:x+"/"+y}),this.currentPage=x;}}};bF.prototype={initSeries:function(o){var n=this.options.chart,n=new bE[o.type||n.type||n.defaultSeriesType];n.init(this,o);return n;},addSeries:function(o,n,w){var t,r=this;o&&(aL(w,r),n=ay(n,!0),bg(r,"addSeries",{options:o},function(){t=r.initSeries(o);r.isDirtyLegend=!0;n&&r.redraw();}));return t;},isInsidePlot:function(o,n,t){var r=t?n:o,o=t?o:n;return r>=0&&r<=this.plotWidth&&o>=0&&o<=this.plotHeight;},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&az(this.axes,function(n){n.adjustTickAmount();});this.maxTicks=null;},redraw:function(G){var E=this.axes,C=this.series,B=this.tracker,A=this.legend,z=this.isDirtyLegend,y,x=this.isDirtyBox,w=C.length,t=w,r=this.renderer,o=r.isHidden(),n=[];aL(G,this);for(o&&this.cloneRenderTo();t--;){if(G=C[t],G.isDirty&&G.options.stacking){y=!0;break;}}if(y){for(t=w;t--;){if(G=C[t],G.options.stacking){G.isDirty=!0;}}}az(C,function(H){H.isDirty&&H.options.legendType==="point"&&(z=!0);});if(z&&A.options.enabled){A.render(),this.isDirtyLegend=!1;}if(this.hasCartesianSeries){if(!this.isResizing){this.maxTicks=null,az(E,function(H){H.setScale();});}this.adjustTickAmounts();this.getMargins();az(E,function(H){if(H.isDirtyExtremes){H.isDirtyExtremes=!1,n.push(function(){bg(H,"afterSetExtremes",H.getExtremes());});}if(H.isDirty||x||y){H.redraw(),x=!0;}});}x&&this.drawChartBox();az(C,function(H){H.isDirty&&H.visible&&(!H.isCartesian||H.xAxis)&&H.redraw();});B&&B.resetTracker&&B.resetTracker(!0);r.draw();bg(this,"redraw");o&&this.cloneRenderTo(!0);az(n,function(H){H.call();});},showLoading:function(o){var n=this.options,t=this.loadingDiv,r=n.loading;if(!t){this.loadingDiv=t=aX(aD,{className:"highcharts-loading"},aw(r.style,{left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px",zIndex:10,display:aW}),this.container),this.loadingSpan=aX("span",null,r.labelStyle,t);}this.loadingSpan.innerHTML=o||n.lang.loading;if(!this.loadingShown){bd(t,{opacity:0,display:""}),a(t,{opacity:r.style.opacity},{duration:r.showDuration||0}),this.loadingShown=!0;}},hideLoading:function(){var o=this.options,n=this.loadingDiv;n&&a(n,{opacity:0},{duration:o.loading.hideDuration||100,complete:function(){bd(n,{display:aW});}});this.loadingShown=!1;},get:function(o){var n=this.axes,w=this.series,t,r;for(t=0;t<n.length;t++){if(n[t].options.id===o){return n[t];}}for(t=0;t<w.length;t++){if(w[t].options.id===o){return w[t];}}for(t=0;t<w.length;t++){r=w[t].points||[];for(n=0;n<r.length;n++){if(r[n].id===o){return r[n];}}}return null;},getAxes:function(){var o=this,n=this.options,r=n.xAxis||{},n=n.yAxis||{},r=bi(r);az(r,function(w,t){w.index=t;w.isX=!0;});n=bi(n);az(n,function(w,t){w.index=t;});r=r.concat(n);az(r,function(t){new aF(o,t);});o.adjustTickAmounts();},getSelectedPoints:function(){var n=[];az(this.series,function(o){n=n.concat(ah(o.points,function(r){return r.selected;}));});return n;},getSelectedSeries:function(){return ah(this.series,function(n){return n.selected;});},showResetZoom:function(){var o=this,n=a2.lang,x=o.options.chart.resetZoomButton,w=x.theme,t=w.states,r=x.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=o.renderer.button(n.resetZoom,null,null,function(){o.zoomOut();},w,t&&t.hover).attr({align:x.position.align,title:n.resetZoomTitle}).add().align(x.position,!1,o[r]);this.resetZoomButton.alignTo=r;},zoomOut:function(){var o=this,n=o.resetZoomButton;bg(o,"selection",{resetSelection:!0},function(){o.zoom();});if(n){o.resetZoomButton=n.destroy();}},zoom:function(o){var n=this,r;!o||o.resetSelection?az(n.axes,function(t){r=t.zoom();}):az(o.xAxis.concat(o.yAxis),function(t){var w=t.axis;if(n.tracker[w.isXAxis?"zoomX":"zoomY"]){r=w.zoom(t.min,t.max);}});n.resetZoomButton||n.showResetZoom();r&&n.redraw(ay(n.options.chart.animation,n.pointCount<100));},pan:function(o){var n=this.xAxis[0],x=this.mouseDownX,w=n.pointRange/2,t=n.getExtremes(),r=n.translate(x-o,!0)+w,x=n.translate(x+this.plotWidth-o,!0)-w;(w=this.hoverPoints)&&az(w,function(y){y.setState();});n.series.length&&r>a0(t.dataMin,t.min)&&x<ap(t.dataMax,t.max)&&n.setExtremes(r,x,!0,!1,{trigger:"pan"});this.mouseDownX=o;bd(this.container,{cursor:"move"});},setTitle:function(o,n){var w=this,t=w.options,r;w.chartTitleOptions=r=bn(t.title,o);w.chartSubtitleOptions=t=bn(t.subtitle,n);az([["title",o,r],["subtitle",n,t]],function(y){var x=y[0],A=w[x],z=y[1],y=y[2];A&&z&&(w[x]=A=A.destroy());y&&y.text&&!A&&(w[x]=w.renderer.text(y.text,0,0,y.useHTML).attr({align:y.align,"class":"highcharts-"+x,zIndex:y.zIndex||4}).css(y.style).add().align(y,!1,w.spacingBox));});},getChartSize:function(){var o=this.options.chart,n=this.renderToClone||this.renderTo;this.containerWidth=aa(n,"width");this.containerHeight=aa(n,"height");this.chartWidth=o.width||this.containerWidth||600;this.chartHeight=o.height||(this.containerHeight>19?this.containerHeight:400);},cloneRenderTo:function(o){var n=this.renderToClone,r=this.container;o?n&&(this.renderTo.appendChild(r),bI(n),delete this.renderToClone):(r&&this.renderTo.removeChild(r),this.renderToClone=n=this.renderTo.cloneNode(0),bd(n,{position:"absolute",top:"-9999px",display:"block"}),bk.body.appendChild(n),r&&n.appendChild(r));},getContainer:function(){var o,n=this.options.chart,w,t,r;this.renderTo=o=n.renderTo;r="highcharts-"+aJ++;if(bR(o)){this.renderTo=o=bk.getElementById(o);}o||bl(13,!0);o.innerHTML="";o.offsetWidth||this.cloneRenderTo();this.getChartSize();w=this.chartWidth;t=this.chartHeight;this.container=o=aX(aD,{className:"highcharts-container"+(n.className?" "+n.className:""),id:r},aw({position:"relative",overflow:"hidden",width:w+"px",height:t+"px",textAlign:"left",lineHeight:"normal",zIndex:0},n.style),this.renderToClone||o);this.renderer=n.forExport?new bU(o,w,t,!0):new F(o,w,t);aT&&this.renderer.create(this,o,w,t);},getMargins:function(){var M=this.options.chart,L=M.spacingTop,K=M.spacingRight,J=M.spacingBottom,M=M.spacingLeft,I,H=this.legend,G=this.optionsMarginTop,E=this.optionsMarginLeft,C=this.optionsMarginRight,B=this.optionsMarginBottom,A=this.chartTitleOptions,z=this.chartSubtitleOptions,y=this.options.legend,x=ay(y.margin,10),n=y.x,t=y.y,w=y.align,o=y.verticalAlign;this.resetMargins();I=this.axisOffset;if((this.title||this.subtitle)&&!au(this.optionsMarginTop)){if(z=ap(this.title&&!A.floating&&!A.verticalAlign&&A.y||0,this.subtitle&&!z.floating&&!z.verticalAlign&&z.y||0)){this.plotTop=ap(this.plotTop,z+ay(A.margin,15)+L);}}if(H.display&&!y.floating){if(w==="right"){if(!au(C)){this.marginRight=ap(this.marginRight,H.legendWidth-n+x+K);}}else{if(w==="left"){if(!au(E)){this.plotLeft=ap(this.plotLeft,H.legendWidth+n+x+M);}}else{if(o==="top"){if(!au(G)){this.plotTop=ap(this.plotTop,H.legendHeight+t+x+L);}}else{if(o==="bottom"&&!au(B)){this.marginBottom=ap(this.marginBottom,H.legendHeight-t+x+J);}}}}}this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&az(this.axes,function(r){r.getOffset();});au(E)||(this.plotLeft+=I[3]);au(G)||(this.plotTop+=I[0]);au(B)||(this.marginBottom+=I[2]);au(C)||(this.marginRight+=I[1]);this.setChartSize();},initReflow:function(){function o(x){var z=w.width||aa(t,"width"),y=w.height||aa(t,"height"),x=x?x.target:a4;if(z&&y&&(x===a4||x===bk)){if(z!==n.containerWidth||y!==n.containerHeight){clearTimeout(r),n.reflowTimeout=r=setTimeout(function(){n.container&&n.resize(z,y,!1);},100);}n.containerWidth=z;n.containerHeight=y;}}var n=this,w=n.options.chart,t=n.renderTo,r;a9(a4,"resize",o);a9(n,"destroy",function(){aV(a4,"resize",o);});},resize:function(B,A,z){var y=this,x,w,t=y.resetZoomButton,r=y.title,o=y.subtitle,n;y.isResizing+=1;n=function(){y&&bg(y,"endResize",null,function(){y.isResizing-=1;});};aL(z,y);y.oldChartHeight=y.chartHeight;y.oldChartWidth=y.chartWidth;if(au(B)){y.chartWidth=x=av(B);}if(au(A)){y.chartHeight=w=av(A);}bd(y.container,{width:x+"px",height:w+"px"});y.renderer.setSize(x,w,z);y.plotWidth=x-y.plotLeft-y.marginRight;y.plotHeight=w-y.plotTop-y.marginBottom;y.maxTicks=null;az(y.axes,function(C){C.isDirty=!0;C.setScale();});az(y.series,function(C){C.isDirty=!0;});y.isDirtyLegend=!0;y.isDirtyBox=!0;y.getMargins();B=y.spacingBox;r&&r.align(null,null,B);o&&o.align(null,null,B);t&&t.align&&t.align(null,null,y[t.alignTo]);y.redraw(z);y.oldChartHeight=null;bg(y,"resize");br===!1?n():setTimeout(n,br&&br.duration||500);},setChartSize:function(){var E=this.inverted,C=this.chartWidth,B=this.chartHeight,A=this.options.chart,z=A.spacingTop,y=A.spacingRight,x=A.spacingBottom,w=A.spacingLeft,t,r,o,n;this.plotLeft=t=av(this.plotLeft);this.plotTop=r=av(this.plotTop);this.plotWidth=o=av(C-t-this.marginRight);this.plotHeight=n=av(B-r-this.marginBottom);this.plotSizeX=E?n:o;this.plotSizeY=E?o:n;this.plotBorderWidth=E=A.plotBorderWidth||0;this.spacingBox={x:w,y:z,width:C-w-y,height:B-z-x};this.plotBox={x:t,y:r,width:o,height:n};this.clipBox={x:E/2,y:E/2,width:this.plotSizeX-E,height:this.plotSizeY-E};az(this.axes,function(G){G.setAxisSize();G.setAxisTranslation();});},resetMargins:function(){var o=this.options.chart,n=o.spacingRight,t=o.spacingBottom,r=o.spacingLeft;this.plotTop=ay(this.optionsMarginTop,o.spacingTop);this.marginRight=ay(this.optionsMarginRight,n);this.marginBottom=ay(this.optionsMarginBottom,t);this.plotLeft=ay(this.optionsMarginLeft,r);this.axisOffset=[0,0,0,0];},drawChartBox:function(){var U=this.options.chart,T=this.renderer,S=this.chartWidth,R=this.chartHeight,O=this.chartBackground,N=this.plotBackground,M=this.plotBorder,L=this.plotBGImage,K=U.borderWidth||0,J=U.backgroundColor,I=U.plotBackgroundColor,H=U.plotBackgroundImage,G=U.plotBorderWidth||0,B,C=this.plotLeft,E=this.plotTop,A=this.plotWidth,z=this.plotHeight,x=this.plotBox,y=this.clipRect,w=this.clipBox;B=K+(U.shadow?8:0);if(K||J){if(O){O.animate(O.crisp(null,null,null,S-B,R-B));}else{O={fill:J||aW};if(K){O.stroke=U.borderColor,O["stroke-width"]=K;}this.chartBackground=T.rect(B/2,B/2,S-B,R-B,U.borderRadius,K).attr(O).add().shadow(U.shadow);}}if(I){N?N.animate(x):this.plotBackground=T.rect(C,E,A,z,0).attr({fill:I}).add().shadow(U.plotShadow);}if(H){L?L.animate(x):this.plotBGImage=T.image(H,C,E,A,z).add();}y?y.animate({width:w.width,height:w.height}):this.clipRect=T.clipRect(w);if(G){M?M.animate(M.crisp(null,C,E,A,z)):this.plotBorder=T.rect(C,E,A,z,0,G).attr({stroke:U.plotBorderColor,"stroke-width":G,zIndex:1}).add();}this.isDirtyBox=!1;},propFromSeries:function(){var o=this,n=o.options.chart,x,w=o.options.series,t,r;az(["inverted","angular","polar"],function(y){x=bE[n.type||n.defaultSeriesType];r=o[y]||n[y]||x&&x.prototype[y];for(t=w&&w.length;!r&&t--;){(x=bE[w[t].type])&&x.prototype[y]&&(r=!0);}o[y]=r;});},render:function(){var o=this,n=o.axes,x=o.renderer,w=o.options,t=w.labels,w=w.credits,r;o.setTitle();o.legend=new bS(o);az(n,function(y){y.setScale();});o.getMargins();o.maxTicks=null;az(n,function(y){y.setTickPositions(!0);y.setMaxTicks();});o.adjustTickAmounts();o.getMargins();o.drawChartBox();o.hasCartesianSeries&&az(n,function(y){y.render();});if(!o.seriesGroup){o.seriesGroup=x.g("series-group").attr({zIndex:3}).add();}az(o.series,function(y){y.translate();y.setTooltipPoints();y.render();});t.items&&az(t.items,function(y){var B=aw(t.style,y.style),A=at(B.left)+o.plotLeft,z=at(B.top)+o.plotTop+12;delete B.left;delete B.top;x.text(y.html,A,z).attr({zIndex:2}).css(B).add();});if(w.enabled&&!o.credits){r=w.href,o.credits=x.text(w.text,0,0).on("click",function(){if(r){location.href=r;}}).attr({align:w.position.align,zIndex:8}).css(w.style).add().align(w.position);}o.hasRendered=!0;},destroy:function(){var o=this,n=o.axes,x=o.series,w=o.container,t,r=w&&w.parentNode;bg(o,"destroy");aV(o);for(t=n.length;t--;){n[t]=n[t].destroy();}for(t=x.length;t--;){x[t]=x[t].destroy();}az("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,tracker,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(y){var z=o[y];z&&z.destroy&&(o[y]=z.destroy());});if(w){w.innerHTML="",aV(w),r&&bI(w);}for(t in o){delete o[t];}},firstRender:function(){var o=this,n=o.options,r=o.callback;if(!aN&&a4==a4.top&&bk.readyState!=="complete"||aT&&!a4.canvg){aT?bT.push(function(){o.firstRender();},n.global.canvasToolsURL):bk.attachEvent("onreadystatechange",function(){bk.detachEvent("onreadystatechange",o.firstRender);bk.readyState==="complete"&&o.firstRender();});}else{o.getContainer();bg(o,"init");if(Highcharts.RangeSelector&&n.rangeSelector.enabled){o.rangeSelector=new Highcharts.RangeSelector(o);}o.resetMargins();o.setChartSize();o.propFromSeries();o.getAxes();az(n.series||[],function(t){o.initSeries(t);});if(Highcharts.Scroller&&(n.navigator.enabled||n.scrollbar.enabled)){o.scroller=new Highcharts.Scroller(o);}o.tracker=new l(o,n);o.render();o.renderer.draw();r&&r.apply(o,[o]);az(o.callbacks,function(t){t.apply(o,[o]);});o.cloneRenderTo(!0);bg(o,"load");}},init:function(o){var n=this.options.chart,r;n.reflow!==!1&&a9(this,"load",this.initReflow);if(o){for(r in o){a9(this,r,o[r]);}}this.xAxis=[];this.yAxis=[];this.animation=aT?!1:ay(n.animation,!0);this.setSize=this.resize;this.pointCount=0;this.counters=new ae;this.firstRender();}};bF.prototype.callbacks=[];var bK=function(){};bK.prototype={init:function(o,n,t){var r=o.chart.counters;this.series=o;this.applyOptions(n,t);this.pointAttr={};if(o.options.colorByPoint){n=o.chart.options.colors,this.color=this.color||n[r.color++],r.wrapColor(n.length);}o.chart.pointCount++;return this;},applyOptions:function(o,n){var t=this.series,r=typeof o;this.config=o;if(r==="number"||o===null){this.y=o;}else{if(typeof o[0]==="number"){this.x=o[0],this.y=o[1];}else{if(r==="object"&&typeof o.length!=="number"){aw(this,o);this.options=o;if(o.dataLabels){t._hasPointLabels=!0;}if(o.marker){t._hasPointMarkers=!0;}}else{if(typeof o[0]==="string"){this.name=o[0],this.y=o[1];}}}}if(this.x===ar){this.x=n===ar?t.autoIncrement():n;}},destroy:function(){var o=this.series.chart,n=o.hoverPoints,r;o.pointCount--;if(n&&(this.setState(),bz(n,this),!n.length)){o.hoverPoints=null;}if(this===o.hoverPoint){this.onMouseOut();}if(this.graphic||this.dataLabel){aV(this),this.destroyElements();}this.legendItem&&o.legend.destroyItem(this);for(r in this){this[r]=null;}},destroyElements:function(){for(var o="graphic,tracker,dataLabel,group,connector,shadowGroup".split(","),n,r=6;r--;){n=o[r],this[n]&&(this[n]=this[n].destroy());}},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal};},select:function(o,n){var t=this,r=t.series.chart,o=ay(o,!t.selected);t.firePointEvent(o?"select":"unselect",{accumulate:n},function(){t.selected=o;t.setState(o&&"select");n||az(r.getSelectedPoints(),function(w){if(w.selected&&w!==t){w.selected=!1,w.setState(""),w.firePointEvent("unselect");}});});},onMouseOver:function(){var o=this.series,n=o.chart,t=n.tooltip,r=n.hoverPoint;if(r&&r!==this){r.onMouseOut();}this.firePointEvent("mouseOver");t&&(!t.shared||o.noSharedTooltip)&&t.refresh(this);this.setState("hover");n.hoverPoint=this;},onMouseOut:function(){var o=this.series.chart,n=o.hoverPoints;if(!n||v(this,n)===-1){this.firePointEvent("mouseOut"),this.setState(),o.hoverPoint=null;}},tooltipFormatter:function(B){var A=this.series,z=A.tooltipOptions,y=B.match(/\{(series|point)\.[a-zA-Z]+\}/g),x=/[{\.}]/,w,t,r,o,n={y:0,open:0,high:0,low:0,close:0,percentage:1,total:1};z.valuePrefix=z.valuePrefix||z.yPrefix;z.valueDecimals=z.valueDecimals||z.yDecimals;z.valueSuffix=z.valueSuffix||z.ySuffix;for(o in y){t=y[o],bR(t)&&t!==B&&(r=(" "+t).split(x),w={point:this,series:A}[r[1]],r=r[2],w===this&&n.hasOwnProperty(r)?(w=n[r]?r:"value",w=(z[w+"Prefix"]||"")+bj(this[r],ay(z[w+"Decimals"],-1))+(z[w+"Suffix"]||"")):w=w[r],B=B.replace(t,w));}return B;},update:function(B,A,z){var y=this,x=y.series,w=y.graphic,t,r=x.data,o=r.length,n=x.chart,A=ay(A,!0);y.firePointEvent("update",{options:B},function(){y.applyOptions(B);aQ(B)&&(x.getAttribs(),w&&w.attr(y.pointAttr[x.state]));for(t=0;t<o;t++){if(r[t]===y){x.xData[t]=y.x;x.yData[t]=y.y;x.options.data[t]=B;break;}}x.isDirty=!0;x.isDirtyData=!0;A&&n.redraw(z);});},remove:function(o,n){var z=this,y=z.series,x=y.chart,w,t=y.data,r=t.length;aL(n,x);o=ay(o,!0);z.firePointEvent("remove",null,function(){for(w=0;w<r;w++){if(t[w]===z){t.splice(w,1);y.options.data.splice(w,1);y.xData.splice(w,1);y.yData.splice(w,1);break;}}z.destroy();y.isDirty=!0;y.isDirtyData=!0;o&&x.redraw();});},firePointEvent:function(o,n,w){var t=this,r=this.series.options;(r.point.events[o]||t.options&&t.options.events&&t.options.events[o])&&this.importEvents();o==="click"&&r.allowPointSelect&&(w=function(x){t.select(null,x.ctrlKey||x.metaKey||x.shiftKey);});bg(this,o,n,w);},importEvents:function(){if(!this.hasImportedEvents){var o=bn(this.series.options.point,this.options).events,n;this.events=o;for(n in o){a9(this,n,o[n]);}this.hasImportedEvents=!0;}},setState:function(E){var C=this.plotX,B=this.plotY,A=this.series,z=A.options.states,y=aR[A.type].marker&&A.options.marker,x=y&&!y.enabled,w=y&&y.states[E],t=w&&w.enabled===!1,r=A.stateMarkerGraphic,o=A.chart,n=this.pointAttr,E=E||"";if(!(E===this.state||this.selected&&E!=="select"||z[E]&&z[E].enabled===!1||E&&(t||x&&!w.enabled))){if(this.graphic){z=y&&this.graphic.symbolName&&n[E].r,this.graphic.attr(bn(n[E],z?{x:C-z,y:B-z,width:2*z,height:2*z}:{}));}else{if(E&&w){z=w.radius,r?r.attr({x:C-z,y:B-z}):A.stateMarkerGraphic=r=o.renderer.symbol(A.symbol,C-z,B-z,2*z,2*z).attr(n[E]).add(A.markerGroup);}if(r){r[E&&o.isInsidePlot(C,B)?"show":"hide"]();}}this.state=E;}}};var a1=function(){};a1.prototype={isCartesian:!0,type:"line",pointClass:bK,sorted:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},init:function(o,n){var t,r;this.chart=o;this.options=n=this.setOptions(n);this.bindAxes();aw(this,{name:n.name,state:"",pointAttr:{},visible:n.visible!==!1,selected:n.selected===!0});if(aT){n.animation=!1;}r=n.events;for(t in r){a9(this,t,r[t]);}if(r&&r.click||n.point&&n.point.events&&n.point.events.click||n.allowPointSelect){o.runTrackerClick=!0;}this.getColor();this.getSymbol();this.setData(n.data,!1);if(this.isCartesian){o.hasCartesianSeries=!0;}o.series.push(this);i(o.series,function(x,w){return(x.options.index||0)-(w.options.index||0);});az(o.series,function(x,w){x.index=w;x.name=x.name||"Series "+(w+1);});},bindAxes:function(){var o=this,n=o.options,t=o.chart,r;o.isCartesian&&az(["xAxis","yAxis"],function(w){az(t[w],function(x){r=x.options;if(n[w]===r.index||n[w]===ar&&r.index===0){x.series.push(o),o[w]=x,x.isDirty=!0;}});});},autoIncrement:function(){var o=this.options,n=this.xIncrement,n=ay(n,o.pointStart,0);this.pointInterval=ay(this.pointInterval,o.pointInterval,1);this.xIncrement=n+this.pointInterval;return n;},getSegments:function(){var o=-1,n=[],w,t=this.points,r=t.length;if(r){if(this.options.connectNulls){for(w=r;w--;){t[w].y===null&&t.splice(w,1);}t.length&&(n=[t]);}else{az(t,function(y,x){y.y===null?(x>o+1&&n.push(t.slice(o+1,x)),o=x):x===r-1&&n.push(t.slice(o+1,x+1));});}}this.segments=n;},setOptions:function(o){var n=this.chart.options,w=n.plotOptions,t=w[this.type],r=o.data;o.data=null;w=bn(t,w.series,o);w.data=o.data=r;this.tooltipOptions=bn(n.tooltip,w.tooltip);t.marker===null&&delete w.marker;return w;},getColor:function(){var o=this.options,n=this.chart.options.colors,r=this.chart.counters;this.color=o.color||!o.colorByPoint&&n[r.color++]||"gray";r.wrapColor(n.length);},getSymbol:function(){var o=this.options.marker,n=this.chart,r=n.options.symbols,n=n.counters;this.symbol=o.symbol||r[n.symbol++];if(/^url/.test(this.symbol)){o.radius=0;}n.wrapSymbol(r.length);},drawLegendSymbol:function(o){var n=this.options,y=n.marker,x=o.options.symbolWidth,w=this.chart.renderer,t=this.legendGroup,o=o.baseline,r;if(n.lineWidth){r={"stroke-width":n.lineWidth};if(n.dashStyle){r.dashstyle=n.dashStyle;}this.legendLine=w.path(["M",0,o-4,"L",x,o-4]).attr(r).add(t);}if(y&&y.enabled){n=y.radius,this.legendSymbol=w.symbol(this.symbol,x/2-n,o-4-n,2*n,2*n).add(t);}},addPoint:function(G,E,C,B){var A=this.data,z=this.graph,y=this.area,x=this.chart,w=this.xData,t=this.yData,r=z&&z.shift||0,o=this.options.data,n=this.pointClass.prototype;aL(B,x);if(z&&C){z.shift=r+1;}if(y){if(C){y.shift=r+1;}y.isArea=!0;}E=ay(E,!0);B={series:this};n.applyOptions.apply(B,[G]);w.push(B.x);t.push(n.toYData?n.toYData.call(B):B.y);o.push(G);C&&(A[0]&&A[0].remove?A[0].remove(!1):(A.shift(),w.shift(),t.shift(),o.shift()));this.getAttribs();this.isDirtyData=this.isDirty=!0;E&&x.redraw();},setData:function(G,E){var C=this.points,B=this.options,A=this.initialColor,z=this.chart,y=null,x=this.xAxis,w,t=this.pointClass.prototype;this.xIncrement=null;this.pointRange=x&&x.categories?1:B.pointRange;if(au(A)){z.counters.color=A;}var A=[],r=[],o=G?G.length:[],n=(w=this.pointArrayMap)&&w.length;if(o>(B.turboThreshold||1000)){for(w=0;y===null&&w<o;){y=G[w],w++;}if(bO(y)){t=ay(B.pointStart,0);B=ay(B.pointInterval,1);for(w=0;w<o;w++){A[w]=t,r[w]=G[w],t+=B;}this.xIncrement=t;}else{if(bD(y)){if(n){for(w=0;w<o;w++){B=G[w],A[w]=B[0],r[w]=B.slice(1,n+1);}}else{for(w=0;w<o;w++){B=G[w],A[w]=B[0],r[w]=B[1];}}}}}else{for(w=0;w<o;w++){B={series:this},t.applyOptions.apply(B,[G[w]]),A[w]=B.x,r[w]=t.toYData?t.toYData.call(B):B.y;}}bR(r[0])&&bl(14,!0);this.data=[];this.options.data=G;this.xData=A;this.yData=r;for(w=C&&C.length||0;w--;){C[w]&&C[w].destroy&&C[w].destroy();}if(x){x.minRange=x.userMinRange;}this.isDirty=this.isDirtyData=z.isDirtyBox=!0;ay(E,!0)&&z.redraw(!1);},remove:function(o,n){var t=this,r=t.chart,o=ay(o,!0);if(!t.isRemoving){t.isRemoving=!0,bg(t,"remove",null,function(){t.destroy();r.isDirtyLegend=r.isDirtyBox=!0;o&&r.redraw(n);});}t.isRemoving=!1;},processData:function(E){var C=this.xData,B=this.yData,A=C.length,z=0,y=A,x,w,t=this.xAxis,r=this.options,o=r.cropThreshold,n=this.isCartesian;if(n&&!this.isDirty&&!t.isDirty&&!this.yAxis.isDirty&&!E){return !1;}if(n&&this.sorted&&(!o||A>o||this.forceCrop)){if(E=t.getExtremes(),t=E.min,o=E.max,C[A-1]<t||C[0]>o){C=[],B=[];}else{if(C[0]<t||C[A-1]>o){for(E=0;E<A;E++){if(C[E]>=t){z=ap(0,E-1);break;}}for(;E<A;E++){if(C[E]>o){y=E+1;break;}}C=C.slice(z,y);B=B.slice(z,y);x=!0;}}}for(E=C.length-1;E>0;E--){if(A=C[E]-C[E-1],A>0&&(w===ar||A<w)){w=A;}}this.cropped=x;this.cropStart=z;this.processedXData=C;this.processedYData=B;if(r.pointRange===null){this.pointRange=w||1;}this.closestPointRange=w;},generatePoints:function(){var G=this.options.data,E=this.data,C,B=this.processedXData,A=this.processedYData,z=this.pointClass,y=B.length,x=this.cropStart||0,w,t=this.hasGroupedData,r,o=[],n;if(!E&&!t){E=[],E.length=G.length,E=this.data=E;}for(n=0;n<y;n++){w=x+n,t?o[n]=(new z).init(this,[B[n]].concat(bi(A[n]))):(E[w]?r=E[w]:G[w]!==ar&&(E[w]=r=(new z).init(this,G[w],B[n])),o[n]=r);}if(E&&(y!==(C=E.length)||t)){for(n=0;n<C;n++){if(n===x&&!t&&(n+=y),E[n]){E[n].destroyElements(),E[n].plotX=ar;}}}this.data=E;this.points=o;},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var M=this.chart,L=this.options,K=L.stacking,J=this.xAxis,I=J.categories,H=this.yAxis,G=this.points,E=G.length,C=!!this.modifyValue,B,A=H.series,z=A.length,y=L.pointPlacement==="between";z--;){if(A[z].visible){A[z]===this&&(B=!0);break;}}for(z=0;z<E;z++){var A=G[z],w=A.x,x=A.y,o=A.low,t=H.stacks[(x<L.threshold?"-":"")+this.stackKey];A.plotX=J.translate(w,0,0,0,1,y);if(K&&this.visible&&t&&t[w]){o=t[w],w=o.total,o.cum=o=o.cum-x,x=o+x,B&&(o=ay(L.threshold,H.min)),H.isLog&&o<=0&&(o=null),K==="percent"&&(o=w?o*100/w:0,x=w?x*100/w:0),A.percentage=w?A.y*100/w:0,A.total=A.stackTotal=w,A.stackY=x;}A.yBottom=au(o)?H.translate(o,0,1,0,1):null;C&&(x=this.modifyValue(x,A));A.plotY=typeof x==="number"?av(H.translate(x,0,1,0,1)*10)/10:ar;A.clientX=M.inverted?M.plotHeight-A.plotX:A.plotX;A.category=I&&I[A.x]!==ar?I[A.x]:A.x;}this.getSegments();},setTooltipPoints:function(A){var z=[],y,x,w=(y=this.xAxis)?y.tooltipLen||y.len:this.chart.plotSizeX,t=y&&y.tooltipPosName||"plotX",r,o,n=[];if(this.options.enableMouseTracking!==!1){if(A){this.tooltipPoints=null;}az(this.segments||this.points,function(B){z=z.concat(B);});y&&y.reversed&&(z=z.reverse());A=z.length;for(o=0;o<A;o++){r=z[o];y=z[o-1]?x+1:0;for(x=z[o+1]?ap(0,aU((r[t]+(z[o+1]?z[o+1][t]:w))/2)):w;y>=0&&y<=x;){n[y++]=r;}}this.tooltipPoints=n;}},tooltipHeaderFormatter:function(o){var n=this.tooltipOptions,x=n.xDateFormat,w=this.xAxis,t=w&&w.options.type==="datetime",r;if(t&&!x){for(r in bm){if(bm[r]>=w.closestPointRange){x=n.dateTimeLabelFormats[r];break;}}}return n.headerFormat.replace("{point.key}",t&&bO(o)?ax(x,o):o).replace("{series.name}",this.name).replace("{series.color}",this.color);},onMouseOver:function(){var o=this.chart,n=o.hoverSeries;if(n&&n!==this){n.onMouseOut();}this.options.events.mouseOver&&bg(this,"mouseOver");this.setState("hover");o.hoverSeries=this;},onMouseOut:function(){var o=this.options,n=this.chart,t=n.tooltip,r=n.hoverPoint;if(r){r.onMouseOut();}this&&o.events.mouseOut&&bg(this,"mouseOut");t&&!o.stickyTracking&&!t.shared&&t.hide();this.setState();n.hoverSeries=null;},animate:function(o){var n=this,z=n.chart,y=z.renderer,x;x=n.options.animation;var w=z.clipBox,t=z.inverted,r;if(x&&!aQ(x)){x=aR[n.type].animation;}r="_sharedClip"+x.duration+x.easing;if(o){o=z[r],x=z[r+"m"],o||(z[r]=o=y.clipRect(aw(w,{width:0})),z[r+"m"]=x=y.clipRect(-99,t?-z.plotLeft:-z.plotTop,99,t?z.chartWidth:z.chartHeight)),n.group.clip(o),n.markerGroup.clip(x),n.sharedClipKey=r;}else{if(o=z[r]){o.animate({width:z.plotSizeX},x),z[r+"m"].animate({width:z.plotSizeX+99},x);}n.animate=null;n.animationTimeout=setTimeout(function(){n.afterAnimate();},x.duration);}},afterAnimate:function(){var o=this.chart,n=this.sharedClipKey,r=this.group;r&&this.options.clip!==!1&&(r.clip(o.clipRect),this.markerGroup.clip());setTimeout(function(){n&&o[n]&&(o[n]=o[n].destroy(),o[n+"m"]=o[n+"m"].destroy());},100);},drawPoints:function(){var H,G=this.points,E=this.chart,C,B,A,z,y,x,w,t,r=this.options.marker,o,n=this.markerGroup;if(r.enabled||this._hasPointMarkers){for(A=G.length;A--;){if(z=G[A],C=z.plotX,B=z.plotY,t=z.graphic,x=z.marker||{},H=r.enabled&&x.enabled===ar||x.enabled,o=E.isInsidePlot(C,B,E.inverted),H&&B!==ar&&!isNaN(B)){if(H=z.pointAttr[z.selected?"select":""],y=H.r,x=ay(x.symbol,this.symbol),w=x.indexOf("url")===0,t){t.attr({visibility:o?aN?"inherit":"visible":"hidden"}).animate(aw({x:C-y,y:B-y},t.symbolName?{width:2*y,height:2*y}:{}));}else{if(o&&(y>0||w)){z.graphic=E.renderer.symbol(x,C-y,B-y,2*y,2*y).attr(H).add(n);}}}else{if(t){z.graphic=t.destroy();}}}}},convertAttribs:function(o,n,z,y){var x=this.pointAttrToOptions,w,t,r={},o=o||{},n=n||{},z=z||{},y=y||{};for(w in x){t=x[w],r[w]=ay(o[t],n[w],z[w],y[w]);}return r;},getAttribs:function(){var E=this,C=aR[E.type].marker?E.options.marker:E.options,B=C.states,A=B.hover,z,y=E.color,x={stroke:y,fill:y},w=E.points||[],t=[],r,o=E.pointAttrToOptions,n;E.options.marker?(A.radius=A.radius||C.radius+2,A.lineWidth=A.lineWidth||C.lineWidth+1):A.color=A.color||m(A.color||y).brighten(A.brightness).get();t[""]=E.convertAttribs(C,x);az(["hover","select"],function(G){t[G]=E.convertAttribs(B[G],t[""]);});E.pointAttr=t;for(y=w.length;y--;){x=w[y];if((C=x.options&&x.options.marker||x.options)&&C.enabled===!1){C.radius=0;}z=E.options.colorByPoint;if(x.options){for(n in o){au(C[o[n]])&&(z=!0);}}if(z){C=C||{};r=[];B=C.states||{};z=B.hover=B.hover||{};if(!E.options.marker){z.color=m(z.color||x.color).brighten(z.brightness||A.brightness).get();}r[""]=E.convertAttribs(aw({color:x.color},C),t[""]);r.hover=E.convertAttribs(B.hover,t.hover,r[""]);r.select=E.convertAttribs(B.select,t.select,r[""]);}else{r=t;}x.pointAttr=r;}},destroy:function(){var A=this,z=A.chart,y=/AppleWebKit\/533/.test(k),x,w,t=A.data||[],r,o,n;bg(A,"destroy");aV(A);az(["xAxis","yAxis"],function(B){if(n=A[B]){bz(n.series,A),n.isDirty=!0;}});A.legendItem&&A.chart.legend.destroyItem(A);for(w=t.length;w--;){(r=t[w])&&r.destroy&&r.destroy();}A.points=null;clearTimeout(A.animationTimeout);az("area,graph,dataLabelsGroup,group,markerGroup,tracker,trackerGroup".split(","),function(B){A[B]&&(x=y&&B==="group"?"hide":"destroy",A[B][x]());});if(z.hoverSeries===A){z.hoverSeries=null;}bz(z.series,A);for(o in A){delete A[o];}},drawDataLabels:function(){var o=this,n=o.options.dataLabels,y=o.points,x,w,t,r;if(n.enabled||o._hasPointLabels){o.dlProcessOptions&&o.dlProcessOptions(n),r=o.plotGroup("dataLabelsGroup","data-labels",o.visible?"visible":"hidden",6),w=n,az(y,function(E){var C,B=E.dataLabel,A,z=!0;x=E.options&&E.options.dataLabels;C=w.enabled||x&&x.enabled;if(B&&!C){E.dataLabel=B.destroy();}else{if(C){C=n.rotation;n=bn(w,x);t=n.formatter.call(E.getLabelConfig(),n);n.style.color=ay(n.color,n.style.color,o.color,"black");if(B){B.attr({text:t}),z=!1;}else{if(au(t)){B={fill:n.backgroundColor,stroke:n.borderColor,"stroke-width":n.borderWidth,r:n.borderRadius||0,rotation:C,padding:n.padding,zIndex:1};for(A in B){B[A]===ar&&delete B[A];}B=E.dataLabel=o.chart.renderer[C?"text":"label"](t,0,-999,null,null,null,n.useHTML).attr(B).css(n.style).add(r).shadow(n.shadow);}}B&&o.alignDataLabel(E,B,n,null,z);}}});}},alignDataLabel:function(A,z,y,x,w){var t=this.chart,r=t.inverted,o=ay(A.plotX,-999),A=ay(A.plotY,-999),n=z.getBBox(),x=aw({x:r?t.plotWidth-A:o,y:av(r?t.plotHeight-o:A),width:0,height:0},x);aw(y,{width:n.width,height:n.height});y.rotation?(x={align:y.align,x:x.x+y.x+x.width/2,y:x.y+y.y+x.height/2},z[w?"attr":"animate"](x)):(z.align(y,null,x),x=z.alignAttr);z.attr({visibility:y.crop===!1||t.isInsidePlot(x.x,x.y)||t.isInsidePlot(o,A,r)?aN?"inherit":"visible":"hidden"});},getSegmentPath:function(o){var n=this,r=[];az(o,function(w,t){n.getPointSpline?r.push.apply(r,n.getPointSpline(o,w,t)):(r.push(t?"L":"M"),t&&n.options.step&&r.push(w.plotX,o[t-1].plotY),r.push(w.plotX,w.plotY));});return r;},getGraphPath:function(){var o=this,n=[],t,r=[];az(o.segments,function(w){t=o.getSegmentPath(w);w.length>1?n=n.concat(t):r.push(w[0]);});o.singlePoints=r;return o.graphPath=n;},drawGraph:function(){var o=this.options,n=this.graph,y=this.group,x=o.lineColor||this.color,w=o.lineWidth,t=o.dashStyle,r=this.getGraphPath();if(n){f(n),n.animate({d:r});}else{if(w){n={stroke:x,"stroke-width":w,zIndex:1};if(t){n.dashstyle=t;}this.graph=this.chart.renderer.path(r).attr(n).add(y).shadow(o.shadow);}}},invertGroups:function(){function o(){var t={width:n.yAxis.len,height:n.xAxis.len};az(["group","trackerGroup","markerGroup"],function(w){n[w]&&n[w].attr(t).invert();});}var n=this,r=n.chart;a9(r,"resize",o);a9(n,"destroy",function(){aV(r,"resize",o);});o();n.invertGroups=o;},plotGroup:function(A,z,y,x,w){var t=this[A],r=this.chart,o=this.xAxis,n=this.yAxis;t||(this[A]=t=r.renderer.g(z).attr({visibility:y,zIndex:x||0.1}).add(w));t.translate(o?o.left:r.plotLeft,n?n.top:r.plotTop);return t;},render:function(){var o=this.chart,n,z=this.options,y=z.animation&&!!this.animate,x=this.visible?"visible":"hidden",w=z.zIndex,t=this.hasRendered,r=o.seriesGroup;n=this.plotGroup("group","series",x,w,r);this.markerGroup=this.plotGroup("markerGroup","markers",x,w,r);y&&this.animate(!0);this.getAttribs();n.inverted=o.inverted;this.drawGraph&&this.drawGraph();this.drawPoints();this.drawDataLabels();this.options.enableMouseTracking!==!1&&this.drawTracker();o.inverted&&this.invertGroups();z.clip!==!1&&!this.sharedClipKey&&!t&&(n.clip(o.clipRect),this.trackerGroup&&this.trackerGroup.clip(o.clipRect));y?this.animate():t||this.afterAnimate();this.isDirty=this.isDirtyData=!1;this.hasRendered=!0;},redraw:function(){var o=this.chart,n=this.isDirtyData,r=this.group;r&&(o.inverted&&r.attr({width:o.plotWidth,height:o.plotHeight}),r.animate({translateX:this.xAxis.left,translateY:this.yAxis.top}));this.translate();this.setTooltipPoints(!0);this.render();n&&bg(this,"updatedData");},setState:function(o){var n=this.options,t=this.graph,r=n.states,n=n.lineWidth,o=o||"";if(this.state!==o){this.state=o,r[o]&&r[o].enabled===!1||(o&&(n=r[o].lineWidth||n+1),t&&!t.dashstyle&&t.attr({"stroke-width":n},o?0:500));}},setVisible:function(C,B){var A=this.chart,z=this.legendItem,y=this.group,x=this.tracker,w=this.dataLabelsGroup,t=this.markerGroup,r,o=this.points,n=A.options.chart.ignoreHiddenSeries;r=this.visible;r=(this.visible=C=C===ar?!r:C)?"show":"hide";if(y){y[r]();}if(t){t[r]();}if(x){x[r]();}else{if(o){for(y=o.length;y--;){if(x=o[y],x.tracker){x.tracker[r]();}}}}if(w){w[r]();}z&&A.legend.colorizeItem(this,C);this.isDirty=!0;this.options.stacking&&az(A.series,function(E){if(E.options.stacking&&E.visible){E.isDirty=!0;}});if(n){A.isDirtyBox=!0;}B!==!1&&A.redraw();bg(this,r);},show:function(){this.setVisible(!0);},hide:function(){this.setVisible(!1);},select:function(n){this.selected=n=n===ar?!this.selected:n;if(this.checkbox){this.checkbox.checked=n;}bg(this,n?"select":"unselect");},drawTracker:function(){var G=this,E=G.options,C=E.trackByArea,B=[].concat(C?G.areaPath:G.graphPath),A=B.length,z=G.chart,y=z.renderer,x=z.options.tooltip.snap,w=G.tracker,t=E.cursor,t=t&&{cursor:t},r=G.singlePoints,o=this.isCartesian&&this.plotGroup("trackerGroup",null,"visible",E.zIndex||1,z.trackerGroup),n;if(A&&!C){for(n=A+1;n--;){B[n]==="M"&&B.splice(n+1,0,B[n+1]-x,B[n+2],"L"),(n&&B[n]==="M"||n===A)&&B.splice(n,0,"L",B[n-2]+x,B[n-1]);}}for(n=0;n<r.length;n++){A=r[n],B.push("M",A.plotX-x,A.plotY,"L",A.plotX+x,A.plotY);}w?w.attr({d:B}):G.tracker=y.path(B).attr({isTracker:!0,"stroke-linejoin":"bevel",visibility:G.visible?"visible":"hidden",stroke:u,fill:C?u:aW,"stroke-width":E.lineWidth+(C?0:2*x)}).on(bN?"touchstart":"mouseover",function(){if(z.hoverSeries!==G){G.onMouseOver();}}).on("mouseout",function(){if(!E.stickyTracking){G.onMouseOut();}}).css(t).add(o);}};be=aA(a1);bE.line=be;aR.area=bn(bx,{threshold:0});be=aA(a1,{type:"area",getSegmentPath:function(o){var n=a1.prototype.getSegmentPath.call(this,o),w=[].concat(n),t,r=this.options;n.length===3&&w.push("L",n[1],n[2]);if(r.stacking&&!this.closedStacks){for(t=o.length-1;t>=0;t--){t<o.length-1&&r.step&&w.push(o[t+1].plotX,o[t].yBottom),w.push(o[t].plotX,o[t].yBottom);}}else{this.closeSegment(w,o);}this.areaPath=this.areaPath.concat(w);return n;},closeSegment:function(o,n){var r=this.yAxis.getThreshold(this.options.threshold);o.push("L",n[n.length-1].plotX,r,"L",n[0].plotX,r);},drawGraph:function(){this.areaPath=[];a1.prototype.drawGraph.apply(this);var o=this.areaPath,n=this.options,r=this.area;r?r.animate({d:o}):this.area=this.chart.renderer.path(o).attr({fill:ay(n.fillColor,m(this.color).setOpacity(n.fillOpacity||0.75).get()),zIndex:0}).add(this.group);},drawLegendSymbol:function(o,n){n.legendSymbol=this.chart.renderer.rect(0,o.baseline-11,o.options.symbolWidth,12,2).attr({zIndex:3}).add(n.legendGroup);}});bE.area=be;aR.spline=bn(bx);a6=aA(a1,{type:"spline",getPointSpline:function(E,C,B){var A=C.plotX,z=C.plotY,y=E[B-1],x=E[B+1],w,t,r,o;if(y&&x){E=y.plotY;r=x.plotX;var x=x.plotY,n;w=(1.5*A+y.plotX)/2.5;t=(1.5*z+E)/2.5;r=(1.5*A+r)/2.5;o=(1.5*z+x)/2.5;n=(o-t)*(r-A)/(r-w)+z-o;t+=n;o+=n;t>E&&t>z?(t=ap(E,z),o=2*z-t):t<E&&t<z&&(t=a0(E,z),o=2*z-t);o>x&&o>z?(o=ap(x,z),t=2*z-o):o<x&&o<z&&(o=a0(x,z),t=2*z-o);C.rightContX=r;C.rightContY=o;}B?(C=["C",y.rightContX||y.plotX,y.rightContY||y.plotY,w||A,t||z,A,z],y.rightContX=y.rightContY=null):C=["M",A,z];return C;}});bE.spline=a6;aR.areaspline=bn(aR.area);var bt=be.prototype,a6=aA(a6,{type:"areaspline",closedStacks:!0,getSegmentPath:bt.getSegmentPath,closeSegment:bt.closeSegment,drawGraph:bt.drawGraph});bE.areaspline=a6;aR.column=bn(bx,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},threshold:0});a6=aA(a1,{type:"column",tooltipOutsidePlot:!0,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){a1.prototype.init.apply(this,arguments);var o=this,n=o.chart;n.hasRendered&&az(n.series,function(r){if(r.type===o.type){r.isDirty=!0;}});},translate:function(){var T=this,S=T.chart,R=T.options,O=R.stacking,N=R.borderWidth,M=0,L=T.xAxis,K=L.reversed,J={},I,H;a1.prototype.translate.apply(T);R.grouping===!1?M=1:az(S.series,function(r){var w=r.options;if(r.type===T.type&&r.visible&&T.options.group===w.group){w.stacking?(I=r.stackKey,J[I]===ar&&(J[I]=M++),H=J[I]):w.grouping!==!1&&(H=M++),r.columnIndex=H;}});var G=T.points,L=a3(L.transA)*(L.ordinalSlope||R.pointRange||L.closestPointRange||1),E=L*R.groupPadding,C=(L-2*E)/M,x=R.pointWidth,A=au(x)?(C-x)/2:C*R.pointPadding,B=ay(x,C-2*A),y=D(ap(B,1+2*N)),o=A+(E+((K?M-T.columnIndex:T.columnIndex)||0)*C-L/2)*(K?-1:1),n=T.translatedThreshold=T.yAxis.getThreshold(R.threshold),t=ay(R.minPointLength,5);az(G,function(X){var W=X.plotY,V=ay(X.yBottom,n),U=X.plotX+o,z=D(a0(W,V)),w=D(ap(W,V)-z),r=T.yAxis.stacks[(X.y<0?"-":"")+T.stackKey];O&&T.visible&&r&&r[X.x]&&r[X.x].setOffset(o,y);a3(w)<t&&t&&(w=t,z=a3(z-n)>t?V-t:n-(W<=n?t:0));X.barX=U;X.pointWidth=B;X.shapeType="rect";X.shapeArgs=W=S.renderer.Element.prototype.crisp.call(0,N,U,z,y,w);N%2&&(W.y-=1,W.height+=1);X.trackerArgs=a3(w)<3&&bn(X.shapeArgs,{height:6,y:z-3});});},getSymbol:bJ,drawLegendSymbol:be.prototype.drawLegendSymbol,drawGraph:bJ,drawPoints:function(){var o=this,n=o.options,t=o.chart.renderer,r;az(o.points,function(y){var x=y.plotY,w=y.graphic;if(x!==ar&&!isNaN(x)&&y.y!==null){r=y.shapeArgs,w?(f(w),w.animate(bn(r))):y.graphic=t[y.shapeType](r).attr(y.pointAttr[y.selected?"select":""]).add(o.group).shadow(n.shadow,null,n.stacking&&!n.borderRadius);}else{if(w){y.graphic=w.destroy();}}});},drawTracker:function(){var G=this,E=G.chart,C=E.renderer,B,A,z=+new Date,y=G.options,x=y.cursor,w=x&&{cursor:x},t=G.isCartesian&&G.plotGroup("trackerGroup",null,"visible",y.zIndex||1,E.trackerGroup),r,o,n;az(G.points,function(H){A=H.tracker;B=H.trackerArgs||H.shapeArgs;o=H.plotY;n=!G.isCartesian||o!==ar&&!isNaN(o);delete B.strokeWidth;if(H.y!==null&&n){A?A.attr(B):H.tracker=C[H.shapeType](B).attr({isTracker:z,fill:u,visibility:G.visible?"visible":"hidden"}).on(bN?"touchstart":"mouseover",function(I){r=I.relatedTarget||I.fromElement;if(E.hoverSeries!==G&&ao(r,"isTracker")!==z){G.onMouseOver();}H.onMouseOver();}).on("mouseout",function(I){if(!y.stickyTracking&&(r=I.relatedTarget||I.toElement,ao(r,"isTracker")!==z)){G.onMouseOut();}}).css(w).add(H.group||t);}});},alignDataLabel:function(A,z,y,x,w){var t=this.chart,r=t.inverted,o=A.below||A.plotY>(this.translatedThreshold||t.plotSizeY),n=this.options.stacking||y.inside;if(A.shapeArgs&&(x=bn(A.shapeArgs),r&&(x={x:t.plotWidth-x.y-x.height,y:t.plotHeight-x.x-x.width,width:x.height,height:x.width}),!n)){r?(x.x+=o?0:x.width,x.width=0):(x.y+=o?x.height:0,x.height=0);}y.align=ay(y.align,!r||n?"center":o?"right":"left");y.verticalAlign=ay(y.verticalAlign,r||n?"middle":o?"top":"bottom");a1.prototype.alignDataLabel.call(this,A,z,y,x,w);},animate:function(o){var n=this,t=n.points,r=n.options;if(!o){az(t,function(w){var z=w.graphic,w=w.shapeArgs,y=n.yAxis,x=r.threshold;z&&(z.attr({height:0,y:au(x)?y.getThreshold(x):y.translate(y.getExtremes().min,0,1,0,1)}),z.animate({height:w.height,y:w.y},r.animation));}),n.animate=null;}},remove:function(){var o=this,n=o.chart;n.hasRendered&&az(n.series,function(r){if(r.type===o.type){r.isDirty=!0;}});a1.prototype.remove.apply(o,arguments);}});bE.column=a6;aR.bar=bn(aR.column);bt=aA(a6,{type:"bar",inverted:!0});bE.bar=bt;aR.scatter=bn(bx,{lineWidth:0,states:{hover:{lineWidth:0}},tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});bt=aA(a1,{type:"scatter",sorted:!1,translate:function(){var n=this;a1.prototype.translate.apply(n);az(n.points,function(o){o.shapeType="circle";o.shapeArgs={x:o.plotX,y:o.plotY,r:n.chart.options.tooltip.snap};});},drawTracker:function(){for(var o=this,n=o.options.cursor,n=n&&{cursor:n},w=o.points,t=w.length,r;t--;){if(r=w[t].graphic){r.element._i=t;}}o._hasTracking?o._hasTracking=!0:o.markerGroup.attr({isTracker:!0}).on(bN?"touchstart":"mouseover",function(x){o.onMouseOver();if(x.target._i!==ar){w[x.target._i].onMouseOver();}}).on("mouseout",function(){if(!o.options.stickyTracking){o.onMouseOut();}}).css(n);}});bE.scatter=bt;aR.pie=bn(bx,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name;}},legendType:"point",marker:null,size:"75%",showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}}});bJ={type:"pie",isCartesian:!1,pointClass:aA(bK,{init:function(){bK.prototype.init.apply(this,arguments);var o=this,n;aw(o,{visible:o.visible!==!1,name:ay(o.name,"Slice")});n=function(){o.slice();};a9(o,"select",n);a9(o,"unselect",n);return o;},setVisible:function(o){var n=this.series,z=n.chart,y=this.tracker,x=this.dataLabel,w=this.connector,t=this.shadowGroup,r;r=(this.visible=o=o===ar?!this.visible:o)?"show":"hide";this.group[r]();if(y){y[r]();}if(x){x[r]();}if(w){w[r]();}if(t){t[r]();}this.legendItem&&z.legend.colorizeItem(this,o);if(!n.isDirty&&n.options.ignoreHiddenPoint){n.isDirty=!0,z.redraw();}},slice:function(o,n,w){var t=this.series.chart,r=this.slicedTranslation;aL(w,t);ay(n,!0);o=this.sliced=au(o)?o:!this.sliced;o={translateX:o?r[0]:t.plotLeft,translateY:o?r[1]:t.plotTop};this.group.animate(o);this.shadowGroup&&this.shadowGroup.animate(o);}}),pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=this.chart.counters.color;},animate:function(){var n=this;az(n.points,function(o){var t=o.graphic,o=o.shapeArgs,r=-c/2;t&&(t.attr({r:0,start:r,end:r}),t.animate({r:o.r,start:o.start,end:o.end},n.options.animation));});n.animate=null;},setData:function(o,n){a1.prototype.setData.call(this,o,!1);this.processData();this.generatePoints();ay(n,!0)&&this.chart.redraw();},getCenter:function(){var o=this.options,n=this.chart,x=n.plotWidth,w=n.plotHeight,o=o.center.concat([o.size,o.innerSize||0]),t=a0(x,w),r;return d(o,function(z,y){return(r=/%$/.test(z))?[x,w,t,t][y]*at(z)/100:z;});},translate:function(){this.generatePoints();var N=0,M=-0.25,L=this.options,K=L.slicedOffset,J=K+L.borderWidth,I,H=this.chart,G,E,C,B=this.points,A=2*c,z=L.dataLabels.distance,x=L.ignoreHiddenPoint,y,t=B.length,w;this.center=I=this.getCenter();this.getX=function(o,n){C=a8.asin((o-I[1])/(I[2]/2+z));return I[0]+(n?-1:1)*aS(C)*(I[2]/2+z);};for(y=0;y<t;y++){w=B[y],N+=x&&!w.visible?0:w.y;}for(y=0;y<t;y++){w=B[y];L=N?w.y/N:0;G=av(M*A*1000)/1000;if(!x||w.visible){M+=L;}E=av(M*A*1000)/1000;w.shapeType="arc";w.shapeArgs={x:I[0],y:I[1],r:I[2]/2,innerR:I[3]/2,start:G,end:E};C=(E+G)/2;w.slicedTranslation=d([aS(C)*K+H.plotLeft,aP(C)*K+H.plotTop],av);G=aS(C)*I[2]/2;E=aP(C)*I[2]/2;w.tooltipPos=[I[0]+G*0.7,I[1]+E*0.7];w.labelPos=[I[0]+G+aS(C)*z,I[1]+E+aP(C)*z,I[0]+G+aS(C)*J,I[1]+E+aP(C)*J,I[0]+G,I[1]+E,z<0?"center":C<A/4?"left":"right",C];w.percentage=L*100;w.total=N;}this.setTooltipPoints();},render:function(){this.getAttribs();this.drawPoints();this.options.enableMouseTracking!==!1&&this.drawTracker();this.drawDataLabels();this.options.animation&&this.animate&&this.animate();this.isDirty=!1;},drawPoints:function(){var A=this,z=A.chart,y=z.renderer,x,w,t,r=A.options.shadow,o,n;az(A.points,function(B){w=B.graphic;n=B.shapeArgs;t=B.group;o=B.shadowGroup;if(r&&!o){o=B.shadowGroup=y.g("shadow").attr({zIndex:4}).add();}if(!t){t=B.group=y.g("point").attr({zIndex:5}).add();}x=B.sliced?B.slicedTranslation:[z.plotLeft,z.plotTop];t.translate(x[0],x[1]);o&&o.translate(x[0],x[1]);w?w.animate(n):B.graphic=w=y.arc(n).setRadialReference(A.center).attr(aw(B.pointAttr[""],{"stroke-linejoin":"round"})).add(B.group).shadow(r,o);B.visible===!1&&B.setVisible(!1);});},drawDataLabels:function(){var bX=this.data,bW,bb=this.chart,ba=this.options.dataLabels,ab=ay(ba.connectorPadding,10),Z=ay(ba.connectorWidth,1),Y,X,W=ay(ba.softConnector,!0),V=ba.distance,U=this.center,T=U[2]/2,S=U[1],R=V>0,L=[[],[]],J,N,I,G,o=2,H;if(ba.enabled||this._hasPointLabels){a1.prototype.drawDataLabels.apply(this);az(bX,function(r){r.dataLabel&&L[r.labelPos[7]<c/2?0:1].push(r);});L[1].reverse();G=function(t,r){return r.y-t.y;};for(bX=L[0][0]&&L[0][0].dataLabel&&(L[0][0].dataLabel.getBBox().height||21);o--;){var E=[],O=[],n=L[o],K=n.length,M;if(V>0){for(H=S-T-V;H<=S+T+V;H+=bX){E.push(H);}I=E.length;if(K>I){X=[].concat(n);X.sort(G);for(H=K;H--;){X[H].rank=H;}for(H=K;H--;){n[H].rank>=I&&n.splice(H,1);}K=n.length;}for(H=0;H<K;H++){bW=n[H];X=bW.labelPos;bW=9999;for(N=0;N<I;N++){Y=a3(E[N]-X[1]),Y<bW&&(bW=Y,M=N);}if(M<H&&E[H]!==null){M=H;}else{for(I<K-H+M&&E[H]!==null&&(M=I-K+H);E[M]===null;){M++;}}O.push({i:M,y:E[M]});E[M]=null;}O.sort(G);}for(H=0;H<K;H++){bW=n[H];X=bW.labelPos;Y=bW.dataLabel;I=bW.visible===!1?"hidden":"visible";J=X[1];if(V>0){if(N=O.pop(),M=N.i,N=N.y,J>N&&E[M+1]!==null||J<N&&E[M-1]!==null){N=J;}}else{N=J;}J=ba.justify?U[0]+(o?-1:1)*(T+V):this.getX(M===0||M===E.length-1?J:N,o);Y.attr({visibility:I,align:X[6]})[Y.moved?"animate":"attr"]({x:J+ba.x+({left:ab,right:-ab}[X[6]]||0),y:N+ba.y-10});Y.moved=!0;if(R&&Z){Y=bW.connector,X=W?["M",J+(X[6]==="left"?5:-5),N,"C",J,N,2*X[2]-X[4],2*X[3]-X[5],X[2],X[3],"L",X[4],X[5]]:["M",J+(X[6]==="left"?5:-5),N,"L",X[2],X[3],"L",X[4],X[5]],Y?(Y.animate({d:X}),Y.attr("visibility",I)):bW.connector=Y=this.chart.renderer.path(X).attr({"stroke-width":Z,stroke:ba.connectorColor||bW.color||"#606060",visibility:I,zIndex:3}).translate(bb.plotLeft,bb.plotTop).add();}}}}},alignDataLabel:bJ,drawTracker:a6.prototype.drawTracker,drawLegendSymbol:be.prototype.drawLegendSymbol,getSymbol:function(){}};bJ=aA(a1,bJ);bE.pie=bJ;aw(Highcharts,{Axis:aF,CanVGRenderer:bw,Chart:bF,Color:m,Legend:bS,MouseTracker:l,Point:bK,Tick:aM,Tooltip:ag,Renderer:F,Series:a1,SVGRenderer:bU,VMLRenderer:ad,dateFormat:ax,pathAnim:ak,getOptions:function(){return a2;},hasBidiBug:aK,numberFormat:bj,seriesTypes:bE,setOptions:function(n){a2=bn(a2,n);bQ();return a2;},addEvent:a9,removeEvent:aV,createElement:aX,discardElement:bI,css:bd,each:az,extend:aw,map:d,merge:bn,pick:ay,splat:bi,extendClass:aA,pInt:at,wrap:function(o,n,t){var r=o[n];o[n]=function(){var w=Array.prototype.slice.call(arguments);w.unshift(r);return t.apply(this,w);};},svg:aN,canvas:aT,vml:!aN&&!aT,product:"Highcharts",version:"2.3.3"});})();Number.prototype.format=function(k,g,e){var h=this,k=isNaN(k=Math.abs(k))?2:k,g=g==undefined?".":g,e=e==undefined?",":e,f=h<0?"-":"",b=parseInt(h=Math.abs(+h||0).toFixed(k))+"",a=(a=b.length)>3?a%3:0;return f+(a?b.substr(0,a)+e:"")+b.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+e)+(k?g+Math.abs(h-b).toFixed(k).slice(2):"");};var MetricTile;(function(a){MetricTile=Class.extend({init:function(b){this.source=b;},createWithLink:function(){var b=_.template(a("#metricsTileTemplate").html());return b({url:this.url,name:this.name,source_name:this.source.name,imgSrc:this.imageSrc,linkText:this.linkText});},createWithNoLink:function(){var b=_.template(a("#metricsTileTemplateNoLink").html());return b({name:this.name,source_name:this.source.name,imgSrc:this.imageSrc,linkText:this.linkText});},createTile:function(c){this.beforeCreateTile();var b=null;if(this.hasUrl){b=this.createWithLink();}else{b=this.createWithNoLink();}a(c).append(b);this.afterCreateTile();},beforeCreateTile:function(){switch(this.source.name){case"twitter":this.source.events_url=ALM_CONFIG.hostname+"/works/doi.org/"+ArticleData.doi+"?source_id=twitter";break;default:break;}this.name=this.source.display_name;this.imageSrc=WombatConfig.imgPath+"logo-"+this.source.name+".png";this.linkText=this.source.metrics.total;this.hasUrl=false;if(_.has(this.source,"events_url")&&!_.isEmpty(this.source.events_url)){this.hasUrl=true;this.url=this.source.events_url.replace(/"/g,"%22");}},afterCreateTile:function(){var e=this;var b=false;var f=false;var d="#"+this.source.name+"OnArticleMetricsTab";switch(this.source.name){case"facebook":b=_.template(a("#metricsTileFacebookTooltipTemplate").html());f={likes:this.source.events[0].like_count,shares:this.source.events[0].share_count,comments:this.source.events[0].comment_count};break;case"mendeley":b=_.template(a("#metricsTileMendeleyTooltipTemplate").html());f={individuals:this.source.events.reader_count,groups:this.source.events.group_count};break;case"figshare":var c=_.template(a("#metricsTileFigshareTooltipTemplate").html());var g={items:{}};a.ajax({url:"assets/figsAndTables?id="+ArticleData.doi,dataType:"json",error:function(h,j,i){},success:function(k){if(k&&e.source.events){var i={};_.each(e.source.events,function(m){if(m.doi&&_.isString(m.doi)){var l=m.doi.replace(/^https?:\/\/(dx\.)?doi\.org\//,"");i[l]=m;}else{i.SI=m;}});k=_.map(k,function(m){var l=i[m.doi];if(l){m.totalStat=l.stats.downloads+l.stats.page_views;m.link=l.figshare_url;}return m;});g.items=_.sortBy(k,function(l){return(l.type==="table")?1:0;});if(i.SI){var h={title:"Supporting Info Files",totalStat:i.SI.stats.downloads+i.SI.stats.page_views,link:i.SI.figshare_url};g.items.push(h);}a("#figshareImageOnArticleMetricsTab").attr("data-options","align:right").attr("data-dropdown","dropdown-figshare").after(c(g));var j=a("#article-metrics").attr("data-showTooltip");if(j){a(document).foundation("dropdown","reflow");}}}});break;default:break;}if(b&&f){a(d).attr("data-js-tooltip-hover","trigger").append(b(f));tooltip_hover.init();}}});})(jQuery);var MetricsTabComponent;(function(a){MetricsTabComponent=Class.extend({$loadingEl:null,$element:null,$headerEl:null,sourceOrder:[],data:[],sources:[],init:function(){this.$loadingEl.show();this.$element.hide();},loadData:function(c){var e=_.findIndex(c.sources,{name:"crossref"});if(e>=0){var d=c.sources[e];if(!_.has(d,"metrics")){d.metrics={total:0};}if(_.has(d,"by_month")&&d.metrics.total<=0){var b=_.reduce(d.by_month,function(f,g){return f+g.total;},0);d.metrics.total=b;}}this.data=c;this.filterSources();},showComponent:function(){this.$loadingEl.hide();this.$element.show();this.$headerEl.show();},hideComponent:function(){this.$loadingEl.hide();this.$element.hide();this.$headerEl.hide();},emptyComponent:function(){this.hideComponent();},afterLoadData:function(){if(this.sources.length){this.showComponent();}else{this.emptyComponent();}},filterSources:function(){var c=this;var b=_.filter(this.data.sources,function(e){return _.contains(c.sourceOrder,e.name)&&e.metrics.total>0;});var d=_.invert(_.object(_.pairs(this.sourceOrder)));this.sources=_.sortBy(b,function(e){return d[e.name];});},formatName:function(b){b=b.replace(/\s/g,"");b=b.replace("\u00ae","");return b;},createTiles:function(){var b=this;_.each(this.sources,function(d){d.display_name=b.formatName(d.display_name);var c=new MetricTile(d);c.createTile(b.$element);});},newArticleError:function(){this.$element.hide();this.$loadingEl.hide();},dataError:function(){this.$element.hide();this.$loadingEl.hide();}});})(jQuery);var MetricsDiscussedSection;(function(a){MetricsDiscussedSection=MetricsTabComponent.extend({$element:a("#relatedBlogPosts"),$loadingEl:a("#relatedBlogPostsSpinner"),$headerEl:a("#discussedHeader"),sourceOrder:["researchblogging","scienceseeker","nature","wordpress","wikipedia","twitter","facebook","reddit"],loadData:function(b){this._super(b);this.createTiles();a("#notesAndCommentsOnArticleMetricsTab").appendTo(this.$element);a("#trackbackOnArticleMetricsTab").appendTo(this.$element);this.afterLoadData();},emptyComponent:function(){this.showComponent();},dataError:function(){this.$loadingEl.hide();this.$element.show();},newArticleError:function(){this.dataError();}});})(jQuery);var MetricsSavedSection;(function(a){MetricsSavedSection=MetricsTabComponent.extend({$element:a("#relatedBookmarks"),$loadingEl:a("#relatedBookmarksSpinner"),$headerEl:a("#savedHeader"),sourceOrder:["citeulike","connotea","mendeley"],loadData:function(b){this._super(b);this.createTiles();this.afterLoadData();},dataError:function(){if(a("#savedCard").length){a("#savedCard").hide();}else{a("#socialNetworksOnArticleMetricsPage").css("display","none");}},newArticleError:function(){this.dataError();}});})(jQuery);var MetricsCitedSection;(function(d){var a=encodeURI(ArticleData.doi);var c=a.replace("info%3Adoi/","");var b=WombatConfig.metrics.googleScholarCitationUrl+c;MetricsCitedSection=MetricsTabComponent.extend({$element:d("#relatedCites"),$loadingEl:d("#relatedCitesSpinner"),$headerEl:d("#citedHeader"),sourceOrder:["scopus","crossref","pubmed","wos","pmceurope","pmceuropedata","datacite"],loadData:function(f){this._super(f);var e={display_name:"GoogleScholar",events_url:b,name:"google-scholar",metrics:{total:"Search"}};this.sources.push(e);this.createTiles();this.afterLoadData();},dataError:function(){var f=_.template(d("#citedSectionNoDataTemplate").html());var e=f({googleLink:b});this.$element.append(e).show();this.$loadingEl.hide();},newArticleError:function(){this.dataError();}});})(jQuery);var MetricsViewedSection;(function(a){MetricsViewedSection=MetricsTabComponent.extend({$element:a("#views"),$loadingEl:a("#chartSpinner"),$headerEl:a("#viewedHeader"),$chartElement:a("#usage"),sourceOrder:["figshare"],chartData:[],highchartPlosSeriesData:[],highchartPMCSeriesData:[],loadData:function(b){this._super(b);this.$chartElement.hide();this.filterChartData();this.createSummaryTable();this.createHighchart();this.$chartElement.append(a("<p>*Although we update our data on a daily basis, there may be a 48-hour delay before the most recent numbers are available. PMC data is posted on a monthly basis and will be made available once received.</p>"));this.createTiles();this.afterLoadData();},afterLoadData:function(){this.showComponent();this.$chartElement.show();},dataError:function(){var c=_.template(a("#viewedSectionNoDataTemplate").html());var b=c();this.$element.append(b).show();this.$loadingEl.hide();},newArticleError:function(){var c=_.template(a("#viewedSectionNewArticleErrorTemplate").html());var b=c();this.$element.append(b).show();this.$loadingEl.hide();},getYearMonthString:function(d,b,c){if(!c){c="";}if(d<10){d="0"+d.toString();}else{d=d.toString();}return b.toString()+c+d;},filterEvents:function(b,e){var d=this;var c=_.filter(this.data.sources,function(f){return f.name.toLowerCase()==b;});if(c[0]&&c[0].events&&c[0].events.length>0){c=_.filter(c[0].events,function(f){return parseInt(d.getYearMonthString(f.month,f.year))>=e;});c=_.sortBy(c,function(f){return parseInt(d.getYearMonthString(f.month,f.year));});}else{c=[];}return c;},createHistoryDataStructure:function(i,h){var b=new Date();var c=b.getFullYear();var e=b.getMonth()+1;var g={};for(var d=i;d<=c;d++){if(d==i&&d==c){for(var f=h;f<=e;f++){g[this.getYearMonthString(f,d,"-")]=this.createHistoryMonthStructure(f,d);}}else{if(d==i&&d!=c){for(var f=h;f<=12;f++){g[this.getYearMonthString(f,d,"-")]=this.createHistoryMonthStructure(f,d);}}else{if(d!=i&&d==c){for(var f=1;f<=e;f++){g[this.getYearMonthString(f,d,"-")]=this.createHistoryMonthStructure(f,d);}}else{for(var f=1;f<=12;f++){g[this.getYearMonthString(f,d,"-")]=this.createHistoryMonthStructure(f,d);}}}}}return g;},createHistoryMonthStructure:function(c,b){return{source:{counterViews:{month:c,year:b,totalPDF:0,totalXML:0,totalHTML:0,total:0,cumulativePDF:0,cumulativeXML:0,cumulativeHTML:0,cumulativeTotal:0},pmcViews:{month:c,year:b,cumulativePDF:0,cumulativeXML:"n.a.",cumulativeHTML:0,cumulativeTotal:0,totalPDF:0,totalXML:"n.a.",totalHTML:0,total:0}},year:b,month:c,cumulativeTotal:0,cumulativePDF:0,cumulativeXML:0,cumulativeHTML:0,total:0};},populateHistoryData:function(f,l,c){var g=this;var k=0;var e=0;var h=0;var i=0;var j=0;var b=0;var d=0;_.each(f,function(m,o){var r=_.findWhere(l,{month:m.month.toString(),year:m.year.toString()});var q=_.findWhere(c,{month:m.month.toString(),year:m.year.toString()});var n=f[o].source.counterViews;var p=f[o].source.pmcViews;if(r){n.totalPDF=parseInt(r.pdf_views);n.totalXML=parseInt(r.xml_views);n.totalHTML=parseInt(r.html_views);n.total=n.totalPDF+n.totalXML+n.totalHTML;}k+=n.totalPDF;e+=n.totalXML;h+=n.totalHTML;i+=n.total;n.cumulativePDF=k;n.cumulativeXML=e;n.cumulativeHTML=h;n.cumulativeTotal=i;if(q){p.totalPDF=parseInt(q.pdf);p.totalHTML=parseInt(q["full-text"]);p.total=p.totalPDF+p.totalHTML;}j+=p.totalPDF;b+=p.totalHTML;d+=p.total;p.cumulativePDF=j;p.cumulativeHTML=b;p.cumulativeTotal=d;m.total=n.total+p.total;m.cumulativePDF=n.cumulativePDF+p.cumulativePDF;m.cumulativeXML=n.cumulativeXML;m.cumulativeHTML=n.cumulativeHTML+p.cumulativeHTML;m.cumulativeTotal=n.cumulativeTotal+p.cumulativeTotal;g.highchartPlosSeriesData.push({name:o,y:n.cumulativeTotal});g.highchartPMCSeriesData.push({name:o,y:p.cumulativeTotal});});return f;},filterChartData:function(){var o=moment(ArticleData.date,"MMM DD, YYYY").toDate();var j=o.getFullYear();var b=o.getMonth()+1;var h=parseInt(this.getYearMonthString(b,j));var l={};var f=this.filterEvents("counter",h);var m=this.filterEvents("pmc",h);var t=this.data;var i=_.filter(t.sources,function(u){return u.name.toLowerCase()=="relativemetric";});if(i[0]&&i[0].events&&!_.isEmpty(i[0].events.subject_areas)){l.relativeMetricData=i[0].events;}var e=t.counterData;var k=e["get-pdf"];var q=e["get-xml"];var n=e["get-document"];var d=e.totals;var r=_.reduce(m,function(u,v){return u+parseInt(v.pdf);},0);var p=_.reduce(m,function(u,v){return u+parseInt(v["full-text"]);},0);var c=r+p;l.totalCounterPDF=k;l.totalCounterXML=q;l.totalCounterHTML=n;l.totalCouterTotal=d;l.totalPMCPDF=r;l.totalPMCHTML=p;l.totalPMCTotal=c;l.totalPDF=k+r;l.totalXML=q;l.totalHTML=n+p;l.total=d+c;var g=this.createHistoryDataStructure(j,b);l.history=this.populateHistoryData(g,f,m);this.chartData=l;},createSummaryTable:function(){var c=_.template(a("#pageViewsSummary").html());var e=this.chartData;var f=0;var d={total:e.total.format(f),pubDatesFrom:moment(ArticleData.date,"MMM DD, YYYY").format("MMM DD, YYYY"),pubDatesTo:moment().format("MMM DD, YYYY"),totalCounterHTML:e.totalCounterHTML.format(f),totalPMCHTML:e.totalPMCHTML.format(f),totalHTML:e.totalHTML.format(f),totalCounterPDF:e.totalCounterPDF.format(f),totalPMCPDF:e.totalPMCPDF.format(f),totalPDF:e.totalPDF.format(f),totalCounterXML:e.totalCounterXML.format(f),totalXML:e.totalXML.format(f),totalCouterTotal:e.totalCouterTotal.format(f),totalPMCTotal:e.totalPMCTotal.format(f),totalViewsPDFDownloads:((e.totalPDF/e.totalHTML)*100).format(2,".",",")};var b=c(d);this.$chartElement.append(b);},buildHighchartOptions:function(c){var d=this.chartData;var b={chart:{renderTo:"chart",animation:false,margin:[40,40,40,80]},credits:{enabled:false},exporting:{enabled:false},title:{text:null},legend:{enabled:false},xAxis:{title:{text:"Months",style:{fontFamily:"'Open Sans', Verdana, sans-serif",fontWeight:"normal",color:"#000"},align:"high"},labels:{step:(c.length<15)?1:Math.round(c.length/15),formatter:function(){return this.value+1;}},categories:[]},yAxis:[{title:{text:"Cumulative Views",style:{fontFamily:"'Open Sans', Verdana, sans-serif",fontWeight:"normal",color:"#000",height:"50px"}},labels:{style:{color:"#000"}}}],plotOptions:{column:{stacking:"normal"},animation:false,series:{pointPadding:0,groupPadding:0,borderWidth:0,shadow:false}},series:[{name:"PMC",type:"column",data:this.highchartPMCSeriesData,color:"#6d84bf"},{name:"PLOS",type:"column",data:this.highchartPlosSeriesData,color:"#3c63af"}],tooltip:{backgroundColor:"rgba(255, 255, 255, 0.0)",useHTML:true,shared:true,shadow:false,borderWidth:0,borderRadius:0,positioner:function(i,f,e){var h=e.plotX+(f/2)+25,g=e.plotY-(i/2)+25;return{x:h,y:g};},formatter:function(){var e=this.points[0].key,h=d.history,i=moment(new Date(h[e].year,h[e].month-1,2)).format("MMM YYYY");var g=h[e].source;var f=_.template(a("#viewedHighchartTooltipTemplate").html());return f({source:g,formattedDate:i});}}};return b;},createHighchart:function(){var c=a("#article-metrics").attr("data-showTooltip");if(_.keys(this.chartData.history).length>1&&c){var e=Object.keys(this.chartData.history);var d=this.buildHighchartOptions(e);this.$chartElement.append(a('<div id="chart"></div>').css("width","600px").css("height","200px"));var b=new Highcharts.Chart(d);this.createRelativeMetricInfo(b,e);}},createRelativeMetricInfo:function(h,b){var g=this;if(_.has(this.chartData,"relativeMetricData")&&!_.isEmpty(this.chartData.relativeMetricData)){var j=_.template(a("#relativeMetricTemplate").html());var d=_.sortBy(this.chartData.relativeMetricData.subject_areas,function(k){return k.subject_area;});var f={};_.each(d,function(n){var l=n.average_usage;if(l.length>b.length){l=l.slice(0,b.length);}h.addSeries({id:n.subject_area,data:l,type:"line",color:"#01DF01",marker:{enabled:false,states:{hover:{enabled:false}}}});h.get(n.subject_area).hide();var m=n.subject_area.split("/");if(m.length>2){var o=g.formatSubjectArea(m,true);if(_.has(f,s.slugify(m[1]))){f[s.slugify(m[1])].children.push(o);}else{var k=g.formatSubjectArea(m,false);f[s.slugify(m[1])]=k;f[s.slugify(m[1])].children.push(o);}}else{var o=g.formatSubjectArea(m,false);f[s.slugify(m[1])]=o;}});var i="?pageSize=12&unformattedQuery=(publication_date:["+this.chartData.relativeMetricData.start_date+" TO "+this.chartData.relativeMetricData.end_date+']) AND subject:"SUBJECT_AREA"';var c={yearPublished:new Date(this.chartData.relativeMetricData.start_date).getUTCFullYear(),subjectAreasList:f,referenceUrl:WombatConfig.metrics.referenceUrl};this.$chartElement.append(j(c));var e=a("#subject_areas option:eq(0)").attr("value");this.selectSubjectArea(e,h,i);a("#subject_areas").on("change",function(){var k=a(this).val();g.selectSubjectArea(k,h,i);});}},selectSubjectArea:function(c,e,d){var f=a("#subject_areas").data("active-area");var b=a("#linkToRefset").data("base-link")+d;if(f&&e.get(f)){e.get(f).hide();}if(e.get(c)){e.get(c).show();}a("#linkToRefset").attr("href",b.replace("SUBJECT_AREA",c));a("#subject_areas").data("active-area",c);},formatSubjectArea:function(c,b){var d={};if(b){d.id=c.join("/");d.title=c[2];}else{d.id="/"+c[1];d.title=c[1];d.children=[];}return d;}});})(jQuery);var MetricsRecommendedSection;(function(a){MetricsRecommendedSection=MetricsTabComponent.extend({$element:a("#f1kContent"),$loadingEl:a("#f1KSpinner"),$headerEl:a("#f1kHeader"),sourceOrder:["f1000"],loadData:function(b){this._super(b);this.createTiles();this.afterLoadData();},dataError:function(){this.$element.hide();this.$loadingEl.hide();this.$headerEl.hide();},newArticleError:function(){this.dataError();}});})(jQuery);var MetricsTab={};(function(b){MetricsTab.components=[(new MetricsViewedSection()),(new MetricsCitedSection()),(new MetricsSavedSection()),(new MetricsDiscussedSection()),(new MetricsRecommendedSection())];MetricsTab.getComponents=function(){return this.components;};MetricsTab.init=function(){var f=this;var e=new CounterQuery();var d=new CounterQueryValidator();e.setDataValidator(d).getArticleSummary(ArticleData.doi).then(function(g){c(g);}).fail(function(g){a(g,f);});function c(g){var h=new AlmQuery();h.getArticleDetail(ArticleData.doi).then(function(i){var j=i[0];j.counterData=g;_.each(f.getComponents(),function(k){k.loadData(j);});}).fail(function(i){a(i,f);});}};function a(c,d){switch(c.name){case"NewArticleError":_.each(d.getComponents(),function(e){e.newArticleError();});break;default:_.each(d.getComponents(),function(e){e.dataError();});break;}}MetricsTab.init();})(jQuery);(function(b){b(document).foundation({tooltip:{wrap:"word",tip_template:function(c,d){return'<span data-selector="'+c+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'">'+d+"</span>";}},reveal:{animation:false}});var a=function(){if(!Modernizr.input.required){b("form[name='searchForm']").submit(function(){var c=b("#search").val();if(!c){return false;}});}};b(document).ready(function(){var c=a();hover_delay.init();placeholder_style.init();tooltip_hover.init();});})(jQuery);